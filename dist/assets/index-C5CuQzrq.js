(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function rc(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const Te={},Ir=[],kt=()=>{},Xh=()=>!1,io=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),sc=n=>n.startsWith("onUpdate:"),it=Object.assign,ic=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},bg=Object.prototype.hasOwnProperty,me=(n,e)=>bg.call(n,e),re=Array.isArray,wr=n=>oo(n)==="[object Map]",Zh=n=>oo(n)==="[object Set]",se=n=>typeof n=="function",Me=n=>typeof n=="string",Ln=n=>typeof n=="symbol",Se=n=>n!==null&&typeof n=="object",ef=n=>(Se(n)||se(n))&&se(n.then)&&se(n.catch),tf=Object.prototype.toString,oo=n=>tf.call(n),Sg=n=>oo(n).slice(8,-1),nf=n=>oo(n)==="[object Object]",oc=n=>Me(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,vs=rc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ao=n=>{const e=Object.create(null);return(t=>e[t]||(e[t]=n(t)))},Rg=/-\w/g,Pn=ao(n=>n.replace(Rg,e=>e.slice(1).toUpperCase())),Cg=/\B([A-Z])/g,ir=ao(n=>n.replace(Cg,"-$1").toLowerCase()),rf=ao(n=>n.charAt(0).toUpperCase()+n.slice(1)),zo=ao(n=>n?`on${rf(n)}`:""),In=(n,e)=>!Object.is(n,e),Ai=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},sf=(n,e,t,r=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:r,value:t})},ac=n=>{const e=parseFloat(n);return isNaN(e)?n:e};let Gl;const co=()=>Gl||(Gl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function cc(n){if(re(n)){const e={};for(let t=0;t<n.length;t++){const r=n[t],s=Me(r)?Vg(r):cc(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(Me(n)||Se(n))return n}const Pg=/;(?![^(]*\))/g,Dg=/:([^]+)/,Ng=/\/\*[^]*?\*\//g;function Vg(n){const e={};return n.replace(Ng,"").split(Pg).forEach(t=>{if(t){const r=t.split(Dg);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function lo(n){let e="";if(Me(n))e=n;else if(re(n))for(let t=0;t<n.length;t++){const r=lo(n[t]);r&&(e+=r+" ")}else if(Se(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const kg="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Og=rc(kg);function of(n){return!!n||n===""}const af=n=>!!(n&&n.__v_isRef===!0),ma=n=>Me(n)?n:n==null?"":re(n)||Se(n)&&(n.toString===tf||!se(n.toString))?af(n)?ma(n.value):JSON.stringify(n,cf,2):String(n),cf=(n,e)=>af(e)?cf(n,e.value):wr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[r,s],i)=>(t[Ko(r,i)+" =>"]=s,t),{})}:Zh(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>Ko(t))}:Ln(e)?Ko(e):Se(e)&&!re(e)&&!nf(e)?String(e):e,Ko=(n,e="")=>{var t;return Ln(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};let ot;class xg{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ot,!e&&ot&&(this.index=(ot.scopes||(ot.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=ot;try{return ot=this,e()}finally{ot=t}}}on(){++this._on===1&&(this.prevScope=ot,ot=this)}off(){this._on>0&&--this._on===0&&(ot=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(this.effects.length=0,t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Mg(){return ot}let ve;const Go=new WeakSet;class lf{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ot&&ot.active&&ot.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Go.has(this)&&(Go.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||hf(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Wl(this),ff(this);const e=ve,t=Tt;ve=this,Tt=!0;try{return this.fn()}finally{df(this),ve=e,Tt=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)hc(e);this.deps=this.depsTail=void 0,Wl(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Go.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){_a(this)&&this.run()}get dirty(){return _a(this)}}let uf=0,Is,ws;function hf(n,e=!1){if(n.flags|=8,e){n.next=ws,ws=n;return}n.next=Is,Is=n}function lc(){uf++}function uc(){if(--uf>0)return;if(ws){let e=ws;for(ws=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;Is;){let e=Is;for(Is=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){n||(n=r)}e=t}}if(n)throw n}function ff(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function df(n){let e,t=n.depsTail,r=t;for(;r;){const s=r.prevDep;r.version===-1?(r===t&&(t=s),hc(r),Lg(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}n.deps=e,n.depsTail=t}function _a(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(pf(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function pf(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===xs)||(n.globalVersion=xs,!n.isSSR&&n.flags&128&&(!n.deps&&!n._dirty||!_a(n))))return;n.flags|=2;const e=n.dep,t=ve,r=Tt;ve=n,Tt=!0;try{ff(n);const s=n.fn(n._value);(e.version===0||In(s,n._value))&&(n.flags|=128,n._value=s,e.version++)}catch(s){throw e.version++,s}finally{ve=t,Tt=r,df(n),n.flags&=-3}}function hc(n,e=!1){const{dep:t,prevSub:r,nextSub:s}=n;if(r&&(r.nextSub=s,n.prevSub=void 0),s&&(s.prevSub=r,n.nextSub=void 0),t.subs===n&&(t.subs=r,!r&&t.computed)){t.computed.flags&=-5;for(let i=t.computed.deps;i;i=i.nextDep)hc(i,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function Lg(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let Tt=!0;const gf=[];function Jt(){gf.push(Tt),Tt=!1}function Yt(){const n=gf.pop();Tt=n===void 0?!0:n}function Wl(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=ve;ve=void 0;try{e()}finally{ve=t}}}let xs=0;class Fg{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class fc{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!ve||!Tt||ve===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==ve)t=this.activeLink=new Fg(ve,this),ve.deps?(t.prevDep=ve.depsTail,ve.depsTail.nextDep=t,ve.depsTail=t):ve.deps=ve.depsTail=t,mf(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const r=t.nextDep;r.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=r),t.prevDep=ve.depsTail,t.nextDep=void 0,ve.depsTail.nextDep=t,ve.depsTail=t,ve.deps===t&&(ve.deps=r)}return t}trigger(e){this.version++,xs++,this.notify(e)}notify(e){lc();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{uc()}}}function mf(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)mf(r)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const ya=new WeakMap,Jn=Symbol(""),Ea=Symbol(""),Ms=Symbol("");function Qe(n,e,t){if(Tt&&ve){let r=ya.get(n);r||ya.set(n,r=new Map);let s=r.get(t);s||(r.set(t,s=new fc),s.map=r,s.key=t),s.track()}}function zt(n,e,t,r,s,i){const a=ya.get(n);if(!a){xs++;return}const c=u=>{u&&u.trigger()};if(lc(),e==="clear")a.forEach(c);else{const u=re(n),f=u&&oc(t);if(u&&t==="length"){const d=Number(r);a.forEach((g,T)=>{(T==="length"||T===Ms||!Ln(T)&&T>=d)&&c(g)})}else switch((t!==void 0||a.has(void 0))&&c(a.get(t)),f&&c(a.get(Ms)),e){case"add":u?f&&c(a.get("length")):(c(a.get(Jn)),wr(n)&&c(a.get(Ea)));break;case"delete":u||(c(a.get(Jn)),wr(n)&&c(a.get(Ea)));break;case"set":wr(n)&&c(a.get(Jn));break}}uc()}function pr(n){const e=ge(n);return e===n?e:(Qe(e,"iterate",Ms),vt(n)?e:e.map(tt))}function dc(n){return Qe(n=ge(n),"iterate",Ms),n}const Ug={__proto__:null,[Symbol.iterator](){return Wo(this,Symbol.iterator,tt)},concat(...n){return pr(this).concat(...n.map(e=>re(e)?pr(e):e))},entries(){return Wo(this,"entries",n=>(n[1]=tt(n[1]),n))},every(n,e){return $t(this,"every",n,e,void 0,arguments)},filter(n,e){return $t(this,"filter",n,e,t=>t.map(tt),arguments)},find(n,e){return $t(this,"find",n,e,tt,arguments)},findIndex(n,e){return $t(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return $t(this,"findLast",n,e,tt,arguments)},findLastIndex(n,e){return $t(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return $t(this,"forEach",n,e,void 0,arguments)},includes(...n){return Qo(this,"includes",n)},indexOf(...n){return Qo(this,"indexOf",n)},join(n){return pr(this).join(n)},lastIndexOf(...n){return Qo(this,"lastIndexOf",n)},map(n,e){return $t(this,"map",n,e,void 0,arguments)},pop(){return gs(this,"pop")},push(...n){return gs(this,"push",n)},reduce(n,...e){return Ql(this,"reduce",n,e)},reduceRight(n,...e){return Ql(this,"reduceRight",n,e)},shift(){return gs(this,"shift")},some(n,e){return $t(this,"some",n,e,void 0,arguments)},splice(...n){return gs(this,"splice",n)},toReversed(){return pr(this).toReversed()},toSorted(n){return pr(this).toSorted(n)},toSpliced(...n){return pr(this).toSpliced(...n)},unshift(...n){return gs(this,"unshift",n)},values(){return Wo(this,"values",tt)}};function Wo(n,e,t){const r=dc(n),s=r[e]();return r!==n&&!vt(n)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=t(i.value)),i}),s}const Bg=Array.prototype;function $t(n,e,t,r,s,i){const a=dc(n),c=a!==n&&!vt(n),u=a[e];if(u!==Bg[e]){const g=u.apply(n,i);return c?tt(g):g}let f=t;a!==n&&(c?f=function(g,T){return t.call(this,tt(g),T,n)}:t.length>2&&(f=function(g,T){return t.call(this,g,T,n)}));const d=u.call(a,f,r);return c&&s?s(d):d}function Ql(n,e,t,r){const s=dc(n);let i=t;return s!==n&&(vt(n)?t.length>3&&(i=function(a,c,u){return t.call(this,a,c,u,n)}):i=function(a,c,u){return t.call(this,a,tt(c),u,n)}),s[e](i,...r)}function Qo(n,e,t){const r=ge(n);Qe(r,"iterate",Ms);const s=r[e](...t);return(s===-1||s===!1)&&_c(t[0])?(t[0]=ge(t[0]),r[e](...t)):s}function gs(n,e,t=[]){Jt(),lc();const r=ge(n)[e].apply(n,t);return uc(),Yt(),r}const jg=rc("__proto__,__v_isRef,__isVue"),_f=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Ln));function $g(n){Ln(n)||(n=String(n));const e=ge(this);return Qe(e,"has",n),e.hasOwnProperty(n)}class yf{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,r){if(t==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(t==="__v_isReactive")return!s;if(t==="__v_isReadonly")return s;if(t==="__v_isShallow")return i;if(t==="__v_raw")return r===(s?i?Xg:If:i?vf:Tf).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const a=re(e);if(!s){let u;if(a&&(u=Ug[t]))return u;if(t==="hasOwnProperty")return $g}const c=Reflect.get(e,t,Ye(e)?e:r);if((Ln(t)?_f.has(t):jg(t))||(s||Qe(e,"get",t),i))return c;if(Ye(c)){const u=a&&oc(t)?c:c.value;return s&&Se(u)?va(u):u}return Se(c)?s?va(c):gc(c):c}}class Ef extends yf{constructor(e=!1){super(!1,e)}set(e,t,r,s){let i=e[t];if(!this._isShallow){const u=er(i);if(!vt(r)&&!er(r)&&(i=ge(i),r=ge(r)),!re(e)&&Ye(i)&&!Ye(r))return u||(i.value=r),!0}const a=re(e)&&oc(t)?Number(t)<e.length:me(e,t),c=Reflect.set(e,t,r,Ye(e)?e:s);return e===ge(s)&&(a?In(r,i)&&zt(e,"set",t,r):zt(e,"add",t,r)),c}deleteProperty(e,t){const r=me(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&r&&zt(e,"delete",t,void 0),s}has(e,t){const r=Reflect.has(e,t);return(!Ln(t)||!_f.has(t))&&Qe(e,"has",t),r}ownKeys(e){return Qe(e,"iterate",re(e)?"length":Jn),Reflect.ownKeys(e)}}class qg extends yf{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const Hg=new Ef,zg=new qg,Kg=new Ef(!0);const Ta=n=>n,pi=n=>Reflect.getPrototypeOf(n);function Gg(n,e,t){return function(...r){const s=this.__v_raw,i=ge(s),a=wr(i),c=n==="entries"||n===Symbol.iterator&&a,u=n==="keys"&&a,f=s[n](...r),d=t?Ta:e?Ia:tt;return!e&&Qe(i,"iterate",u?Ea:Jn),{next(){const{value:g,done:T}=f.next();return T?{value:g,done:T}:{value:c?[d(g[0]),d(g[1])]:d(g),done:T}},[Symbol.iterator](){return this}}}}function gi(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function Wg(n,e){const t={get(s){const i=this.__v_raw,a=ge(i),c=ge(s);n||(In(s,c)&&Qe(a,"get",s),Qe(a,"get",c));const{has:u}=pi(a),f=e?Ta:n?Ia:tt;if(u.call(a,s))return f(i.get(s));if(u.call(a,c))return f(i.get(c));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!n&&Qe(ge(s),"iterate",Jn),s.size},has(s){const i=this.__v_raw,a=ge(i),c=ge(s);return n||(In(s,c)&&Qe(a,"has",s),Qe(a,"has",c)),s===c?i.has(s):i.has(s)||i.has(c)},forEach(s,i){const a=this,c=a.__v_raw,u=ge(c),f=e?Ta:n?Ia:tt;return!n&&Qe(u,"iterate",Jn),c.forEach((d,g)=>s.call(i,f(d),f(g),a))}};return it(t,n?{add:gi("add"),set:gi("set"),delete:gi("delete"),clear:gi("clear")}:{add(s){!e&&!vt(s)&&!er(s)&&(s=ge(s));const i=ge(this);return pi(i).has.call(i,s)||(i.add(s),zt(i,"add",s,s)),this},set(s,i){!e&&!vt(i)&&!er(i)&&(i=ge(i));const a=ge(this),{has:c,get:u}=pi(a);let f=c.call(a,s);f||(s=ge(s),f=c.call(a,s));const d=u.call(a,s);return a.set(s,i),f?In(i,d)&&zt(a,"set",s,i):zt(a,"add",s,i),this},delete(s){const i=ge(this),{has:a,get:c}=pi(i);let u=a.call(i,s);u||(s=ge(s),u=a.call(i,s)),c&&c.call(i,s);const f=i.delete(s);return u&&zt(i,"delete",s,void 0),f},clear(){const s=ge(this),i=s.size!==0,a=s.clear();return i&&zt(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=Gg(s,n,e)}),t}function pc(n,e){const t=Wg(n,e);return(r,s,i)=>s==="__v_isReactive"?!n:s==="__v_isReadonly"?n:s==="__v_raw"?r:Reflect.get(me(t,s)&&s in r?t:r,s,i)}const Qg={get:pc(!1,!1)},Jg={get:pc(!1,!0)},Yg={get:pc(!0,!1)};const Tf=new WeakMap,vf=new WeakMap,If=new WeakMap,Xg=new WeakMap;function Zg(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function em(n){return n.__v_skip||!Object.isExtensible(n)?0:Zg(Sg(n))}function gc(n){return er(n)?n:mc(n,!1,Hg,Qg,Tf)}function tm(n){return mc(n,!1,Kg,Jg,vf)}function va(n){return mc(n,!0,zg,Yg,If)}function mc(n,e,t,r,s){if(!Se(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const i=em(n);if(i===0)return n;const a=s.get(n);if(a)return a;const c=new Proxy(n,i===2?r:t);return s.set(n,c),c}function As(n){return er(n)?As(n.__v_raw):!!(n&&n.__v_isReactive)}function er(n){return!!(n&&n.__v_isReadonly)}function vt(n){return!!(n&&n.__v_isShallow)}function _c(n){return n?!!n.__v_raw:!1}function ge(n){const e=n&&n.__v_raw;return e?ge(e):n}function nm(n){return!me(n,"__v_skip")&&Object.isExtensible(n)&&sf(n,"__v_skip",!0),n}const tt=n=>Se(n)?gc(n):n,Ia=n=>Se(n)?va(n):n;function Ye(n){return n?n.__v_isRef===!0:!1}function En(n){return rm(n,!1)}function rm(n,e){return Ye(n)?n:new sm(n,e)}class sm{constructor(e,t){this.dep=new fc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:ge(e),this._value=t?e:tt(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,r=this.__v_isShallow||vt(e)||er(e);e=r?e:ge(e),In(e,t)&&(this._rawValue=e,this._value=r?e:tt(e),this.dep.trigger())}}function im(n){return Ye(n)?n.value:n}const om={get:(n,e,t)=>e==="__v_raw"?n:im(Reflect.get(n,e,t)),set:(n,e,t,r)=>{const s=n[e];return Ye(s)&&!Ye(t)?(s.value=t,!0):Reflect.set(n,e,t,r)}};function wf(n){return As(n)?n:new Proxy(n,om)}class am{constructor(e,t,r){this.fn=e,this.setter=t,this._value=void 0,this.dep=new fc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=xs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&ve!==this)return hf(this,!0),!0}get value(){const e=this.dep.track();return pf(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function cm(n,e,t=!1){let r,s;return se(n)?r=n:(r=n.get,s=n.set),new am(r,s,t)}const mi={},Li=new WeakMap;let Gn;function lm(n,e=!1,t=Gn){if(t){let r=Li.get(t);r||Li.set(t,r=[]),r.push(n)}}function um(n,e,t=Te){const{immediate:r,deep:s,once:i,scheduler:a,augmentJob:c,call:u}=t,f=z=>s?z:vt(z)||s===!1||s===0?Kt(z,1):Kt(z);let d,g,T,R,L=!1,B=!1;if(Ye(n)?(g=()=>n.value,L=vt(n)):As(n)?(g=()=>f(n),L=!0):re(n)?(B=!0,L=n.some(z=>As(z)||vt(z)),g=()=>n.map(z=>{if(Ye(z))return z.value;if(As(z))return f(z);if(se(z))return u?u(z,2):z()})):se(n)?e?g=u?()=>u(n,2):n:g=()=>{if(T){Jt();try{T()}finally{Yt()}}const z=Gn;Gn=d;try{return u?u(n,3,[R]):n(R)}finally{Gn=z}}:g=kt,e&&s){const z=g,le=s===!0?1/0:s;g=()=>Kt(z(),le)}const j=Mg(),K=()=>{d.stop(),j&&j.active&&ic(j.effects,d)};if(i&&e){const z=e;e=(...le)=>{z(...le),K()}}let Q=B?new Array(n.length).fill(mi):mi;const X=z=>{if(!(!(d.flags&1)||!d.dirty&&!z))if(e){const le=d.run();if(s||L||(B?le.some((ye,I)=>In(ye,Q[I])):In(le,Q))){T&&T();const ye=Gn;Gn=d;try{const I=[le,Q===mi?void 0:B&&Q[0]===mi?[]:Q,R];Q=le,u?u(e,3,I):e(...I)}finally{Gn=ye}}}else d.run()};return c&&c(X),d=new lf(g),d.scheduler=a?()=>a(X,!1):X,R=z=>lm(z,!1,d),T=d.onStop=()=>{const z=Li.get(d);if(z){if(u)u(z,4);else for(const le of z)le();Li.delete(d)}},e?r?X(!0):Q=d.run():a?a(X.bind(null,!0),!0):d.run(),K.pause=d.pause.bind(d),K.resume=d.resume.bind(d),K.stop=K,K}function Kt(n,e=1/0,t){if(e<=0||!Se(n)||n.__v_skip||(t=t||new Map,(t.get(n)||0)>=e))return n;if(t.set(n,e),e--,Ye(n))Kt(n.value,e,t);else if(re(n))for(let r=0;r<n.length;r++)Kt(n[r],e,t);else if(Zh(n)||wr(n))n.forEach(r=>{Kt(r,e,t)});else if(nf(n)){for(const r in n)Kt(n[r],e,t);for(const r of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,r)&&Kt(n[r],e,t)}return n}function Ks(n,e,t,r){try{return r?n(...r):n()}catch(s){uo(s,e,t)}}function Ft(n,e,t,r){if(se(n)){const s=Ks(n,e,t,r);return s&&ef(s)&&s.catch(i=>{uo(i,e,t)}),s}if(re(n)){const s=[];for(let i=0;i<n.length;i++)s.push(Ft(n[i],e,t,r));return s}}function uo(n,e,t,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||Te;if(e){let c=e.parent;const u=e.proxy,f=`https://vuejs.org/error-reference/#runtime-${t}`;for(;c;){const d=c.ec;if(d){for(let g=0;g<d.length;g++)if(d[g](n,u,f)===!1)return}c=c.parent}if(i){Jt(),Ks(i,null,10,[n,u,f]),Yt();return}}hm(n,t,s,r,a)}function hm(n,e,t,r=!0,s=!1){if(s)throw n;console.error(n)}const nt=[];let Rt=-1;const Ar=[];let dn=null,gr=0;const Af=Promise.resolve();let Fi=null;function fm(n){const e=Fi||Af;return n?e.then(this?n.bind(this):n):e}function dm(n){let e=Rt+1,t=nt.length;for(;e<t;){const r=e+t>>>1,s=nt[r],i=Ls(s);i<n||i===n&&s.flags&2?e=r+1:t=r}return e}function yc(n){if(!(n.flags&1)){const e=Ls(n),t=nt[nt.length-1];!t||!(n.flags&2)&&e>=Ls(t)?nt.push(n):nt.splice(dm(e),0,n),n.flags|=1,bf()}}function bf(){Fi||(Fi=Af.then(Rf))}function pm(n){re(n)?Ar.push(...n):dn&&n.id===-1?dn.splice(gr+1,0,n):n.flags&1||(Ar.push(n),n.flags|=1),bf()}function Jl(n,e,t=Rt+1){for(;t<nt.length;t++){const r=nt[t];if(r&&r.flags&2){if(n&&r.id!==n.uid)continue;nt.splice(t,1),t--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Sf(n){if(Ar.length){const e=[...new Set(Ar)].sort((t,r)=>Ls(t)-Ls(r));if(Ar.length=0,dn){dn.push(...e);return}for(dn=e,gr=0;gr<dn.length;gr++){const t=dn[gr];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}dn=null,gr=0}}const Ls=n=>n.id==null?n.flags&2?-1:1/0:n.id;function Rf(n){try{for(Rt=0;Rt<nt.length;Rt++){const e=nt[Rt];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Ks(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Rt<nt.length;Rt++){const e=nt[Rt];e&&(e.flags&=-2)}Rt=-1,nt.length=0,Sf(),Fi=null,(nt.length||Ar.length)&&Rf()}}let gt=null,Cf=null;function Ui(n){const e=gt;return gt=n,Cf=n&&n.type.__scopeId||null,e}function gm(n,e=gt,t){if(!e||n._n)return n;const r=(...s)=>{r._d&&au(-1);const i=Ui(e);let a;try{a=n(...s)}finally{Ui(i),r._d&&au(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function Yl(n,e){if(gt===null)return n;const t=go(gt),r=n.dirs||(n.dirs=[]);for(let s=0;s<e.length;s++){let[i,a,c,u=Te]=e[s];i&&(se(i)&&(i={mounted:i,updated:i}),i.deep&&Kt(a),r.push({dir:i,instance:t,value:a,oldValue:void 0,arg:c,modifiers:u}))}return n}function zn(n,e,t,r){const s=n.dirs,i=e&&e.dirs;for(let a=0;a<s.length;a++){const c=s[a];i&&(c.oldValue=i[a].value);let u=c.dir[r];u&&(Jt(),Ft(u,t,8,[n.el,c,n,e]),Yt())}}const mm=Symbol("_vte"),_m=n=>n.__isTeleport,ym=Symbol("_leaveCb");function Ec(n,e){n.shapeFlag&6&&n.component?(n.transition=e,Ec(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function Pf(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}const Bi=new WeakMap;function bs(n,e,t,r,s=!1){if(re(n)){n.forEach((L,B)=>bs(L,e&&(re(e)?e[B]:e),t,r,s));return}if(Ss(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&bs(n,e,t,r.component.subTree);return}const i=r.shapeFlag&4?go(r.component):r.el,a=s?null:i,{i:c,r:u}=n,f=e&&e.r,d=c.refs===Te?c.refs={}:c.refs,g=c.setupState,T=ge(g),R=g===Te?Xh:L=>me(T,L);if(f!=null&&f!==u){if(Xl(e),Me(f))d[f]=null,R(f)&&(g[f]=null);else if(Ye(f)){f.value=null;const L=e;L.k&&(d[L.k]=null)}}if(se(u))Ks(u,c,12,[a,d]);else{const L=Me(u),B=Ye(u);if(L||B){const j=()=>{if(n.f){const K=L?R(u)?g[u]:d[u]:u.value;if(s)re(K)&&ic(K,i);else if(re(K))K.includes(i)||K.push(i);else if(L)d[u]=[i],R(u)&&(g[u]=d[u]);else{const Q=[i];u.value=Q,n.k&&(d[n.k]=Q)}}else L?(d[u]=a,R(u)&&(g[u]=a)):B&&(u.value=a,n.k&&(d[n.k]=a))};if(a){const K=()=>{j(),Bi.delete(n)};K.id=-1,Bi.set(n,K),ft(K,t)}else Xl(n),j()}}}function Xl(n){const e=Bi.get(n);e&&(e.flags|=8,Bi.delete(n))}co().requestIdleCallback;co().cancelIdleCallback;const Ss=n=>!!n.type.__asyncLoader,Df=n=>n.type.__isKeepAlive;function Em(n,e){Nf(n,"a",e)}function Tm(n,e){Nf(n,"da",e)}function Nf(n,e,t=rt){const r=n.__wdc||(n.__wdc=()=>{let s=t;for(;s;){if(s.isDeactivated)return;s=s.parent}return n()});if(ho(e,r,t),t){let s=t.parent;for(;s&&s.parent;)Df(s.parent.vnode)&&vm(r,e,t,s),s=s.parent}}function vm(n,e,t,r){const s=ho(e,n,r,!0);Vf(()=>{ic(r[e],s)},t)}function ho(n,e,t=rt,r=!1){if(t){const s=t[n]||(t[n]=[]),i=e.__weh||(e.__weh=(...a)=>{Jt();const c=Gs(t),u=Ft(e,t,n,a);return c(),Yt(),u});return r?s.unshift(i):s.push(i),i}}const nn=n=>(e,t=rt)=>{(!Us||n==="sp")&&ho(n,(...r)=>e(...r),t)},Im=nn("bm"),Tc=nn("m"),wm=nn("bu"),Am=nn("u"),bm=nn("bum"),Vf=nn("um"),Sm=nn("sp"),Rm=nn("rtg"),Cm=nn("rtc");function Pm(n,e=rt){ho("ec",n,e)}const Dm=Symbol.for("v-ndc"),wa=n=>n?Zf(n)?go(n):wa(n.parent):null,Rs=it(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>wa(n.parent),$root:n=>wa(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>Of(n),$forceUpdate:n=>n.f||(n.f=()=>{yc(n.update)}),$nextTick:n=>n.n||(n.n=fm.bind(n.proxy)),$watch:n=>Xm.bind(n)}),Jo=(n,e)=>n!==Te&&!n.__isScriptSetup&&me(n,e),Nm={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:r,data:s,props:i,accessCache:a,type:c,appContext:u}=n;let f;if(e[0]!=="$"){const R=a[e];if(R!==void 0)switch(R){case 1:return r[e];case 2:return s[e];case 4:return t[e];case 3:return i[e]}else{if(Jo(r,e))return a[e]=1,r[e];if(s!==Te&&me(s,e))return a[e]=2,s[e];if((f=n.propsOptions[0])&&me(f,e))return a[e]=3,i[e];if(t!==Te&&me(t,e))return a[e]=4,t[e];Aa&&(a[e]=0)}}const d=Rs[e];let g,T;if(d)return e==="$attrs"&&Qe(n.attrs,"get",""),d(n);if((g=c.__cssModules)&&(g=g[e]))return g;if(t!==Te&&me(t,e))return a[e]=4,t[e];if(T=u.config.globalProperties,me(T,e))return T[e]},set({_:n},e,t){const{data:r,setupState:s,ctx:i}=n;return Jo(s,e)?(s[e]=t,!0):r!==Te&&me(r,e)?(r[e]=t,!0):me(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(i[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:r,appContext:s,propsOptions:i,type:a}},c){let u,f;return!!(t[c]||n!==Te&&c[0]!=="$"&&me(n,c)||Jo(e,c)||(u=i[0])&&me(u,c)||me(r,c)||me(Rs,c)||me(s.config.globalProperties,c)||(f=a.__cssModules)&&f[c])},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:me(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function Zl(n){return re(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let Aa=!0;function Vm(n){const e=Of(n),t=n.proxy,r=n.ctx;Aa=!1,e.beforeCreate&&eu(e.beforeCreate,n,"bc");const{data:s,computed:i,methods:a,watch:c,provide:u,inject:f,created:d,beforeMount:g,mounted:T,beforeUpdate:R,updated:L,activated:B,deactivated:j,beforeDestroy:K,beforeUnmount:Q,destroyed:X,unmounted:z,render:le,renderTracked:ye,renderTriggered:I,errorCaptured:m,serverPrefetch:E,expose:A,inheritAttrs:v,components:b,directives:y,filters:Le}=e;if(f&&km(f,r,null),a)for(const Ie in a){const pe=a[Ie];se(pe)&&(r[Ie]=pe.bind(t))}if(s){const Ie=s.call(t,t);Se(Ie)&&(n.data=gc(Ie))}if(Aa=!0,i)for(const Ie in i){const pe=i[Ie],pt=se(pe)?pe.bind(t,t):se(pe.get)?pe.get.bind(t,t):kt,cr=!se(pe)&&se(pe.set)?pe.set.bind(t):kt,wt=v_({get:pt,set:cr});Object.defineProperty(r,Ie,{enumerable:!0,configurable:!0,get:()=>wt.value,set:ct=>wt.value=ct})}if(c)for(const Ie in c)kf(c[Ie],r,t,Ie);if(u){const Ie=se(u)?u.call(t):u;Reflect.ownKeys(Ie).forEach(pe=>{Um(pe,Ie[pe])})}d&&eu(d,n,"c");function je(Ie,pe){re(pe)?pe.forEach(pt=>Ie(pt.bind(t))):pe&&Ie(pe.bind(t))}if(je(Im,g),je(Tc,T),je(wm,R),je(Am,L),je(Em,B),je(Tm,j),je(Pm,m),je(Cm,ye),je(Rm,I),je(bm,Q),je(Vf,z),je(Sm,E),re(A))if(A.length){const Ie=n.exposed||(n.exposed={});A.forEach(pe=>{Object.defineProperty(Ie,pe,{get:()=>t[pe],set:pt=>t[pe]=pt,enumerable:!0})})}else n.exposed||(n.exposed={});le&&n.render===kt&&(n.render=le),v!=null&&(n.inheritAttrs=v),b&&(n.components=b),y&&(n.directives=y),E&&Pf(n)}function km(n,e,t=kt){re(n)&&(n=ba(n));for(const r in n){const s=n[r];let i;Se(s)?"default"in s?i=bi(s.from||r,s.default,!0):i=bi(s.from||r):i=bi(s),Ye(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):e[r]=i}}function eu(n,e,t){Ft(re(n)?n.map(r=>r.bind(e.proxy)):n.bind(e.proxy),e,t)}function kf(n,e,t,r){let s=r.includes(".")?Gf(t,r):()=>t[r];if(Me(n)){const i=e[n];se(i)&&Xo(s,i)}else if(se(n))Xo(s,n.bind(t));else if(Se(n))if(re(n))n.forEach(i=>kf(i,e,t,r));else{const i=se(n.handler)?n.handler.bind(t):e[n.handler];se(i)&&Xo(s,i,n)}}function Of(n){const e=n.type,{mixins:t,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=n.appContext,c=i.get(e);let u;return c?u=c:!s.length&&!t&&!r?u=e:(u={},s.length&&s.forEach(f=>ji(u,f,a,!0)),ji(u,e,a)),Se(e)&&i.set(e,u),u}function ji(n,e,t,r=!1){const{mixins:s,extends:i}=e;i&&ji(n,i,t,!0),s&&s.forEach(a=>ji(n,a,t,!0));for(const a in e)if(!(r&&a==="expose")){const c=Om[a]||t&&t[a];n[a]=c?c(n[a],e[a]):e[a]}return n}const Om={data:tu,props:nu,emits:nu,methods:_s,computed:_s,beforeCreate:et,created:et,beforeMount:et,mounted:et,beforeUpdate:et,updated:et,beforeDestroy:et,beforeUnmount:et,destroyed:et,unmounted:et,activated:et,deactivated:et,errorCaptured:et,serverPrefetch:et,components:_s,directives:_s,watch:Mm,provide:tu,inject:xm};function tu(n,e){return e?n?function(){return it(se(n)?n.call(this,this):n,se(e)?e.call(this,this):e)}:e:n}function xm(n,e){return _s(ba(n),ba(e))}function ba(n){if(re(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function et(n,e){return n?[...new Set([].concat(n,e))]:e}function _s(n,e){return n?it(Object.create(null),n,e):e}function nu(n,e){return n?re(n)&&re(e)?[...new Set([...n,...e])]:it(Object.create(null),Zl(n),Zl(e??{})):e}function Mm(n,e){if(!n)return e;if(!e)return n;const t=it(Object.create(null),n);for(const r in e)t[r]=et(n[r],e[r]);return t}function xf(){return{app:null,config:{isNativeTag:Xh,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Lm=0;function Fm(n,e){return function(r,s=null){se(r)||(r=it({},r)),s!=null&&!Se(s)&&(s=null);const i=xf(),a=new WeakSet,c=[];let u=!1;const f=i.app={_uid:Lm++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:I_,get config(){return i.config},set config(d){},use(d,...g){return a.has(d)||(d&&se(d.install)?(a.add(d),d.install(f,...g)):se(d)&&(a.add(d),d(f,...g))),f},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),f},component(d,g){return g?(i.components[d]=g,f):i.components[d]},directive(d,g){return g?(i.directives[d]=g,f):i.directives[d]},mount(d,g,T){if(!u){const R=f._ceVNode||Ot(r,s);return R.appContext=i,T===!0?T="svg":T===!1&&(T=void 0),n(R,d,T),u=!0,f._container=d,d.__vue_app__=f,go(R.component)}},onUnmount(d){c.push(d)},unmount(){u&&(Ft(c,f._instance,16),n(null,f._container),delete f._container.__vue_app__)},provide(d,g){return i.provides[d]=g,f},runWithContext(d){const g=br;br=f;try{return d()}finally{br=g}}};return f}}let br=null;function Um(n,e){if(rt){let t=rt.provides;const r=rt.parent&&rt.parent.provides;r===t&&(t=rt.provides=Object.create(r)),t[n]=e}}function bi(n,e,t=!1){const r=g_();if(r||br){let s=br?br._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&n in s)return s[n];if(arguments.length>1)return t&&se(e)?e.call(r&&r.proxy):e}}const Mf={},Lf=()=>Object.create(Mf),Ff=n=>Object.getPrototypeOf(n)===Mf;function Bm(n,e,t,r=!1){const s={},i=Lf();n.propsDefaults=Object.create(null),Uf(n,e,s,i);for(const a in n.propsOptions[0])a in s||(s[a]=void 0);t?n.props=r?s:tm(s):n.type.props?n.props=s:n.props=i,n.attrs=i}function jm(n,e,t,r){const{props:s,attrs:i,vnode:{patchFlag:a}}=n,c=ge(s),[u]=n.propsOptions;let f=!1;if((r||a>0)&&!(a&16)){if(a&8){const d=n.vnode.dynamicProps;for(let g=0;g<d.length;g++){let T=d[g];if(fo(n.emitsOptions,T))continue;const R=e[T];if(u)if(me(i,T))R!==i[T]&&(i[T]=R,f=!0);else{const L=Pn(T);s[L]=Sa(u,c,L,R,n,!1)}else R!==i[T]&&(i[T]=R,f=!0)}}}else{Uf(n,e,s,i)&&(f=!0);let d;for(const g in c)(!e||!me(e,g)&&((d=ir(g))===g||!me(e,d)))&&(u?t&&(t[g]!==void 0||t[d]!==void 0)&&(s[g]=Sa(u,c,g,void 0,n,!0)):delete s[g]);if(i!==c)for(const g in i)(!e||!me(e,g))&&(delete i[g],f=!0)}f&&zt(n.attrs,"set","")}function Uf(n,e,t,r){const[s,i]=n.propsOptions;let a=!1,c;if(e)for(let u in e){if(vs(u))continue;const f=e[u];let d;s&&me(s,d=Pn(u))?!i||!i.includes(d)?t[d]=f:(c||(c={}))[d]=f:fo(n.emitsOptions,u)||(!(u in r)||f!==r[u])&&(r[u]=f,a=!0)}if(i){const u=ge(t),f=c||Te;for(let d=0;d<i.length;d++){const g=i[d];t[g]=Sa(s,u,g,f[g],n,!me(f,g))}}return a}function Sa(n,e,t,r,s,i){const a=n[t];if(a!=null){const c=me(a,"default");if(c&&r===void 0){const u=a.default;if(a.type!==Function&&!a.skipFactory&&se(u)){const{propsDefaults:f}=s;if(t in f)r=f[t];else{const d=Gs(s);r=f[t]=u.call(null,e),d()}}else r=u;s.ce&&s.ce._setProp(t,r)}a[0]&&(i&&!c?r=!1:a[1]&&(r===""||r===ir(t))&&(r=!0))}return r}const $m=new WeakMap;function Bf(n,e,t=!1){const r=t?$m:e.propsCache,s=r.get(n);if(s)return s;const i=n.props,a={},c=[];let u=!1;if(!se(n)){const d=g=>{u=!0;const[T,R]=Bf(g,e,!0);it(a,T),R&&c.push(...R)};!t&&e.mixins.length&&e.mixins.forEach(d),n.extends&&d(n.extends),n.mixins&&n.mixins.forEach(d)}if(!i&&!u)return Se(n)&&r.set(n,Ir),Ir;if(re(i))for(let d=0;d<i.length;d++){const g=Pn(i[d]);ru(g)&&(a[g]=Te)}else if(i)for(const d in i){const g=Pn(d);if(ru(g)){const T=i[d],R=a[g]=re(T)||se(T)?{type:T}:it({},T),L=R.type;let B=!1,j=!0;if(re(L))for(let K=0;K<L.length;++K){const Q=L[K],X=se(Q)&&Q.name;if(X==="Boolean"){B=!0;break}else X==="String"&&(j=!1)}else B=se(L)&&L.name==="Boolean";R[0]=B,R[1]=j,(B||me(R,"default"))&&c.push(g)}}const f=[a,c];return Se(n)&&r.set(n,f),f}function ru(n){return n[0]!=="$"&&!vs(n)}const vc=n=>n==="_"||n==="_ctx"||n==="$stable",Ic=n=>re(n)?n.map(Pt):[Pt(n)],qm=(n,e,t)=>{if(e._n)return e;const r=gm((...s)=>Ic(e(...s)),t);return r._c=!1,r},jf=(n,e,t)=>{const r=n._ctx;for(const s in n){if(vc(s))continue;const i=n[s];if(se(i))e[s]=qm(s,i,r);else if(i!=null){const a=Ic(i);e[s]=()=>a}}},$f=(n,e)=>{const t=Ic(e);n.slots.default=()=>t},qf=(n,e,t)=>{for(const r in e)(t||!vc(r))&&(n[r]=e[r])},Hm=(n,e,t)=>{const r=n.slots=Lf();if(n.vnode.shapeFlag&32){const s=e._;s?(qf(r,e,t),t&&sf(r,"_",s,!0)):jf(e,r)}else e&&$f(n,e)},zm=(n,e,t)=>{const{vnode:r,slots:s}=n;let i=!0,a=Te;if(r.shapeFlag&32){const c=e._;c?t&&c===1?i=!1:qf(s,e,t):(i=!e.$stable,jf(e,s)),a=e}else e&&($f(n,e),a={default:1});if(i)for(const c in s)!vc(c)&&a[c]==null&&delete s[c]},ft=o_;function Km(n){return Gm(n)}function Gm(n,e){const t=co();t.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:a,createText:c,createComment:u,setText:f,setElementText:d,parentNode:g,nextSibling:T,setScopeId:R=kt,insertStaticContent:L}=n,B=(_,w,P,M=null,N=null,V=null,$=void 0,x=null,O=!!w.dynamicChildren)=>{if(_===w)return;_&&!ms(_,w)&&(M=sn(_),ct(_,N,V,!0),_=null),w.patchFlag===-2&&(O=!1,w.dynamicChildren=null);const{type:k,ref:J,shapeFlag:q}=w;switch(k){case po:j(_,w,P,M);break;case Dn:K(_,w,P,M);break;case Zo:_==null&&Q(w,P,M,$);break;case Ht:b(_,w,P,M,N,V,$,x,O);break;default:q&1?le(_,w,P,M,N,V,$,x,O):q&6?y(_,w,P,M,N,V,$,x,O):(q&64||q&128)&&k.process(_,w,P,M,N,V,$,x,O,Un)}J!=null&&N?bs(J,_&&_.ref,V,w||_,!w):J==null&&_&&_.ref!=null&&bs(_.ref,null,V,_,!0)},j=(_,w,P,M)=>{if(_==null)r(w.el=c(w.children),P,M);else{const N=w.el=_.el;w.children!==_.children&&f(N,w.children)}},K=(_,w,P,M)=>{_==null?r(w.el=u(w.children||""),P,M):w.el=_.el},Q=(_,w,P,M)=>{[_.el,_.anchor]=L(_.children,w,P,M,_.el,_.anchor)},X=({el:_,anchor:w},P,M)=>{let N;for(;_&&_!==w;)N=T(_),r(_,P,M),_=N;r(w,P,M)},z=({el:_,anchor:w})=>{let P;for(;_&&_!==w;)P=T(_),s(_),_=P;s(w)},le=(_,w,P,M,N,V,$,x,O)=>{if(w.type==="svg"?$="svg":w.type==="math"&&($="mathml"),_==null)ye(w,P,M,N,V,$,x,O);else{const k=_.el&&_.el._isVueCE?_.el:null;try{k&&k._beginPatch(),E(_,w,N,V,$,x,O)}finally{k&&k._endPatch()}}},ye=(_,w,P,M,N,V,$,x)=>{let O,k;const{props:J,shapeFlag:q,transition:W,dirs:Y}=_;if(O=_.el=a(_.type,V,J&&J.is,J),q&8?d(O,_.children):q&16&&m(_.children,O,null,M,N,Yo(_,V),$,x),Y&&zn(_,null,M,"created"),I(O,_,_.scopeId,$,M),J){for(const _e in J)_e!=="value"&&!vs(_e)&&i(O,_e,null,J[_e],V,M);"value"in J&&i(O,"value",null,J.value,V),(k=J.onVnodeBeforeMount)&&St(k,M,_)}Y&&zn(_,null,M,"beforeMount");const oe=Wm(N,W);oe&&W.beforeEnter(O),r(O,w,P),((k=J&&J.onVnodeMounted)||oe||Y)&&ft(()=>{k&&St(k,M,_),oe&&W.enter(O),Y&&zn(_,null,M,"mounted")},N)},I=(_,w,P,M,N)=>{if(P&&R(_,P),M)for(let V=0;V<M.length;V++)R(_,M[V]);if(N){let V=N.subTree;if(w===V||Qf(V.type)&&(V.ssContent===w||V.ssFallback===w)){const $=N.vnode;I(_,$,$.scopeId,$.slotScopeIds,N.parent)}}},m=(_,w,P,M,N,V,$,x,O=0)=>{for(let k=O;k<_.length;k++){const J=_[k]=x?pn(_[k]):Pt(_[k]);B(null,J,w,P,M,N,V,$,x)}},E=(_,w,P,M,N,V,$)=>{const x=w.el=_.el;let{patchFlag:O,dynamicChildren:k,dirs:J}=w;O|=_.patchFlag&16;const q=_.props||Te,W=w.props||Te;let Y;if(P&&Kn(P,!1),(Y=W.onVnodeBeforeUpdate)&&St(Y,P,w,_),J&&zn(w,_,P,"beforeUpdate"),P&&Kn(P,!0),(q.innerHTML&&W.innerHTML==null||q.textContent&&W.textContent==null)&&d(x,""),k?A(_.dynamicChildren,k,x,P,M,Yo(w,N),V):$||pe(_,w,x,null,P,M,Yo(w,N),V,!1),O>0){if(O&16)v(x,q,W,P,N);else if(O&2&&q.class!==W.class&&i(x,"class",null,W.class,N),O&4&&i(x,"style",q.style,W.style,N),O&8){const oe=w.dynamicProps;for(let _e=0;_e<oe.length;_e++){const fe=oe[_e],ze=q[fe],Ke=W[fe];(Ke!==ze||fe==="value")&&i(x,fe,ze,Ke,N,P)}}O&1&&_.children!==w.children&&d(x,w.children)}else!$&&k==null&&v(x,q,W,P,N);((Y=W.onVnodeUpdated)||J)&&ft(()=>{Y&&St(Y,P,w,_),J&&zn(w,_,P,"updated")},M)},A=(_,w,P,M,N,V,$)=>{for(let x=0;x<w.length;x++){const O=_[x],k=w[x],J=O.el&&(O.type===Ht||!ms(O,k)||O.shapeFlag&198)?g(O.el):P;B(O,k,J,null,M,N,V,$,!0)}},v=(_,w,P,M,N)=>{if(w!==P){if(w!==Te)for(const V in w)!vs(V)&&!(V in P)&&i(_,V,w[V],null,N,M);for(const V in P){if(vs(V))continue;const $=P[V],x=w[V];$!==x&&V!=="value"&&i(_,V,x,$,N,M)}"value"in P&&i(_,"value",w.value,P.value,N)}},b=(_,w,P,M,N,V,$,x,O)=>{const k=w.el=_?_.el:c(""),J=w.anchor=_?_.anchor:c("");let{patchFlag:q,dynamicChildren:W,slotScopeIds:Y}=w;Y&&(x=x?x.concat(Y):Y),_==null?(r(k,P,M),r(J,P,M),m(w.children||[],P,J,N,V,$,x,O)):q>0&&q&64&&W&&_.dynamicChildren?(A(_.dynamicChildren,W,P,N,V,$,x),(w.key!=null||N&&w===N.subTree)&&Hf(_,w,!0)):pe(_,w,P,J,N,V,$,x,O)},y=(_,w,P,M,N,V,$,x,O)=>{w.slotScopeIds=x,_==null?w.shapeFlag&512?N.ctx.activate(w,P,M,$,O):Le(w,P,M,N,V,$,O):It(_,w,O)},Le=(_,w,P,M,N,V,$)=>{const x=_.component=p_(_,M,N);if(Df(_)&&(x.ctx.renderer=Un),m_(x,!1,$),x.asyncDep){if(N&&N.registerDep(x,je,$),!_.el){const O=x.subTree=Ot(Dn);K(null,O,w,P),_.placeholder=O.el}}else je(x,_,w,P,N,V,$)},It=(_,w,P)=>{const M=w.component=_.component;if(s_(_,w,P))if(M.asyncDep&&!M.asyncResolved){Ie(M,w,P);return}else M.next=w,M.update();else w.el=_.el,M.vnode=w},je=(_,w,P,M,N,V,$)=>{const x=()=>{if(_.isMounted){let{next:q,bu:W,u:Y,parent:oe,vnode:_e}=_;{const ut=zf(_);if(ut){q&&(q.el=_e.el,Ie(_,q,$)),ut.asyncDep.then(()=>{_.isUnmounted||x()});return}}let fe=q,ze;Kn(_,!1),q?(q.el=_e.el,Ie(_,q,$)):q=_e,W&&Ai(W),(ze=q.props&&q.props.onVnodeBeforeUpdate)&&St(ze,oe,q,_e),Kn(_,!0);const Ke=iu(_),lt=_.subTree;_.subTree=Ke,B(lt,Ke,g(lt.el),sn(lt),_,N,V),q.el=Ke.el,fe===null&&i_(_,Ke.el),Y&&ft(Y,N),(ze=q.props&&q.props.onVnodeUpdated)&&ft(()=>St(ze,oe,q,_e),N)}else{let q;const{el:W,props:Y}=w,{bm:oe,m:_e,parent:fe,root:ze,type:Ke}=_,lt=Ss(w);Kn(_,!1),oe&&Ai(oe),!lt&&(q=Y&&Y.onVnodeBeforeMount)&&St(q,fe,w),Kn(_,!0);{ze.ce&&ze.ce._def.shadowRoot!==!1&&ze.ce._injectChildStyle(Ke);const ut=_.subTree=iu(_);B(null,ut,P,M,_,N,V),w.el=ut.el}if(_e&&ft(_e,N),!lt&&(q=Y&&Y.onVnodeMounted)){const ut=w;ft(()=>St(q,fe,ut),N)}(w.shapeFlag&256||fe&&Ss(fe.vnode)&&fe.vnode.shapeFlag&256)&&_.a&&ft(_.a,N),_.isMounted=!0,w=P=M=null}};_.scope.on();const O=_.effect=new lf(x);_.scope.off();const k=_.update=O.run.bind(O),J=_.job=O.runIfDirty.bind(O);J.i=_,J.id=_.uid,O.scheduler=()=>yc(J),Kn(_,!0),k()},Ie=(_,w,P)=>{w.component=_;const M=_.vnode.props;_.vnode=w,_.next=null,jm(_,w.props,M,P),zm(_,w.children,P),Jt(),Jl(_),Yt()},pe=(_,w,P,M,N,V,$,x,O=!1)=>{const k=_&&_.children,J=_?_.shapeFlag:0,q=w.children,{patchFlag:W,shapeFlag:Y}=w;if(W>0){if(W&128){cr(k,q,P,M,N,V,$,x,O);return}else if(W&256){pt(k,q,P,M,N,V,$,x,O);return}}Y&8?(J&16&&jt(k,N,V),q!==k&&d(P,q)):J&16?Y&16?cr(k,q,P,M,N,V,$,x,O):jt(k,N,V,!0):(J&8&&d(P,""),Y&16&&m(q,P,M,N,V,$,x,O))},pt=(_,w,P,M,N,V,$,x,O)=>{_=_||Ir,w=w||Ir;const k=_.length,J=w.length,q=Math.min(k,J);let W;for(W=0;W<q;W++){const Y=w[W]=O?pn(w[W]):Pt(w[W]);B(_[W],Y,P,null,N,V,$,x,O)}k>J?jt(_,N,V,!0,!1,q):m(w,P,M,N,V,$,x,O,q)},cr=(_,w,P,M,N,V,$,x,O)=>{let k=0;const J=w.length;let q=_.length-1,W=J-1;for(;k<=q&&k<=W;){const Y=_[k],oe=w[k]=O?pn(w[k]):Pt(w[k]);if(ms(Y,oe))B(Y,oe,P,null,N,V,$,x,O);else break;k++}for(;k<=q&&k<=W;){const Y=_[q],oe=w[W]=O?pn(w[W]):Pt(w[W]);if(ms(Y,oe))B(Y,oe,P,null,N,V,$,x,O);else break;q--,W--}if(k>q){if(k<=W){const Y=W+1,oe=Y<J?w[Y].el:M;for(;k<=W;)B(null,w[k]=O?pn(w[k]):Pt(w[k]),P,oe,N,V,$,x,O),k++}}else if(k>W)for(;k<=q;)ct(_[k],N,V,!0),k++;else{const Y=k,oe=k,_e=new Map;for(k=oe;k<=W;k++){const $e=w[k]=O?pn(w[k]):Pt(w[k]);$e.key!=null&&_e.set($e.key,k)}let fe,ze=0;const Ke=W-oe+1;let lt=!1,ut=0;const _t=new Array(Ke);for(k=0;k<Ke;k++)_t[k]=0;for(k=Y;k<=q;k++){const $e=_[k];if(ze>=Ke){ct($e,N,V,!0);continue}let Fe;if($e.key!=null)Fe=_e.get($e.key);else for(fe=oe;fe<=W;fe++)if(_t[fe-oe]===0&&ms($e,w[fe])){Fe=fe;break}Fe===void 0?ct($e,N,V,!0):(_t[Fe-oe]=k+1,Fe>=ut?ut=Fe:lt=!0,B($e,w[Fe],P,null,N,V,$,x,O),ze++)}const ur=lt?Qm(_t):Ir;for(fe=ur.length-1,k=Ke-1;k>=0;k--){const $e=oe+k,Fe=w[$e],es=w[$e+1],Bn=$e+1<J?es.el||es.placeholder:M;_t[k]===0?B(null,Fe,P,Bn,N,V,$,x,O):lt&&(fe<0||k!==ur[fe]?wt(Fe,P,Bn,2):fe--)}}},wt=(_,w,P,M,N=null)=>{const{el:V,type:$,transition:x,children:O,shapeFlag:k}=_;if(k&6){wt(_.component.subTree,w,P,M);return}if(k&128){_.suspense.move(w,P,M);return}if(k&64){$.move(_,w,P,Un);return}if($===Ht){r(V,w,P);for(let q=0;q<O.length;q++)wt(O[q],w,P,M);r(_.anchor,w,P);return}if($===Zo){X(_,w,P);return}if(M!==2&&k&1&&x)if(M===0)x.beforeEnter(V),r(V,w,P),ft(()=>x.enter(V),N);else{const{leave:q,delayLeave:W,afterLeave:Y}=x,oe=()=>{_.ctx.isUnmounted?s(V):r(V,w,P)},_e=()=>{V._isLeaving&&V[ym](!0),q(V,()=>{oe(),Y&&Y()})};W?W(V,oe,_e):_e()}else r(V,w,P)},ct=(_,w,P,M=!1,N=!1)=>{const{type:V,props:$,ref:x,children:O,dynamicChildren:k,shapeFlag:J,patchFlag:q,dirs:W,cacheIndex:Y}=_;if(q===-2&&(N=!1),x!=null&&(Jt(),bs(x,null,P,_,!0),Yt()),Y!=null&&(w.renderCache[Y]=void 0),J&256){w.ctx.deactivate(_);return}const oe=J&1&&W,_e=!Ss(_);let fe;if(_e&&(fe=$&&$.onVnodeBeforeUnmount)&&St(fe,w,_),J&6)Xr(_.component,P,M);else{if(J&128){_.suspense.unmount(P,M);return}oe&&zn(_,null,w,"beforeUnmount"),J&64?_.type.remove(_,w,P,Un,M):k&&!k.hasOnce&&(V!==Ht||q>0&&q&64)?jt(k,w,P,!1,!0):(V===Ht&&q&384||!N&&J&16)&&jt(O,w,P),M&&Yr(_)}(_e&&(fe=$&&$.onVnodeUnmounted)||oe)&&ft(()=>{fe&&St(fe,w,_),oe&&zn(_,null,w,"unmounted")},P)},Yr=_=>{const{type:w,el:P,anchor:M,transition:N}=_;if(w===Ht){lr(P,M);return}if(w===Zo){z(_);return}const V=()=>{s(P),N&&!N.persisted&&N.afterLeave&&N.afterLeave()};if(_.shapeFlag&1&&N&&!N.persisted){const{leave:$,delayLeave:x}=N,O=()=>$(P,V);x?x(_.el,V,O):O()}else V()},lr=(_,w)=>{let P;for(;_!==w;)P=T(_),s(_),_=P;s(w)},Xr=(_,w,P)=>{const{bum:M,scope:N,job:V,subTree:$,um:x,m:O,a:k}=_;su(O),su(k),M&&Ai(M),N.stop(),V&&(V.flags|=8,ct($,_,w,P)),x&&ft(x,w),ft(()=>{_.isUnmounted=!0},w)},jt=(_,w,P,M=!1,N=!1,V=0)=>{for(let $=V;$<_.length;$++)ct(_[$],w,P,M,N)},sn=_=>{if(_.shapeFlag&6)return sn(_.component.subTree);if(_.shapeFlag&128)return _.suspense.next();const w=T(_.anchor||_.el),P=w&&w[mm];return P?T(P):w};let Fn=!1;const Zr=(_,w,P)=>{_==null?w._vnode&&ct(w._vnode,null,null,!0):B(w._vnode||null,_,w,null,null,null,P),w._vnode=_,Fn||(Fn=!0,Jl(),Sf(),Fn=!1)},Un={p:B,um:ct,m:wt,r:Yr,mt:Le,mc:m,pc:pe,pbc:A,n:sn,o:n};return{render:Zr,hydrate:void 0,createApp:Fm(Zr)}}function Yo({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function Kn({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function Wm(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function Hf(n,e,t=!1){const r=n.children,s=e.children;if(re(r)&&re(s))for(let i=0;i<r.length;i++){const a=r[i];let c=s[i];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=s[i]=pn(s[i]),c.el=a.el),!t&&c.patchFlag!==-2&&Hf(a,c)),c.type===po&&c.patchFlag!==-1&&(c.el=a.el),c.type===Dn&&!c.el&&(c.el=a.el)}}function Qm(n){const e=n.slice(),t=[0];let r,s,i,a,c;const u=n.length;for(r=0;r<u;r++){const f=n[r];if(f!==0){if(s=t[t.length-1],n[s]<f){e[r]=s,t.push(r);continue}for(i=0,a=t.length-1;i<a;)c=i+a>>1,n[t[c]]<f?i=c+1:a=c;f<n[t[i]]&&(i>0&&(e[r]=t[i-1]),t[i]=r)}}for(i=t.length,a=t[i-1];i-- >0;)t[i]=a,a=e[a];return t}function zf(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:zf(e)}function su(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const Jm=Symbol.for("v-scx"),Ym=()=>bi(Jm);function Xo(n,e,t){return Kf(n,e,t)}function Kf(n,e,t=Te){const{immediate:r,deep:s,flush:i,once:a}=t,c=it({},t),u=e&&r||!e&&i!=="post";let f;if(Us){if(i==="sync"){const R=Ym();f=R.__watcherHandles||(R.__watcherHandles=[])}else if(!u){const R=()=>{};return R.stop=kt,R.resume=kt,R.pause=kt,R}}const d=rt;c.call=(R,L,B)=>Ft(R,d,L,B);let g=!1;i==="post"?c.scheduler=R=>{ft(R,d&&d.suspense)}:i!=="sync"&&(g=!0,c.scheduler=(R,L)=>{L?R():yc(R)}),c.augmentJob=R=>{e&&(R.flags|=4),g&&(R.flags|=2,d&&(R.id=d.uid,R.i=d))};const T=um(n,e,c);return Us&&(f?f.push(T):u&&T()),T}function Xm(n,e,t){const r=this.proxy,s=Me(n)?n.includes(".")?Gf(r,n):()=>r[n]:n.bind(r,r);let i;se(e)?i=e:(i=e.handler,t=e);const a=Gs(this),c=Kf(s,i.bind(r),t);return a(),c}function Gf(n,e){const t=e.split(".");return()=>{let r=n;for(let s=0;s<t.length&&r;s++)r=r[t[s]];return r}}const Zm=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${Pn(e)}Modifiers`]||n[`${ir(e)}Modifiers`];function e_(n,e,...t){if(n.isUnmounted)return;const r=n.vnode.props||Te;let s=t;const i=e.startsWith("update:"),a=i&&Zm(r,e.slice(7));a&&(a.trim&&(s=t.map(d=>Me(d)?d.trim():d)),a.number&&(s=t.map(ac)));let c,u=r[c=zo(e)]||r[c=zo(Pn(e))];!u&&i&&(u=r[c=zo(ir(e))]),u&&Ft(u,n,6,s);const f=r[c+"Once"];if(f){if(!n.emitted)n.emitted={};else if(n.emitted[c])return;n.emitted[c]=!0,Ft(f,n,6,s)}}const t_=new WeakMap;function Wf(n,e,t=!1){const r=t?t_:e.emitsCache,s=r.get(n);if(s!==void 0)return s;const i=n.emits;let a={},c=!1;if(!se(n)){const u=f=>{const d=Wf(f,e,!0);d&&(c=!0,it(a,d))};!t&&e.mixins.length&&e.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}return!i&&!c?(Se(n)&&r.set(n,null),null):(re(i)?i.forEach(u=>a[u]=null):it(a,i),Se(n)&&r.set(n,a),a)}function fo(n,e){return!n||!io(e)?!1:(e=e.slice(2).replace(/Once$/,""),me(n,e[0].toLowerCase()+e.slice(1))||me(n,ir(e))||me(n,e))}function iu(n){const{type:e,vnode:t,proxy:r,withProxy:s,propsOptions:[i],slots:a,attrs:c,emit:u,render:f,renderCache:d,props:g,data:T,setupState:R,ctx:L,inheritAttrs:B}=n,j=Ui(n);let K,Q;try{if(t.shapeFlag&4){const z=s||r,le=z;K=Pt(f.call(le,z,d,g,R,T,L)),Q=c}else{const z=e;K=Pt(z.length>1?z(g,{attrs:c,slots:a,emit:u}):z(g,null)),Q=e.props?c:n_(c)}}catch(z){Cs.length=0,uo(z,n,1),K=Ot(Dn)}let X=K;if(Q&&B!==!1){const z=Object.keys(Q),{shapeFlag:le}=X;z.length&&le&7&&(i&&z.some(sc)&&(Q=r_(Q,i)),X=xr(X,Q,!1,!0))}return t.dirs&&(X=xr(X,null,!1,!0),X.dirs=X.dirs?X.dirs.concat(t.dirs):t.dirs),t.transition&&Ec(X,t.transition),K=X,Ui(j),K}const n_=n=>{let e;for(const t in n)(t==="class"||t==="style"||io(t))&&((e||(e={}))[t]=n[t]);return e},r_=(n,e)=>{const t={};for(const r in n)(!sc(r)||!(r.slice(9)in e))&&(t[r]=n[r]);return t};function s_(n,e,t){const{props:r,children:s,component:i}=n,{props:a,children:c,patchFlag:u}=e,f=i.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&u>=0){if(u&1024)return!0;if(u&16)return r?ou(r,a,f):!!a;if(u&8){const d=e.dynamicProps;for(let g=0;g<d.length;g++){const T=d[g];if(a[T]!==r[T]&&!fo(f,T))return!0}}}else return(s||c)&&(!c||!c.$stable)?!0:r===a?!1:r?a?ou(r,a,f):!0:!!a;return!1}function ou(n,e,t){const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==n[i]&&!fo(t,i))return!0}return!1}function i_({vnode:n,parent:e},t){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===n&&(r.el=n.el),r===n)(n=e.vnode).el=t,e=e.parent;else break}}const Qf=n=>n.__isSuspense;function o_(n,e){e&&e.pendingBranch?re(n)?e.effects.push(...n):e.effects.push(n):pm(n)}const Ht=Symbol.for("v-fgt"),po=Symbol.for("v-txt"),Dn=Symbol.for("v-cmt"),Zo=Symbol.for("v-stc"),Cs=[];let dt=null;function Qt(n=!1){Cs.push(dt=n?null:[])}function a_(){Cs.pop(),dt=Cs[Cs.length-1]||null}let Fs=1;function au(n,e=!1){Fs+=n,n<0&&dt&&e&&(dt.hasOnce=!0)}function Jf(n){return n.dynamicChildren=Fs>0?dt||Ir:null,a_(),Fs>0&&dt&&dt.push(n),n}function Sr(n,e,t,r,s,i){return Jf(yt(n,e,t,r,s,i,!0))}function Ra(n,e,t,r,s){return Jf(Ot(n,e,t,r,s,!0))}function Yf(n){return n?n.__v_isVNode===!0:!1}function ms(n,e){return n.type===e.type&&n.key===e.key}const Xf=({key:n})=>n??null,Si=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?Me(n)||Ye(n)||se(n)?{i:gt,r:n,k:e,f:!!t}:n:null);function yt(n,e=null,t=null,r=0,s=null,i=n===Ht?0:1,a=!1,c=!1){const u={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&Xf(e),ref:e&&Si(e),scopeId:Cf,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:gt};return c?(wc(u,t),i&128&&n.normalize(u)):t&&(u.shapeFlag|=Me(t)?8:16),Fs>0&&!a&&dt&&(u.patchFlag>0||i&6)&&u.patchFlag!==32&&dt.push(u),u}const Ot=c_;function c_(n,e=null,t=null,r=0,s=null,i=!1){if((!n||n===Dm)&&(n=Dn),Yf(n)){const c=xr(n,e,!0);return t&&wc(c,t),Fs>0&&!i&&dt&&(c.shapeFlag&6?dt[dt.indexOf(n)]=c:dt.push(c)),c.patchFlag=-2,c}if(T_(n)&&(n=n.__vccOpts),e){e=l_(e);let{class:c,style:u}=e;c&&!Me(c)&&(e.class=lo(c)),Se(u)&&(_c(u)&&!re(u)&&(u=it({},u)),e.style=cc(u))}const a=Me(n)?1:Qf(n)?128:_m(n)?64:Se(n)?4:se(n)?2:0;return yt(n,e,t,r,s,a,i,!0)}function l_(n){return n?_c(n)||Ff(n)?it({},n):n:null}function xr(n,e,t=!1,r=!1){const{props:s,ref:i,patchFlag:a,children:c,transition:u}=n,f=e?h_(s||{},e):s,d={__v_isVNode:!0,__v_skip:!0,type:n.type,props:f,key:f&&Xf(f),ref:e&&e.ref?t&&i?re(i)?i.concat(Si(e)):[i,Si(e)]:Si(e):i,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:c,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Ht?a===-1?16:a|16:a,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:u,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&xr(n.ssContent),ssFallback:n.ssFallback&&xr(n.ssFallback),placeholder:n.placeholder,el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return u&&r&&Ec(d,u.clone(d)),d}function u_(n=" ",e=0){return Ot(po,null,n,e)}function $i(n="",e=!1){return e?(Qt(),Ra(Dn,null,n)):Ot(Dn,null,n)}function Pt(n){return n==null||typeof n=="boolean"?Ot(Dn):re(n)?Ot(Ht,null,n.slice()):Yf(n)?pn(n):Ot(po,null,String(n))}function pn(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:xr(n)}function wc(n,e){let t=0;const{shapeFlag:r}=n;if(e==null)e=null;else if(re(e))t=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),wc(n,s()),s._c&&(s._d=!0));return}else{t=32;const s=e._;!s&&!Ff(e)?e._ctx=gt:s===3&&gt&&(gt.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else se(e)?(e={default:e,_ctx:gt},t=32):(e=String(e),r&64?(t=16,e=[u_(e)]):t=8);n.children=e,n.shapeFlag|=t}function h_(...n){const e={};for(let t=0;t<n.length;t++){const r=n[t];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=lo([e.class,r.class]));else if(s==="style")e.style=cc([e.style,r.style]);else if(io(s)){const i=e[s],a=r[s];a&&i!==a&&!(re(i)&&i.includes(a))&&(e[s]=i?[].concat(i,a):a)}else s!==""&&(e[s]=r[s])}return e}function St(n,e,t,r=null){Ft(n,e,7,[t,r])}const f_=xf();let d_=0;function p_(n,e,t){const r=n.type,s=(e?e.appContext:n.appContext)||f_,i={uid:d_++,vnode:n,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new xg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Bf(r,s),emitsOptions:Wf(r,s),emit:null,emitted:null,propsDefaults:Te,inheritAttrs:r.inheritAttrs,ctx:Te,data:Te,props:Te,attrs:Te,slots:Te,refs:Te,setupState:Te,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=e_.bind(null,i),n.ce&&n.ce(i),i}let rt=null;const g_=()=>rt||gt;let qi,Ca;{const n=co(),e=(t,r)=>{let s;return(s=n[t])||(s=n[t]=[]),s.push(r),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};qi=e("__VUE_INSTANCE_SETTERS__",t=>rt=t),Ca=e("__VUE_SSR_SETTERS__",t=>Us=t)}const Gs=n=>{const e=rt;return qi(n),n.scope.on(),()=>{n.scope.off(),qi(e)}},cu=()=>{rt&&rt.scope.off(),qi(null)};function Zf(n){return n.vnode.shapeFlag&4}let Us=!1;function m_(n,e=!1,t=!1){e&&Ca(e);const{props:r,children:s}=n.vnode,i=Zf(n);Bm(n,r,i,e),Hm(n,s,t||e);const a=i?__(n,e):void 0;return e&&Ca(!1),a}function __(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,Nm);const{setup:r}=t;if(r){Jt();const s=n.setupContext=r.length>1?E_(n):null,i=Gs(n),a=Ks(r,n,0,[n.props,s]),c=ef(a);if(Yt(),i(),(c||n.sp)&&!Ss(n)&&Pf(n),c){if(a.then(cu,cu),e)return a.then(u=>{lu(n,u)}).catch(u=>{uo(u,n,0)});n.asyncDep=a}else lu(n,a)}else ed(n)}function lu(n,e,t){se(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Se(e)&&(n.setupState=wf(e)),ed(n)}function ed(n,e,t){const r=n.type;n.render||(n.render=r.render||kt);{const s=Gs(n);Jt();try{Vm(n)}finally{Yt(),s()}}}const y_={get(n,e){return Qe(n,"get",""),n[e]}};function E_(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,y_),slots:n.slots,emit:n.emit,expose:e}}function go(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(wf(nm(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in Rs)return Rs[t](n)},has(e,t){return t in e||t in Rs}})):n.proxy}function T_(n){return se(n)&&"__vccOpts"in n}const v_=(n,e)=>cm(n,e,Us),I_="3.5.24";let Pa;const uu=typeof window<"u"&&window.trustedTypes;if(uu)try{Pa=uu.createPolicy("vue",{createHTML:n=>n})}catch{}const td=Pa?n=>Pa.createHTML(n):n=>n,w_="http://www.w3.org/2000/svg",A_="http://www.w3.org/1998/Math/MathML",qt=typeof document<"u"?document:null,hu=qt&&qt.createElement("template"),b_={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,r)=>{const s=e==="svg"?qt.createElementNS(w_,n):e==="mathml"?qt.createElementNS(A_,n):t?qt.createElement(n,{is:t}):qt.createElement(n);return n==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:n=>qt.createTextNode(n),createComment:n=>qt.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>qt.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,r,s,i){const a=t?t.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),t),!(s===i||!(s=s.nextSibling)););else{hu.innerHTML=td(r==="svg"?`<svg>${n}</svg>`:r==="mathml"?`<math>${n}</math>`:n);const c=hu.content;if(r==="svg"||r==="mathml"){const u=c.firstChild;for(;u.firstChild;)c.appendChild(u.firstChild);c.removeChild(u)}e.insertBefore(c,t)}return[a?a.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},S_=Symbol("_vtc");function R_(n,e,t){const r=n[S_];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const fu=Symbol("_vod"),C_=Symbol("_vsh"),P_=Symbol(""),D_=/(?:^|;)\s*display\s*:/;function N_(n,e,t){const r=n.style,s=Me(t);let i=!1;if(t&&!s){if(e)if(Me(e))for(const a of e.split(";")){const c=a.slice(0,a.indexOf(":")).trim();t[c]==null&&Ri(r,c,"")}else for(const a in e)t[a]==null&&Ri(r,a,"");for(const a in t)a==="display"&&(i=!0),Ri(r,a,t[a])}else if(s){if(e!==t){const a=r[P_];a&&(t+=";"+a),r.cssText=t,i=D_.test(t)}}else e&&n.removeAttribute("style");fu in n&&(n[fu]=i?r.display:"",n[C_]&&(r.display="none"))}const du=/\s*!important$/;function Ri(n,e,t){if(re(t))t.forEach(r=>Ri(n,e,r));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const r=V_(n,e);du.test(t)?n.setProperty(ir(r),t.replace(du,""),"important"):n[r]=t}}const pu=["Webkit","Moz","ms"],ea={};function V_(n,e){const t=ea[e];if(t)return t;let r=Pn(e);if(r!=="filter"&&r in n)return ea[e]=r;r=rf(r);for(let s=0;s<pu.length;s++){const i=pu[s]+r;if(i in n)return ea[e]=i}return e}const gu="http://www.w3.org/1999/xlink";function mu(n,e,t,r,s,i=Og(e)){r&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(gu,e.slice(6,e.length)):n.setAttributeNS(gu,e,t):t==null||i&&!of(t)?n.removeAttribute(e):n.setAttribute(e,i?"":Ln(t)?String(t):t)}function _u(n,e,t,r,s){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?td(t):t);return}const i=n.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const c=i==="OPTION"?n.getAttribute("value")||"":n.value,u=t==null?n.type==="checkbox"?"on":"":String(t);(c!==u||!("_value"in n))&&(n.value=u),t==null&&n.removeAttribute(e),n._value=t;return}let a=!1;if(t===""||t==null){const c=typeof n[e];c==="boolean"?t=of(t):t==null&&c==="string"?(t="",a=!0):c==="number"&&(t=0,a=!0)}try{n[e]=t}catch{}a&&n.removeAttribute(s||e)}function mr(n,e,t,r){n.addEventListener(e,t,r)}function k_(n,e,t,r){n.removeEventListener(e,t,r)}const yu=Symbol("_vei");function O_(n,e,t,r,s=null){const i=n[yu]||(n[yu]={}),a=i[e];if(r&&a)a.value=r;else{const[c,u]=x_(e);if(r){const f=i[e]=F_(r,s);mr(n,c,f,u)}else a&&(k_(n,c,a,u),i[e]=void 0)}}const Eu=/(?:Once|Passive|Capture)$/;function x_(n){let e;if(Eu.test(n)){e={};let r;for(;r=n.match(Eu);)n=n.slice(0,n.length-r[0].length),e[r[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):ir(n.slice(2)),e]}let ta=0;const M_=Promise.resolve(),L_=()=>ta||(M_.then(()=>ta=0),ta=Date.now());function F_(n,e){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;Ft(U_(r,t.value),e,5,[r])};return t.value=n,t.attached=L_(),t}function U_(n,e){if(re(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const Tu=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,B_=(n,e,t,r,s,i)=>{const a=s==="svg";e==="class"?R_(n,r,a):e==="style"?N_(n,t,r):io(e)?sc(e)||O_(n,e,t,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):j_(n,e,r,a))?(_u(n,e,r),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&mu(n,e,r,a,i,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!Me(r))?_u(n,Pn(e),r,i,e):(e==="true-value"?n._trueValue=r:e==="false-value"&&(n._falseValue=r),mu(n,e,r,a))};function j_(n,e,t,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in n&&Tu(e)&&se(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&n.tagName==="IFRAME"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=n.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Tu(e)&&Me(t)?!1:e in n}const vu=n=>{const e=n.props["onUpdate:modelValue"]||!1;return re(e)?t=>Ai(e,t):e};function $_(n){n.target.composing=!0}function Iu(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const na=Symbol("_assign");function wu(n,e,t){return e&&(n=n.trim()),t&&(n=ac(n)),n}const Au={created(n,{modifiers:{lazy:e,trim:t,number:r}},s){n[na]=vu(s);const i=r||s.props&&s.props.type==="number";mr(n,e?"change":"input",a=>{a.target.composing||n[na](wu(n.value,t,i))}),(t||i)&&mr(n,"change",()=>{n.value=wu(n.value,t,i)}),e||(mr(n,"compositionstart",$_),mr(n,"compositionend",Iu),mr(n,"change",Iu))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:r,trim:s,number:i}},a){if(n[na]=vu(a),n.composing)return;const c=(i||n.type==="number")&&!/^0\d/.test(n.value)?ac(n.value):n.value,u=e??"";c!==u&&(document.activeElement===n&&n.type!=="range"&&(r&&e===t||s&&n.value.trim()===u)||(n.value=u))}},q_=it({patchProp:B_},b_);let bu;function H_(){return bu||(bu=Km(q_))}const z_=((...n)=>{const e=H_().createApp(...n),{mount:t}=e;return e.mount=r=>{const s=G_(r);if(!s)return;const i=e._component;!se(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=t(s,!1,K_(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},e});function K_(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function G_(n){return Me(n)?document.querySelector(n):n}const W_="/FU-Press-Start/assets/FU-logo-C9Kp3nID.png",Ac=(n,e)=>{const t=n.__vccOpts||n;for(const[r,s]of e)t[r]=s;return t},Q_=["disabled"],J_={key:0,class:"blur"},Y_={key:1,class:"line"},Su="Aperte Start",X_={__name:"startButton",setup(n){const e=En("");En(0);const t=En(!0);return Tc(()=>{let r=0;const s=setInterval(()=>{e.value+=Su.charAt(r),r++,r>=Su.length&&(clearInterval(s),t.value=!1)},200)}),(r,s)=>(Qt(),Sr("button",{onClick:s[0]||(s[0]=i=>r.$emit("start")),class:lo(["primary",[{"primary-hover":!t.value}]]),disabled:t.value},[t.value?$i("",!0):(Qt(),Sr("h1",J_,ma(e.value),1)),yt("h1",null,ma(e.value),1),t.value?(Qt(),Sr("h1",Y_,"_")):$i("",!0)],10,Q_))}},Z_=Ac(X_,[["__scopeId","data-v-41457492"]]),ey={class:"content"},ty={__name:"startScreen",emits:["start"],setup(n,{emit:e}){const t=e;return(r,s)=>(Qt(),Sr("div",ey,[s[1]||(s[1]=yt("img",{src:W_,alt:"Fbula ltima"},null,-1)),s[2]||(s[2]=yt("p",null,"Aqui comea a sua histria.",-1)),Ot(Z_,{onStart:s[0]||(s[0]=i=>t("start"))})]))}},ny=Ac(ty,[["__scopeId","data-v-2ada6809"]]),ry=()=>{};var Ru={};const nd=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},sy=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=n[t++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=n[t++],a=n[t++],c=n[t++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=n[t++],a=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},rd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const i=n[s],a=s+1<n.length,c=a?n[s+1]:0,u=s+2<n.length,f=u?n[s+2]:0,d=i>>2,g=(i&3)<<4|c>>4;let T=(c&15)<<2|f>>6,R=f&63;u||(R=64,a||(T=64)),r.push(t[d],t[g],t[T],t[R])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(nd(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):sy(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const i=t[n.charAt(s++)],c=s<n.length?t[n.charAt(s)]:0;++s;const f=s<n.length?t[n.charAt(s)]:64;++s;const g=s<n.length?t[n.charAt(s)]:64;if(++s,i==null||c==null||f==null||g==null)throw new iy;const T=i<<2|c>>4;if(r.push(T),f!==64){const R=c<<4&240|f>>2;if(r.push(R),g!==64){const L=f<<6&192|g;r.push(L)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class iy extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oy=function(n){const e=nd(n);return rd.encodeByteArray(e,!0)},Hi=function(n){return oy(n).replace(/\./g,"")},sd=function(n){try{return rd.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ay(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const cy=()=>ay().__FIREBASE_DEFAULTS__,ly=()=>{if(typeof process>"u"||typeof Ru>"u")return;const n=Ru.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},uy=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&sd(n[1]);return e&&JSON.parse(e)},mo=()=>{try{return ry()||cy()||ly()||uy()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},id=n=>mo()?.emulatorHosts?.[n],hy=n=>{const e=id(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},od=()=>mo()?.config,ad=n=>mo()?.[`_${n}`];class fy{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function zr(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function cd(n){return(await fetch(n,{credentials:"include"})).ok}function dy(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,i=n.sub||n.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Hi(JSON.stringify(t)),Hi(JSON.stringify(a)),""].join(".")}const Ps={};function py(){const n={prod:[],emulator:[]};for(const e of Object.keys(Ps))Ps[e]?n.emulator.push(e):n.prod.push(e);return n}function gy(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Cu=!1;function ld(n,e){if(typeof window>"u"||typeof document>"u"||!zr(window.location.host)||Ps[n]===e||Ps[n]||Cu)return;Ps[n]=e;function t(T){return`__firebase__banner__${T}`}const r="__firebase__banner",i=py().prod.length>0;function a(){const T=document.getElementById(r);T&&T.remove()}function c(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function u(T,R){T.setAttribute("width","24"),T.setAttribute("id",R),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function f(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Cu=!0,a()},T}function d(T,R){T.setAttribute("id",R),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function g(){const T=gy(r),R=t("text"),L=document.getElementById(R)||document.createElement("span"),B=t("learnmore"),j=document.getElementById(B)||document.createElement("a"),K=t("preprendIcon"),Q=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const X=T.element;c(X),d(j,B);const z=f();u(Q,K),X.append(Q,L,j,z),document.body.appendChild(X)}i?(L.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function Xe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function my(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())}function _y(){const n=mo()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yy(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ey(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Ty(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vy(){const n=Xe();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Iy(){return!_y()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wy(){try{return typeof indexedDB=="object"}catch{return!1}}function Ay(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}const by="FirebaseError";class rn extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=by,Object.setPrototypeOf(this,rn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ws.prototype.create)}}class Ws{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?Sy(i,r):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new rn(s,c,r)}}function Sy(n,e){return n.replace(Ry,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Ry=/\{\$([^}]+)}/g;function Cy(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function tr(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const i=n[s],a=e[s];if(Pu(i)&&Pu(a)){if(!tr(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function Pu(n){return n!==null&&typeof n=="object"}function Qs(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Py(n,e){const t=new Dy(n,e);return t.subscribe.bind(t)}class Dy{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Ny(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=ra),s.error===void 0&&(s.error=ra),s.complete===void 0&&(s.complete=ra);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ny(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ra(){}function or(n){return n&&n._delegate?n._delegate:n}class nr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Wn="[DEFAULT]";class Vy{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new fy;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Oy(e))try{this.getOrInitializeService({instanceIdentifier:Wn})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Wn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Wn){return this.instances.has(e)}getOptions(e=Wn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[i,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&a.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ky(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Wn){return this.component?this.component.multipleInstances?e:Wn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ky(n){return n===Wn?void 0:n}function Oy(n){return n.instantiationMode==="EAGER"}class xy{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Vy(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var ae;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ae||(ae={}));const My={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},Ly=ae.INFO,Fy={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},Uy=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=Fy[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bc{constructor(e){this.name=e,this._logLevel=Ly,this._logHandler=Uy,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?My[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const By=(n,e)=>e.some(t=>n instanceof t);let Du,Nu;function jy(){return Du||(Du=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $y(){return Nu||(Nu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ud=new WeakMap,Da=new WeakMap,hd=new WeakMap,sa=new WeakMap,Sc=new WeakMap;function qy(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",i),n.removeEventListener("error",a)},i=()=>{t(wn(n.result)),s()},a=()=>{r(n.error),s()};n.addEventListener("success",i),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&ud.set(t,n)}).catch(()=>{}),Sc.set(e,n),e}function Hy(n){if(Da.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",a),n.removeEventListener("abort",a)},i=()=>{t(),s()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",i),n.addEventListener("error",a),n.addEventListener("abort",a)});Da.set(n,e)}let Na={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Da.get(n);if(e==="objectStoreNames")return n.objectStoreNames||hd.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return wn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function zy(n){Na=n(Na)}function Ky(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(ia(this),e,...t);return hd.set(r,e.sort?e.sort():[e]),wn(r)}:$y().includes(n)?function(...e){return n.apply(ia(this),e),wn(ud.get(this))}:function(...e){return wn(n.apply(ia(this),e))}}function Gy(n){return typeof n=="function"?Ky(n):(n instanceof IDBTransaction&&Hy(n),By(n,jy())?new Proxy(n,Na):n)}function wn(n){if(n instanceof IDBRequest)return qy(n);if(sa.has(n))return sa.get(n);const e=Gy(n);return e!==n&&(sa.set(n,e),Sc.set(e,n)),e}const ia=n=>Sc.get(n);function Wy(n,e,{blocked:t,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(n,e),c=wn(a);return r&&a.addEventListener("upgradeneeded",u=>{r(wn(a.result),u.oldVersion,u.newVersion,wn(a.transaction),u)}),t&&a.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const Qy=["get","getKey","getAll","getAllKeys","count"],Jy=["put","add","delete","clear"],oa=new Map;function Vu(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(oa.get(e))return oa.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=Jy.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Qy.includes(t)))return;const i=async function(a,...c){const u=this.transaction(a,s?"readwrite":"readonly");let f=u.store;return r&&(f=f.index(c.shift())),(await Promise.all([f[t](...c),s&&u.done]))[0]};return oa.set(e,i),i}zy(n=>({...n,get:(e,t,r)=>Vu(e,t)||n.get(e,t,r),has:(e,t)=>!!Vu(e,t)||n.has(e,t)}));class Yy{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Xy(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Xy(n){return n.getComponent()?.type==="VERSION"}const Va="@firebase/app",ku="0.14.6";const Xt=new bc("@firebase/app"),Zy="@firebase/app-compat",eE="@firebase/analytics-compat",tE="@firebase/analytics",nE="@firebase/app-check-compat",rE="@firebase/app-check",sE="@firebase/auth",iE="@firebase/auth-compat",oE="@firebase/database",aE="@firebase/data-connect",cE="@firebase/database-compat",lE="@firebase/functions",uE="@firebase/functions-compat",hE="@firebase/installations",fE="@firebase/installations-compat",dE="@firebase/messaging",pE="@firebase/messaging-compat",gE="@firebase/performance",mE="@firebase/performance-compat",_E="@firebase/remote-config",yE="@firebase/remote-config-compat",EE="@firebase/storage",TE="@firebase/storage-compat",vE="@firebase/firestore",IE="@firebase/ai",wE="@firebase/firestore-compat",AE="firebase",bE="12.6.0";const ka="[DEFAULT]",SE={[Va]:"fire-core",[Zy]:"fire-core-compat",[tE]:"fire-analytics",[eE]:"fire-analytics-compat",[rE]:"fire-app-check",[nE]:"fire-app-check-compat",[sE]:"fire-auth",[iE]:"fire-auth-compat",[oE]:"fire-rtdb",[aE]:"fire-data-connect",[cE]:"fire-rtdb-compat",[lE]:"fire-fn",[uE]:"fire-fn-compat",[hE]:"fire-iid",[fE]:"fire-iid-compat",[dE]:"fire-fcm",[pE]:"fire-fcm-compat",[gE]:"fire-perf",[mE]:"fire-perf-compat",[_E]:"fire-rc",[yE]:"fire-rc-compat",[EE]:"fire-gcs",[TE]:"fire-gcs-compat",[vE]:"fire-fst",[wE]:"fire-fst-compat",[IE]:"fire-vertex","fire-js":"fire-js",[AE]:"fire-js-all"};const zi=new Map,RE=new Map,Oa=new Map;function Ou(n,e){try{n.container.addComponent(e)}catch(t){Xt.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Mr(n){const e=n.name;if(Oa.has(e))return Xt.debug(`There were multiple attempts to register component ${e}.`),!1;Oa.set(e,n);for(const t of zi.values())Ou(t,n);for(const t of RE.values())Ou(t,n);return!0}function Rc(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Dt(n){return n==null?!1:n.settings!==void 0}const CE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},An=new Ws("app","Firebase",CE);class PE{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new nr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw An.create("app-deleted",{appName:this._name})}}const Kr=bE;function fd(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:ka,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw An.create("bad-app-name",{appName:String(s)});if(t||(t=od()),!t)throw An.create("no-options");const i=zi.get(s);if(i){if(tr(t,i.options)&&tr(r,i.config))return i;throw An.create("duplicate-app",{appName:s})}const a=new xy(s);for(const u of Oa.values())a.addComponent(u);const c=new PE(t,r,a);return zi.set(s,c),c}function dd(n=ka){const e=zi.get(n);if(!e&&n===ka&&od())return fd();if(!e)throw An.create("no-app",{appName:n});return e}function bn(n,e,t){let r=SE[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xt.warn(a.join(" "));return}Mr(new nr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const DE="firebase-heartbeat-database",NE=1,Bs="firebase-heartbeat-store";let aa=null;function pd(){return aa||(aa=Wy(DE,NE,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Bs)}catch(t){console.warn(t)}}}}).catch(n=>{throw An.create("idb-open",{originalErrorMessage:n.message})})),aa}async function VE(n){try{const t=(await pd()).transaction(Bs),r=await t.objectStore(Bs).get(gd(n));return await t.done,r}catch(e){if(e instanceof rn)Xt.warn(e.message);else{const t=An.create("idb-get",{originalErrorMessage:e?.message});Xt.warn(t.message)}}}async function xu(n,e){try{const r=(await pd()).transaction(Bs,"readwrite");await r.objectStore(Bs).put(e,gd(n)),await r.done}catch(t){if(t instanceof rn)Xt.warn(t.message);else{const r=An.create("idb-set",{originalErrorMessage:t?.message});Xt.warn(r.message)}}}function gd(n){return`${n.name}!${n.options.appId}`}const kE=1024,OE=30;class xE{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new LE(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Mu();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>OE){const s=FE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Xt.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Mu(),{heartbeatsToSend:t,unsentEntries:r}=ME(this._heartbeatsCache.heartbeats),s=Hi(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Xt.warn(e),""}}}function Mu(){return new Date().toISOString().substring(0,10)}function ME(n,e=kE){const t=[];let r=n.slice();for(const s of n){const i=t.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),Lu(t)>e){i.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Lu(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class LE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wy()?Ay().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await VE(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return xu(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return xu(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Lu(n){return Hi(JSON.stringify({version:2,heartbeats:n})).length}function FE(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function UE(n){Mr(new nr("platform-logger",e=>new Yy(e),"PRIVATE")),Mr(new nr("heartbeat",e=>new xE(e),"PRIVATE")),bn(Va,ku,n),bn(Va,ku,"esm2020"),bn("fire-js","")}UE("");var BE="firebase",jE="12.6.0";bn(BE,jE,"app");var Fu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Sn,md;(function(){var n;function e(I,m){function E(){}E.prototype=m.prototype,I.F=m.prototype,I.prototype=new E,I.prototype.constructor=I,I.D=function(A,v,b){for(var y=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)y[Le-2]=arguments[Le];return m.prototype[v].apply(A,y)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,m,E){E||(E=0);const A=Array(16);if(typeof m=="string")for(var v=0;v<16;++v)A[v]=m.charCodeAt(E++)|m.charCodeAt(E++)<<8|m.charCodeAt(E++)<<16|m.charCodeAt(E++)<<24;else for(v=0;v<16;++v)A[v]=m[E++]|m[E++]<<8|m[E++]<<16|m[E++]<<24;m=I.g[0],E=I.g[1],v=I.g[2];let b=I.g[3],y;y=m+(b^E&(v^b))+A[0]+3614090360&4294967295,m=E+(y<<7&4294967295|y>>>25),y=b+(v^m&(E^v))+A[1]+3905402710&4294967295,b=m+(y<<12&4294967295|y>>>20),y=v+(E^b&(m^E))+A[2]+606105819&4294967295,v=b+(y<<17&4294967295|y>>>15),y=E+(m^v&(b^m))+A[3]+3250441966&4294967295,E=v+(y<<22&4294967295|y>>>10),y=m+(b^E&(v^b))+A[4]+4118548399&4294967295,m=E+(y<<7&4294967295|y>>>25),y=b+(v^m&(E^v))+A[5]+1200080426&4294967295,b=m+(y<<12&4294967295|y>>>20),y=v+(E^b&(m^E))+A[6]+2821735955&4294967295,v=b+(y<<17&4294967295|y>>>15),y=E+(m^v&(b^m))+A[7]+4249261313&4294967295,E=v+(y<<22&4294967295|y>>>10),y=m+(b^E&(v^b))+A[8]+1770035416&4294967295,m=E+(y<<7&4294967295|y>>>25),y=b+(v^m&(E^v))+A[9]+2336552879&4294967295,b=m+(y<<12&4294967295|y>>>20),y=v+(E^b&(m^E))+A[10]+4294925233&4294967295,v=b+(y<<17&4294967295|y>>>15),y=E+(m^v&(b^m))+A[11]+2304563134&4294967295,E=v+(y<<22&4294967295|y>>>10),y=m+(b^E&(v^b))+A[12]+1804603682&4294967295,m=E+(y<<7&4294967295|y>>>25),y=b+(v^m&(E^v))+A[13]+4254626195&4294967295,b=m+(y<<12&4294967295|y>>>20),y=v+(E^b&(m^E))+A[14]+2792965006&4294967295,v=b+(y<<17&4294967295|y>>>15),y=E+(m^v&(b^m))+A[15]+1236535329&4294967295,E=v+(y<<22&4294967295|y>>>10),y=m+(v^b&(E^v))+A[1]+4129170786&4294967295,m=E+(y<<5&4294967295|y>>>27),y=b+(E^v&(m^E))+A[6]+3225465664&4294967295,b=m+(y<<9&4294967295|y>>>23),y=v+(m^E&(b^m))+A[11]+643717713&4294967295,v=b+(y<<14&4294967295|y>>>18),y=E+(b^m&(v^b))+A[0]+3921069994&4294967295,E=v+(y<<20&4294967295|y>>>12),y=m+(v^b&(E^v))+A[5]+3593408605&4294967295,m=E+(y<<5&4294967295|y>>>27),y=b+(E^v&(m^E))+A[10]+38016083&4294967295,b=m+(y<<9&4294967295|y>>>23),y=v+(m^E&(b^m))+A[15]+3634488961&4294967295,v=b+(y<<14&4294967295|y>>>18),y=E+(b^m&(v^b))+A[4]+3889429448&4294967295,E=v+(y<<20&4294967295|y>>>12),y=m+(v^b&(E^v))+A[9]+568446438&4294967295,m=E+(y<<5&4294967295|y>>>27),y=b+(E^v&(m^E))+A[14]+3275163606&4294967295,b=m+(y<<9&4294967295|y>>>23),y=v+(m^E&(b^m))+A[3]+4107603335&4294967295,v=b+(y<<14&4294967295|y>>>18),y=E+(b^m&(v^b))+A[8]+1163531501&4294967295,E=v+(y<<20&4294967295|y>>>12),y=m+(v^b&(E^v))+A[13]+2850285829&4294967295,m=E+(y<<5&4294967295|y>>>27),y=b+(E^v&(m^E))+A[2]+4243563512&4294967295,b=m+(y<<9&4294967295|y>>>23),y=v+(m^E&(b^m))+A[7]+1735328473&4294967295,v=b+(y<<14&4294967295|y>>>18),y=E+(b^m&(v^b))+A[12]+2368359562&4294967295,E=v+(y<<20&4294967295|y>>>12),y=m+(E^v^b)+A[5]+4294588738&4294967295,m=E+(y<<4&4294967295|y>>>28),y=b+(m^E^v)+A[8]+2272392833&4294967295,b=m+(y<<11&4294967295|y>>>21),y=v+(b^m^E)+A[11]+1839030562&4294967295,v=b+(y<<16&4294967295|y>>>16),y=E+(v^b^m)+A[14]+4259657740&4294967295,E=v+(y<<23&4294967295|y>>>9),y=m+(E^v^b)+A[1]+2763975236&4294967295,m=E+(y<<4&4294967295|y>>>28),y=b+(m^E^v)+A[4]+1272893353&4294967295,b=m+(y<<11&4294967295|y>>>21),y=v+(b^m^E)+A[7]+4139469664&4294967295,v=b+(y<<16&4294967295|y>>>16),y=E+(v^b^m)+A[10]+3200236656&4294967295,E=v+(y<<23&4294967295|y>>>9),y=m+(E^v^b)+A[13]+681279174&4294967295,m=E+(y<<4&4294967295|y>>>28),y=b+(m^E^v)+A[0]+3936430074&4294967295,b=m+(y<<11&4294967295|y>>>21),y=v+(b^m^E)+A[3]+3572445317&4294967295,v=b+(y<<16&4294967295|y>>>16),y=E+(v^b^m)+A[6]+76029189&4294967295,E=v+(y<<23&4294967295|y>>>9),y=m+(E^v^b)+A[9]+3654602809&4294967295,m=E+(y<<4&4294967295|y>>>28),y=b+(m^E^v)+A[12]+3873151461&4294967295,b=m+(y<<11&4294967295|y>>>21),y=v+(b^m^E)+A[15]+530742520&4294967295,v=b+(y<<16&4294967295|y>>>16),y=E+(v^b^m)+A[2]+3299628645&4294967295,E=v+(y<<23&4294967295|y>>>9),y=m+(v^(E|~b))+A[0]+4096336452&4294967295,m=E+(y<<6&4294967295|y>>>26),y=b+(E^(m|~v))+A[7]+1126891415&4294967295,b=m+(y<<10&4294967295|y>>>22),y=v+(m^(b|~E))+A[14]+2878612391&4294967295,v=b+(y<<15&4294967295|y>>>17),y=E+(b^(v|~m))+A[5]+4237533241&4294967295,E=v+(y<<21&4294967295|y>>>11),y=m+(v^(E|~b))+A[12]+1700485571&4294967295,m=E+(y<<6&4294967295|y>>>26),y=b+(E^(m|~v))+A[3]+2399980690&4294967295,b=m+(y<<10&4294967295|y>>>22),y=v+(m^(b|~E))+A[10]+4293915773&4294967295,v=b+(y<<15&4294967295|y>>>17),y=E+(b^(v|~m))+A[1]+2240044497&4294967295,E=v+(y<<21&4294967295|y>>>11),y=m+(v^(E|~b))+A[8]+1873313359&4294967295,m=E+(y<<6&4294967295|y>>>26),y=b+(E^(m|~v))+A[15]+4264355552&4294967295,b=m+(y<<10&4294967295|y>>>22),y=v+(m^(b|~E))+A[6]+2734768916&4294967295,v=b+(y<<15&4294967295|y>>>17),y=E+(b^(v|~m))+A[13]+1309151649&4294967295,E=v+(y<<21&4294967295|y>>>11),y=m+(v^(E|~b))+A[4]+4149444226&4294967295,m=E+(y<<6&4294967295|y>>>26),y=b+(E^(m|~v))+A[11]+3174756917&4294967295,b=m+(y<<10&4294967295|y>>>22),y=v+(m^(b|~E))+A[2]+718787259&4294967295,v=b+(y<<15&4294967295|y>>>17),y=E+(b^(v|~m))+A[9]+3951481745&4294967295,I.g[0]=I.g[0]+m&4294967295,I.g[1]=I.g[1]+(v+(y<<21&4294967295|y>>>11))&4294967295,I.g[2]=I.g[2]+v&4294967295,I.g[3]=I.g[3]+b&4294967295}r.prototype.v=function(I,m){m===void 0&&(m=I.length);const E=m-this.blockSize,A=this.C;let v=this.h,b=0;for(;b<m;){if(v==0)for(;b<=E;)s(this,I,b),b+=this.blockSize;if(typeof I=="string"){for(;b<m;)if(A[v++]=I.charCodeAt(b++),v==this.blockSize){s(this,A),v=0;break}}else for(;b<m;)if(A[v++]=I[b++],v==this.blockSize){s(this,A),v=0;break}}this.h=v,this.o+=m},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var m=1;m<I.length-8;++m)I[m]=0;m=this.o*8;for(var E=I.length-8;E<I.length;++E)I[E]=m&255,m/=256;for(this.v(I),I=Array(16),m=0,E=0;E<4;++E)for(let A=0;A<32;A+=8)I[m++]=this.g[E]>>>A&255;return I};function i(I,m){var E=c;return Object.prototype.hasOwnProperty.call(E,I)?E[I]:E[I]=m(I)}function a(I,m){this.h=m;const E=[];let A=!0;for(let v=I.length-1;v>=0;v--){const b=I[v]|0;A&&b==m||(E[v]=b,A=!1)}this.g=E}var c={};function u(I){return-128<=I&&I<128?i(I,function(m){return new a([m|0],m<0?-1:0)}):new a([I|0],I<0?-1:0)}function f(I){if(isNaN(I)||!isFinite(I))return g;if(I<0)return j(f(-I));const m=[];let E=1;for(let A=0;I>=E;A++)m[A]=I/E|0,E*=4294967296;return new a(m,0)}function d(I,m){if(I.length==0)throw Error("number format error: empty string");if(m=m||10,m<2||36<m)throw Error("radix out of range: "+m);if(I.charAt(0)=="-")return j(d(I.substring(1),m));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const E=f(Math.pow(m,8));let A=g;for(let b=0;b<I.length;b+=8){var v=Math.min(8,I.length-b);const y=parseInt(I.substring(b,b+v),m);v<8?(v=f(Math.pow(m,v)),A=A.j(v).add(f(y))):(A=A.j(E),A=A.add(f(y)))}return A}var g=u(0),T=u(1),R=u(16777216);n=a.prototype,n.m=function(){if(B(this))return-j(this).m();let I=0,m=1;for(let E=0;E<this.g.length;E++){const A=this.i(E);I+=(A>=0?A:4294967296+A)*m,m*=4294967296}return I},n.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(L(this))return"0";if(B(this))return"-"+j(this).toString(I);const m=f(Math.pow(I,6));var E=this;let A="";for(;;){const v=z(E,m).g;E=K(E,v.j(m));let b=((E.g.length>0?E.g[0]:E.h)>>>0).toString(I);if(E=v,L(E))return b+A;for(;b.length<6;)b="0"+b;A=b+A}},n.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function L(I){if(I.h!=0)return!1;for(let m=0;m<I.g.length;m++)if(I.g[m]!=0)return!1;return!0}function B(I){return I.h==-1}n.l=function(I){return I=K(this,I),B(I)?-1:L(I)?0:1};function j(I){const m=I.g.length,E=[];for(let A=0;A<m;A++)E[A]=~I.g[A];return new a(E,~I.h).add(T)}n.abs=function(){return B(this)?j(this):this},n.add=function(I){const m=Math.max(this.g.length,I.g.length),E=[];let A=0;for(let v=0;v<=m;v++){let b=A+(this.i(v)&65535)+(I.i(v)&65535),y=(b>>>16)+(this.i(v)>>>16)+(I.i(v)>>>16);A=y>>>16,b&=65535,y&=65535,E[v]=y<<16|b}return new a(E,E[E.length-1]&-2147483648?-1:0)};function K(I,m){return I.add(j(m))}n.j=function(I){if(L(this)||L(I))return g;if(B(this))return B(I)?j(this).j(j(I)):j(j(this).j(I));if(B(I))return j(this.j(j(I)));if(this.l(R)<0&&I.l(R)<0)return f(this.m()*I.m());const m=this.g.length+I.g.length,E=[];for(var A=0;A<2*m;A++)E[A]=0;for(A=0;A<this.g.length;A++)for(let v=0;v<I.g.length;v++){const b=this.i(A)>>>16,y=this.i(A)&65535,Le=I.i(v)>>>16,It=I.i(v)&65535;E[2*A+2*v]+=y*It,Q(E,2*A+2*v),E[2*A+2*v+1]+=b*It,Q(E,2*A+2*v+1),E[2*A+2*v+1]+=y*Le,Q(E,2*A+2*v+1),E[2*A+2*v+2]+=b*Le,Q(E,2*A+2*v+2)}for(I=0;I<m;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=m;I<2*m;I++)E[I]=0;return new a(E,0)};function Q(I,m){for(;(I[m]&65535)!=I[m];)I[m+1]+=I[m]>>>16,I[m]&=65535,m++}function X(I,m){this.g=I,this.h=m}function z(I,m){if(L(m))throw Error("division by zero");if(L(I))return new X(g,g);if(B(I))return m=z(j(I),m),new X(j(m.g),j(m.h));if(B(m))return m=z(I,j(m)),new X(j(m.g),m.h);if(I.g.length>30){if(B(I)||B(m))throw Error("slowDivide_ only works with positive integers.");for(var E=T,A=m;A.l(I)<=0;)E=le(E),A=le(A);var v=ye(E,1),b=ye(A,1);for(A=ye(A,2),E=ye(E,2);!L(A);){var y=b.add(A);y.l(I)<=0&&(v=v.add(E),b=y),A=ye(A,1),E=ye(E,1)}return m=K(I,v.j(m)),new X(v,m)}for(v=g;I.l(m)>=0;){for(E=Math.max(1,Math.floor(I.m()/m.m())),A=Math.ceil(Math.log(E)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),b=f(E),y=b.j(m);B(y)||y.l(I)>0;)E-=A,b=f(E),y=b.j(m);L(b)&&(b=T),v=v.add(b),I=K(I,y)}return new X(v,I)}n.B=function(I){return z(this,I).h},n.and=function(I){const m=Math.max(this.g.length,I.g.length),E=[];for(let A=0;A<m;A++)E[A]=this.i(A)&I.i(A);return new a(E,this.h&I.h)},n.or=function(I){const m=Math.max(this.g.length,I.g.length),E=[];for(let A=0;A<m;A++)E[A]=this.i(A)|I.i(A);return new a(E,this.h|I.h)},n.xor=function(I){const m=Math.max(this.g.length,I.g.length),E=[];for(let A=0;A<m;A++)E[A]=this.i(A)^I.i(A);return new a(E,this.h^I.h)};function le(I){const m=I.g.length+1,E=[];for(let A=0;A<m;A++)E[A]=I.i(A)<<1|I.i(A-1)>>>31;return new a(E,I.h)}function ye(I,m){const E=m>>5;m%=32;const A=I.g.length-E,v=[];for(let b=0;b<A;b++)v[b]=m>0?I.i(b+E)>>>m|I.i(b+E+1)<<32-m:I.i(b+E);return new a(v,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,md=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=d,Sn=a}).apply(typeof Fu<"u"?Fu:typeof self<"u"?self:typeof window<"u"?window:{});var _i=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var _d,ys,yd,Ci,xa,Ed,Td,vd;(function(){var n,e=Object.defineProperty;function t(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof _i=="object"&&_i];for(var l=0;l<o.length;++l){var h=o[l];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=t(this);function s(o,l){if(l)e:{var h=r;o=o.split(".");for(var p=0;p<o.length-1;p++){var S=o[p];if(!(S in h))break e;h=h[S]}o=o[o.length-1],p=h[o],l=l(p),l!=p&&l!=null&&e(h,o,{configurable:!0,writable:!0,value:l})}}s("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(o){return o||function(l){var h=[],p;for(p in l)Object.prototype.hasOwnProperty.call(l,p)&&h.push([p,l[p]]);return h}});var i=i||{},a=this||self;function c(o){var l=typeof o;return l=="object"&&o!=null||l=="function"}function u(o,l,h){return o.call.apply(o.bind,arguments)}function f(o,l,h){return f=u,f.apply(null,arguments)}function d(o,l){var h=Array.prototype.slice.call(arguments,1);return function(){var p=h.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function g(o,l){function h(){}h.prototype=l.prototype,o.Z=l.prototype,o.prototype=new h,o.prototype.constructor=o,o.Ob=function(p,S,C){for(var F=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)F[ie-2]=arguments[ie];return l.prototype[S].apply(p,F)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function R(o){const l=o.length;if(l>0){const h=Array(l);for(let p=0;p<l;p++)h[p]=o[p];return h}return[]}function L(o,l){for(let p=1;p<arguments.length;p++){const S=arguments[p];var h=typeof S;if(h=h!="object"?h:S?Array.isArray(S)?"array":h:"null",h=="array"||h=="object"&&typeof S.length=="number"){h=o.length||0;const C=S.length||0;o.length=h+C;for(let F=0;F<C;F++)o[h+F]=S[F]}else o.push(S)}}class B{constructor(l,h){this.i=l,this.j=h,this.h=0,this.g=null}get(){let l;return this.h>0?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}function j(o){a.setTimeout(()=>{throw o},0)}function K(){var o=I;let l=null;return o.g&&(l=o.g,o.g=o.g.next,o.g||(o.h=null),l.next=null),l}class Q{constructor(){this.h=this.g=null}add(l,h){const p=X.get();p.set(l,h),this.h?this.h.next=p:this.g=p,this.h=p}}var X=new B(()=>new z,o=>o.reset());class z{constructor(){this.next=this.g=this.h=null}set(l,h){this.h=l,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let le,ye=!1,I=new Q,m=()=>{const o=Promise.resolve(void 0);le=()=>{o.then(E)}};function E(){for(var o;o=K();){try{o.h.call(o.g)}catch(h){j(h)}var l=X;l.j(o),l.h<100&&(l.h++,o.next=l.g,l.g=o)}ye=!1}function A(){this.u=this.u,this.C=this.C}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function v(o,l){this.type=o,this.g=this.target=l,this.defaultPrevented=!1}v.prototype.h=function(){this.defaultPrevented=!0};var b=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var o=!1,l=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const h=()=>{};a.addEventListener("test",h,l),a.removeEventListener("test",h,l)}catch{}return o})();function y(o){return/^[\s\xa0]*$/.test(o)}function Le(o,l){v.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,l)}g(Le,v),Le.prototype.init=function(o,l){const h=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=l,l=o.relatedTarget,l||(h=="mouseover"?l=o.fromElement:h=="mouseout"&&(l=o.toElement)),this.relatedTarget=l,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&Le.Z.h.call(this)},Le.prototype.h=function(){Le.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var It="closure_listenable_"+(Math.random()*1e6|0),je=0;function Ie(o,l,h,p,S){this.listener=o,this.proxy=null,this.src=l,this.type=h,this.capture=!!p,this.ha=S,this.key=++je,this.da=this.fa=!1}function pe(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function pt(o,l,h){for(const p in o)l.call(h,o[p],p,o)}function cr(o,l){for(const h in o)l.call(void 0,o[h],h,o)}function wt(o){const l={};for(const h in o)l[h]=o[h];return l}const ct="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Yr(o,l){let h,p;for(let S=1;S<arguments.length;S++){p=arguments[S];for(h in p)o[h]=p[h];for(let C=0;C<ct.length;C++)h=ct[C],Object.prototype.hasOwnProperty.call(p,h)&&(o[h]=p[h])}}function lr(o){this.src=o,this.g={},this.h=0}lr.prototype.add=function(o,l,h,p,S){const C=o.toString();o=this.g[C],o||(o=this.g[C]=[],this.h++);const F=jt(o,l,p,S);return F>-1?(l=o[F],h||(l.fa=!1)):(l=new Ie(l,this.src,C,!!p,S),l.fa=h,o.push(l)),l};function Xr(o,l){const h=l.type;if(h in o.g){var p=o.g[h],S=Array.prototype.indexOf.call(p,l,void 0),C;(C=S>=0)&&Array.prototype.splice.call(p,S,1),C&&(pe(l),o.g[h].length==0&&(delete o.g[h],o.h--))}}function jt(o,l,h,p){for(let S=0;S<o.length;++S){const C=o[S];if(!C.da&&C.listener==l&&C.capture==!!h&&C.ha==p)return S}return-1}var sn="closure_lm_"+(Math.random()*1e6|0),Fn={};function Zr(o,l,h,p,S){if(Array.isArray(l)){for(let C=0;C<l.length;C++)Zr(o,l[C],h,p,S);return null}return h=$(h),o&&o[It]?o.J(l,h,c(p)?!!p.capture:!1,S):Un(o,l,h,!1,p,S)}function Un(o,l,h,p,S,C){if(!l)throw Error("Invalid event type");const F=c(S)?!!S.capture:!!S;let ie=N(o);if(ie||(o[sn]=ie=new lr(o)),h=ie.add(l,h,p,F,C),h.proxy)return h;if(p=sl(),h.proxy=p,p.src=o,p.listener=h,o.addEventListener)b||(S=F),S===void 0&&(S=!1),o.addEventListener(l.toString(),p,S);else if(o.attachEvent)o.attachEvent(P(l.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return h}function sl(){function o(h){return l.call(o.src,o.listener,h)}const l=M;return o}function _(o,l,h,p,S){if(Array.isArray(l))for(var C=0;C<l.length;C++)_(o,l[C],h,p,S);else p=c(p)?!!p.capture:!!p,h=$(h),o&&o[It]?(o=o.i,C=String(l).toString(),C in o.g&&(l=o.g[C],h=jt(l,h,p,S),h>-1&&(pe(l[h]),Array.prototype.splice.call(l,h,1),l.length==0&&(delete o.g[C],o.h--)))):o&&(o=N(o))&&(l=o.g[l.toString()],o=-1,l&&(o=jt(l,h,p,S)),(h=o>-1?l[o]:null)&&w(h))}function w(o){if(typeof o!="number"&&o&&!o.da){var l=o.src;if(l&&l[It])Xr(l.i,o);else{var h=o.type,p=o.proxy;l.removeEventListener?l.removeEventListener(h,p,o.capture):l.detachEvent?l.detachEvent(P(h),p):l.addListener&&l.removeListener&&l.removeListener(p),(h=N(l))?(Xr(h,o),h.h==0&&(h.src=null,l[sn]=null)):pe(o)}}}function P(o){return o in Fn?Fn[o]:Fn[o]="on"+o}function M(o,l){if(o.da)o=!0;else{l=new Le(l,this);const h=o.listener,p=o.ha||o.src;o.fa&&w(o),o=h.call(p,l)}return o}function N(o){return o=o[sn],o instanceof lr?o:null}var V="__closure_events_fn_"+(Math.random()*1e9>>>0);function $(o){return typeof o=="function"?o:(o[V]||(o[V]=function(l){return o.handleEvent(l)}),o[V])}function x(){A.call(this),this.i=new lr(this),this.M=this,this.G=null}g(x,A),x.prototype[It]=!0,x.prototype.removeEventListener=function(o,l,h,p){_(this,o,l,h,p)};function O(o,l){var h,p=o.G;if(p)for(h=[];p;p=p.G)h.push(p);if(o=o.M,p=l.type||l,typeof l=="string")l=new v(l,o);else if(l instanceof v)l.target=l.target||o;else{var S=l;l=new v(p,o),Yr(l,S)}S=!0;let C,F;if(h)for(F=h.length-1;F>=0;F--)C=l.g=h[F],S=k(C,p,!0,l)&&S;if(C=l.g=o,S=k(C,p,!0,l)&&S,S=k(C,p,!1,l)&&S,h)for(F=0;F<h.length;F++)C=l.g=h[F],S=k(C,p,!1,l)&&S}x.prototype.N=function(){if(x.Z.N.call(this),this.i){var o=this.i;for(const l in o.g){const h=o.g[l];for(let p=0;p<h.length;p++)pe(h[p]);delete o.g[l],o.h--}}this.G=null},x.prototype.J=function(o,l,h,p){return this.i.add(String(o),l,!1,h,p)},x.prototype.K=function(o,l,h,p){return this.i.add(String(o),l,!0,h,p)};function k(o,l,h,p){if(l=o.i.g[String(l)],!l)return!0;l=l.concat();let S=!0;for(let C=0;C<l.length;++C){const F=l[C];if(F&&!F.da&&F.capture==h){const ie=F.listener,ke=F.ha||F.src;F.fa&&Xr(o.i,F),S=ie.call(ke,p)!==!1&&S}}return S&&!p.defaultPrevented}function J(o,l){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=f(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(l)>2147483647?-1:a.setTimeout(o,l||0)}function q(o){o.g=J(()=>{o.g=null,o.i&&(o.i=!1,q(o))},o.l);const l=o.h;o.h=null,o.m.apply(null,l)}class W extends A{constructor(l,h){super(),this.m=l,this.l=h,this.h=null,this.i=!1,this.g=null}j(l){this.h=arguments,this.g?this.i=!0:q(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Y(o){A.call(this),this.h=o,this.g={}}g(Y,A);var oe=[];function _e(o){pt(o.g,function(l,h){this.g.hasOwnProperty(h)&&w(l)},o),o.g={}}Y.prototype.N=function(){Y.Z.N.call(this),_e(this)},Y.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fe=a.JSON.stringify,ze=a.JSON.parse,Ke=class{stringify(o){return a.JSON.stringify(o,void 0)}parse(o){return a.JSON.parse(o,void 0)}};function lt(){}function ut(){}var _t={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ur(){v.call(this,"d")}g(ur,v);function $e(){v.call(this,"c")}g($e,v);var Fe={},es=null;function Bn(){return es=es||new x}Fe.Ia="serverreachability";function il(o){v.call(this,Fe.Ia,o)}g(il,v);function ts(o){const l=Bn();O(l,new il(l))}Fe.STAT_EVENT="statevent";function ol(o,l){v.call(this,Fe.STAT_EVENT,o),this.stat=l}g(ol,v);function Ze(o){const l=Bn();O(l,new ol(l,o))}Fe.Ja="timingevent";function al(o,l){v.call(this,Fe.Ja,o),this.size=l}g(al,v);function ns(o,l){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){o()},l)}function rs(){this.g=!0}rs.prototype.ua=function(){this.g=!1};function rg(o,l,h,p,S,C){o.info(function(){if(o.g)if(C){var F="",ie=C.split("&");for(let Ee=0;Ee<ie.length;Ee++){var ke=ie[Ee].split("=");if(ke.length>1){const Ue=ke[0];ke=ke[1];const bt=Ue.split("_");F=bt.length>=2&&bt[1]=="type"?F+(Ue+"="+ke+"&"):F+(Ue+"=redacted&")}}}else F=null;else F=C;return"XMLHTTP REQ ("+p+") [attempt "+S+"]: "+l+`
`+h+`
`+F})}function sg(o,l,h,p,S,C,F){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+S+"]: "+l+`
`+h+`
`+C+" "+F})}function hr(o,l,h,p){o.info(function(){return"XMLHTTP TEXT ("+l+"): "+og(o,h)+(p?" "+p:"")})}function ig(o,l){o.info(function(){return"TIMEOUT: "+l})}rs.prototype.info=function(){};function og(o,l){if(!o.g)return l;if(!l)return null;try{const C=JSON.parse(l);if(C){for(o=0;o<C.length;o++)if(Array.isArray(C[o])){var h=C[o];if(!(h.length<2)){var p=h[1];if(Array.isArray(p)&&!(p.length<1)){var S=p[0];if(S!="noop"&&S!="stop"&&S!="close")for(let F=1;F<p.length;F++)p[F]=""}}}}return fe(C)}catch{return l}}var si={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},cl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ll;function No(){}g(No,lt),No.prototype.g=function(){return new XMLHttpRequest},ll=new No;function ss(o){return encodeURIComponent(String(o))}function ag(o){var l=1;o=o.split(":");const h=[];for(;l>0&&o.length;)h.push(o.shift()),l--;return o.length&&h.push(o.join(":")),h}function on(o,l,h,p){this.j=o,this.i=l,this.l=h,this.S=p||1,this.V=new Y(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ul}function ul(){this.i=null,this.g="",this.h=!1}var hl={},Vo={};function ko(o,l,h){o.M=1,o.A=oi(At(l)),o.u=h,o.R=!0,fl(o,null)}function fl(o,l){o.F=Date.now(),ii(o),o.B=At(o.A);var h=o.B,p=o.S;Array.isArray(p)||(p=[String(p)]),bl(h.i,"t",p),o.C=0,h=o.j.L,o.h=new ul,o.g=ql(o.j,h?l:null,!o.u),o.P>0&&(o.O=new W(f(o.Y,o,o.g),o.P)),l=o.V,h=o.g,p=o.ba;var S="readystatechange";Array.isArray(S)||(S&&(oe[0]=S.toString()),S=oe);for(let C=0;C<S.length;C++){const F=Zr(h,S[C],p||l.handleEvent,!1,l.h||l);if(!F)break;l.g[F.key]=F}l=o.J?wt(o.J):{},o.u?(o.v||(o.v="POST"),l["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,l)):(o.v="GET",o.g.ea(o.B,o.v,null,l)),ts(),rg(o.i,o.v,o.B,o.l,o.S,o.u)}on.prototype.ba=function(o){o=o.target;const l=this.O;l&&ln(o)==3?l.j():this.Y(o)},on.prototype.Y=function(o){try{if(o==this.g)e:{const ie=ln(this.g),ke=this.g.ya(),Ee=this.g.ca();if(!(ie<3)&&(ie!=3||this.g&&(this.h.h||this.g.la()||Vl(this.g)))){this.K||ie!=4||ke==7||(ke==8||Ee<=0?ts(3):ts(2)),Oo(this);var l=this.g.ca();this.X=l;var h=cg(this);if(this.o=l==200,sg(this.i,this.v,this.B,this.l,this.S,ie,l),this.o){if(this.U&&!this.L){t:{if(this.g){var p,S=this.g;if((p=S.g?S.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(p)){var C=p;break t}}C=null}if(o=C)hr(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xo(this,o);else{this.o=!1,this.m=3,Ze(12),jn(this),is(this);break e}}if(this.R){o=!0;let Ue;for(;!this.K&&this.C<h.length;)if(Ue=lg(this,h),Ue==Vo){ie==4&&(this.m=4,Ze(14),o=!1),hr(this.i,this.l,null,"[Incomplete Response]");break}else if(Ue==hl){this.m=4,Ze(15),hr(this.i,this.l,h,"[Invalid Chunk]"),o=!1;break}else hr(this.i,this.l,Ue,null),xo(this,Ue);if(dl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ie!=4||h.length!=0||this.h.h||(this.m=1,Ze(16),o=!1),this.o=this.o&&o,!o)hr(this.i,this.l,h,"[Invalid Chunked Response]"),jn(this),is(this);else if(h.length>0&&!this.W){this.W=!0;var F=this.j;F.g==this&&F.aa&&!F.P&&(F.j.info("Great, no buffering proxy detected. Bytes received: "+h.length),qo(F),F.P=!0,Ze(11))}}else hr(this.i,this.l,h,null),xo(this,h);ie==4&&jn(this),this.o&&!this.K&&(ie==4?Ul(this.j,this):(this.o=!1,ii(this)))}else wg(this.g),l==400&&h.indexOf("Unknown SID")>0?(this.m=3,Ze(12)):(this.m=0,Ze(13)),jn(this),is(this)}}}catch{}finally{}};function cg(o){if(!dl(o))return o.g.la();const l=Vl(o.g);if(l==="")return"";let h="";const p=l.length,S=ln(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return jn(o),is(o),"";o.h.i=new a.TextDecoder}for(let C=0;C<p;C++)o.h.h=!0,h+=o.h.i.decode(l[C],{stream:!(S&&C==p-1)});return l.length=0,o.h.g+=h,o.C=0,o.h.g}function dl(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function lg(o,l){var h=o.C,p=l.indexOf(`
`,h);return p==-1?Vo:(h=Number(l.substring(h,p)),isNaN(h)?hl:(p+=1,p+h>l.length?Vo:(l=l.slice(p,p+h),o.C=p+h,l)))}on.prototype.cancel=function(){this.K=!0,jn(this)};function ii(o){o.T=Date.now()+o.H,pl(o,o.H)}function pl(o,l){if(o.D!=null)throw Error("WatchDog timer not null");o.D=ns(f(o.aa,o),l)}function Oo(o){o.D&&(a.clearTimeout(o.D),o.D=null)}on.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(ig(this.i,this.B),this.M!=2&&(ts(),Ze(17)),jn(this),this.m=2,is(this)):pl(this,this.T-o)};function is(o){o.j.I==0||o.K||Ul(o.j,o)}function jn(o){Oo(o);var l=o.O;l&&typeof l.dispose=="function"&&l.dispose(),o.O=null,_e(o.V),o.g&&(l=o.g,o.g=null,l.abort(),l.dispose())}function xo(o,l){try{var h=o.j;if(h.I!=0&&(h.g==o||Mo(h.h,o))){if(!o.L&&Mo(h.h,o)&&h.I==3){try{var p=h.Ba.g.parse(l)}catch{p=null}if(Array.isArray(p)&&p.length==3){var S=p;if(S[0]==0){e:if(!h.v){if(h.g)if(h.g.F+3e3<o.F)hi(h),li(h);else break e;$o(h),Ze(18)}}else h.xa=S[1],0<h.xa-h.K&&S[2]<37500&&h.F&&h.A==0&&!h.C&&(h.C=ns(f(h.Va,h),6e3));_l(h.h)<=1&&h.ta&&(h.ta=void 0)}else qn(h,11)}else if((o.L||h.g==o)&&hi(h),!y(l))for(S=h.Ba.g.parse(l),l=0;l<S.length;l++){let Ee=S[l];const Ue=Ee[0];if(!(Ue<=h.K))if(h.K=Ue,Ee=Ee[1],h.I==2)if(Ee[0]=="c"){h.M=Ee[1],h.ba=Ee[2];const bt=Ee[3];bt!=null&&(h.ka=bt,h.j.info("VER="+h.ka));const Hn=Ee[4];Hn!=null&&(h.za=Hn,h.j.info("SVER="+h.za));const un=Ee[5];un!=null&&typeof un=="number"&&un>0&&(p=1.5*un,h.O=p,h.j.info("backChannelRequestTimeoutMs_="+p)),p=h;const hn=o.g;if(hn){const di=hn.g?hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(di){var C=p.h;C.g||di.indexOf("spdy")==-1&&di.indexOf("quic")==-1&&di.indexOf("h2")==-1||(C.j=C.l,C.g=new Set,C.h&&(Lo(C,C.h),C.h=null))}if(p.G){const Ho=hn.g?hn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ho&&(p.wa=Ho,we(p.J,p.G,Ho))}}h.I=3,h.l&&h.l.ra(),h.aa&&(h.T=Date.now()-o.F,h.j.info("Handshake RTT: "+h.T+"ms")),p=h;var F=o;if(p.na=$l(p,p.L?p.ba:null,p.W),F.L){yl(p.h,F);var ie=F,ke=p.O;ke&&(ie.H=ke),ie.D&&(Oo(ie),ii(ie)),p.g=F}else Ll(p);h.i.length>0&&ui(h)}else Ee[0]!="stop"&&Ee[0]!="close"||qn(h,7);else h.I==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?qn(h,7):jo(h):Ee[0]!="noop"&&h.l&&h.l.qa(Ee),h.A=0)}}ts(4)}catch{}}var ug=class{constructor(o,l){this.g=o,this.map=l}};function gl(o){this.l=o||10,a.PerformanceNavigationTiming?(o=a.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ml(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function _l(o){return o.h?1:o.g?o.g.size:0}function Mo(o,l){return o.h?o.h==l:o.g?o.g.has(l):!1}function Lo(o,l){o.g?o.g.add(l):o.h=l}function yl(o,l){o.h&&o.h==l?o.h=null:o.g&&o.g.has(l)&&o.g.delete(l)}gl.prototype.cancel=function(){if(this.i=El(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function El(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let l=o.i;for(const h of o.g.values())l=l.concat(h.G);return l}return R(o.i)}var Tl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hg(o,l){if(o){o=o.split("&");for(let h=0;h<o.length;h++){const p=o[h].indexOf("=");let S,C=null;p>=0?(S=o[h].substring(0,p),C=o[h].substring(p+1)):S=o[h],l(S,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function an(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let l;o instanceof an?(this.l=o.l,os(this,o.j),this.o=o.o,this.g=o.g,as(this,o.u),this.h=o.h,Fo(this,Sl(o.i)),this.m=o.m):o&&(l=String(o).match(Tl))?(this.l=!1,os(this,l[1]||"",!0),this.o=cs(l[2]||""),this.g=cs(l[3]||"",!0),as(this,l[4]),this.h=cs(l[5]||"",!0),Fo(this,l[6]||"",!0),this.m=cs(l[7]||"")):(this.l=!1,this.i=new us(null,this.l))}an.prototype.toString=function(){const o=[];var l=this.j;l&&o.push(ls(l,vl,!0),":");var h=this.g;return(h||l=="file")&&(o.push("//"),(l=this.o)&&o.push(ls(l,vl,!0),"@"),o.push(ss(h).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.u,h!=null&&o.push(":",String(h))),(h=this.h)&&(this.g&&h.charAt(0)!="/"&&o.push("/"),o.push(ls(h,h.charAt(0)=="/"?pg:dg,!0))),(h=this.i.toString())&&o.push("?",h),(h=this.m)&&o.push("#",ls(h,mg)),o.join("")},an.prototype.resolve=function(o){const l=At(this);let h=!!o.j;h?os(l,o.j):h=!!o.o,h?l.o=o.o:h=!!o.g,h?l.g=o.g:h=o.u!=null;var p=o.h;if(h)as(l,o.u);else if(h=!!o.h){if(p.charAt(0)!="/")if(this.g&&!this.h)p="/"+p;else{var S=l.h.lastIndexOf("/");S!=-1&&(p=l.h.slice(0,S+1)+p)}if(S=p,S==".."||S==".")p="";else if(S.indexOf("./")!=-1||S.indexOf("/.")!=-1){p=S.lastIndexOf("/",0)==0,S=S.split("/");const C=[];for(let F=0;F<S.length;){const ie=S[F++];ie=="."?p&&F==S.length&&C.push(""):ie==".."?((C.length>1||C.length==1&&C[0]!="")&&C.pop(),p&&F==S.length&&C.push("")):(C.push(ie),p=!0)}p=C.join("/")}else p=S}return h?l.h=p:h=o.i.toString()!=="",h?Fo(l,Sl(o.i)):h=!!o.m,h&&(l.m=o.m),l};function At(o){return new an(o)}function os(o,l,h){o.j=h?cs(l,!0):l,o.j&&(o.j=o.j.replace(/:$/,""))}function as(o,l){if(l){if(l=Number(l),isNaN(l)||l<0)throw Error("Bad port number "+l);o.u=l}else o.u=null}function Fo(o,l,h){l instanceof us?(o.i=l,_g(o.i,o.l)):(h||(l=ls(l,gg)),o.i=new us(l,o.l))}function we(o,l,h){o.i.set(l,h)}function oi(o){return we(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function cs(o,l){return o?l?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function ls(o,l,h){return typeof o=="string"?(o=encodeURI(o).replace(l,fg),h&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function fg(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var vl=/[#\/\?@]/g,dg=/[#\?:]/g,pg=/[#\?]/g,gg=/[#\?@]/g,mg=/#/g;function us(o,l){this.h=this.g=null,this.i=o||null,this.j=!!l}function $n(o){o.g||(o.g=new Map,o.h=0,o.i&&hg(o.i,function(l,h){o.add(decodeURIComponent(l.replace(/\+/g," ")),h)}))}n=us.prototype,n.add=function(o,l){$n(this),this.i=null,o=fr(this,o);let h=this.g.get(o);return h||this.g.set(o,h=[]),h.push(l),this.h+=1,this};function Il(o,l){$n(o),l=fr(o,l),o.g.has(l)&&(o.i=null,o.h-=o.g.get(l).length,o.g.delete(l))}function wl(o,l){return $n(o),l=fr(o,l),o.g.has(l)}n.forEach=function(o,l){$n(this),this.g.forEach(function(h,p){h.forEach(function(S){o.call(l,S,p,this)},this)},this)};function Al(o,l){$n(o);let h=[];if(typeof l=="string")wl(o,l)&&(h=h.concat(o.g.get(fr(o,l))));else for(o=Array.from(o.g.values()),l=0;l<o.length;l++)h=h.concat(o[l]);return h}n.set=function(o,l){return $n(this),this.i=null,o=fr(this,o),wl(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[l]),this.h+=1,this},n.get=function(o,l){return o?(o=Al(this,o),o.length>0?String(o[0]):l):l};function bl(o,l,h){Il(o,l),h.length>0&&(o.i=null,o.g.set(fr(o,l),R(h)),o.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],l=Array.from(this.g.keys());for(let p=0;p<l.length;p++){var h=l[p];const S=ss(h);h=Al(this,h);for(let C=0;C<h.length;C++){let F=S;h[C]!==""&&(F+="="+ss(h[C])),o.push(F)}}return this.i=o.join("&")};function Sl(o){const l=new us;return l.i=o.i,o.g&&(l.g=new Map(o.g),l.h=o.h),l}function fr(o,l){return l=String(l),o.j&&(l=l.toLowerCase()),l}function _g(o,l){l&&!o.j&&($n(o),o.i=null,o.g.forEach(function(h,p){const S=p.toLowerCase();p!=S&&(Il(this,p),bl(this,S,h))},o)),o.j=l}function yg(o,l){const h=new rs;if(a.Image){const p=new Image;p.onload=d(cn,h,"TestLoadImage: loaded",!0,l,p),p.onerror=d(cn,h,"TestLoadImage: error",!1,l,p),p.onabort=d(cn,h,"TestLoadImage: abort",!1,l,p),p.ontimeout=d(cn,h,"TestLoadImage: timeout",!1,l,p),a.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else l(!1)}function Eg(o,l){const h=new rs,p=new AbortController,S=setTimeout(()=>{p.abort(),cn(h,"TestPingServer: timeout",!1,l)},1e4);fetch(o,{signal:p.signal}).then(C=>{clearTimeout(S),C.ok?cn(h,"TestPingServer: ok",!0,l):cn(h,"TestPingServer: server error",!1,l)}).catch(()=>{clearTimeout(S),cn(h,"TestPingServer: error",!1,l)})}function cn(o,l,h,p,S){try{S&&(S.onload=null,S.onerror=null,S.onabort=null,S.ontimeout=null),p(h)}catch{}}function Tg(){this.g=new Ke}function Uo(o){this.i=o.Sb||null,this.h=o.ab||!1}g(Uo,lt),Uo.prototype.g=function(){return new ai(this.i,this.h)};function ai(o,l){x.call(this),this.H=o,this.o=l,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(ai,x),n=ai.prototype,n.open=function(o,l){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=l,this.readyState=1,fs(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const l={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(l.body=o),(this.H||a).fetch(new Request(this.D,l)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,hs(this)),this.readyState=0},n.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,fs(this)),this.g&&(this.readyState=3,fs(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Rl(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function Rl(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}n.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var l=o.value?o.value:new Uint8Array(0);(l=this.B.decode(l,{stream:!o.done}))&&(this.response=this.responseText+=l)}o.done?hs(this):fs(this),this.readyState==3&&Rl(this)}},n.Oa=function(o){this.g&&(this.response=this.responseText=o,hs(this))},n.Na=function(o){this.g&&(this.response=o,hs(this))},n.ga=function(){this.g&&hs(this)};function hs(o){o.readyState=4,o.l=null,o.j=null,o.B=null,fs(o)}n.setRequestHeader=function(o,l){this.A.append(o,l)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],l=this.h.entries();for(var h=l.next();!h.done;)h=h.value,o.push(h[0]+": "+h[1]),h=l.next();return o.join(`\r
`)};function fs(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(ai.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Cl(o){let l="";return pt(o,function(h,p){l+=p,l+=":",l+=h,l+=`\r
`}),l}function Bo(o,l,h){e:{for(p in h){var p=!1;break e}p=!0}p||(h=Cl(h),typeof o=="string"?h!=null&&ss(h):we(o,l,h))}function Re(o){x.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Re,x);var vg=/^https?$/i,Ig=["POST","PUT"];n=Re.prototype,n.Fa=function(o){this.H=o},n.ea=function(o,l,h,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);l=l?l.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ll.g(),this.g.onreadystatechange=T(f(this.Ca,this));try{this.B=!0,this.g.open(l,String(o),!0),this.B=!1}catch(C){Pl(this,C);return}if(o=h||"",h=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var S in p)h.set(S,p[S]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const C of p.keys())h.set(C,p.get(C));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(h.keys()).find(C=>C.toLowerCase()=="content-type"),S=a.FormData&&o instanceof a.FormData,!(Array.prototype.indexOf.call(Ig,l,void 0)>=0)||p||S||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[C,F]of h)this.g.setRequestHeader(C,F);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(C){Pl(this,C)}};function Pl(o,l){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=l,o.o=5,Dl(o),ci(o)}function Dl(o){o.A||(o.A=!0,O(o,"complete"),O(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,O(this,"complete"),O(this,"abort"),ci(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ci(this,!0)),Re.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Nl(this):this.Xa())},n.Xa=function(){Nl(this)};function Nl(o){if(o.h&&typeof i<"u"){if(o.v&&ln(o)==4)setTimeout(o.Ca.bind(o),0);else if(O(o,"readystatechange"),ln(o)==4){o.h=!1;try{const C=o.ca();e:switch(C){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break e;default:l=!1}var h;if(!(h=l)){var p;if(p=C===0){let F=String(o.D).match(Tl)[1]||null;!F&&a.self&&a.self.location&&(F=a.self.location.protocol.slice(0,-1)),p=!vg.test(F?F.toLowerCase():"")}h=p}if(h)O(o,"complete"),O(o,"success");else{o.o=6;try{var S=ln(o)>2?o.g.statusText:""}catch{S=""}o.l=S+" ["+o.ca()+"]",Dl(o)}}finally{ci(o)}}}}function ci(o,l){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const h=o.g;o.g=null,l||O(o,"ready");try{h.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ln(o){return o.g?o.g.readyState:0}n.ca=function(){try{return ln(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(o){if(this.g){var l=this.g.responseText;return o&&l.indexOf(o)==0&&(l=l.substring(o.length)),ze(l)}};function Vl(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function wg(o){const l={};o=(o.g&&ln(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(y(o[p]))continue;var h=ag(o[p]);const S=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();const C=l[S]||[];l[S]=C,C.push(h)}cr(l,function(p){return p.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ds(o,l,h){return h&&h.internalChannelParams&&h.internalChannelParams[o]||l}function kl(o){this.za=0,this.i=[],this.j=new rs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ds("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ds("baseRetryDelayMs",5e3,o),this.Za=ds("retryDelaySeedMs",1e4,o),this.Ta=ds("forwardChannelMaxRetries",2,o),this.va=ds("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new gl(o&&o.concurrentRequestLimit),this.Ba=new Tg,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=kl.prototype,n.ka=8,n.I=1,n.connect=function(o,l,h,p){Ze(0),this.W=o,this.H=l||{},h&&p!==void 0&&(this.H.OSID=h,this.H.OAID=p),this.F=this.X,this.J=$l(this,null,this.W),ui(this)};function jo(o){if(Ol(o),o.I==3){var l=o.V++,h=At(o.J);if(we(h,"SID",o.M),we(h,"RID",l),we(h,"TYPE","terminate"),ps(o,h),l=new on(o,o.j,l),l.M=2,l.A=oi(At(h)),h=!1,a.navigator&&a.navigator.sendBeacon)try{h=a.navigator.sendBeacon(l.A.toString(),"")}catch{}!h&&a.Image&&(new Image().src=l.A,h=!0),h||(l.g=ql(l.j,null),l.g.ea(l.A)),l.F=Date.now(),ii(l)}jl(o)}function li(o){o.g&&(qo(o),o.g.cancel(),o.g=null)}function Ol(o){li(o),o.v&&(a.clearTimeout(o.v),o.v=null),hi(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&a.clearTimeout(o.m),o.m=null)}function ui(o){if(!ml(o.h)&&!o.m){o.m=!0;var l=o.Ea;le||m(),ye||(le(),ye=!0),I.add(l,o),o.D=0}}function Ag(o,l){return _l(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=l.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=ns(f(o.Ea,o,l),Bl(o,o.D)),o.D++,!0)}n.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const S=new on(this,this.j,o);let C=this.o;if(this.U&&(C?(C=wt(C),Yr(C,this.U)):C=this.U),this.u!==null||this.R||(S.J=C,C=null),this.S)e:{for(var l=0,h=0;h<this.i.length;h++){t:{var p=this.i[h];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(l+=p,l>4096){l=h;break e}if(l===4096||h===this.i.length-1){l=h+1;break e}}l=1e3}else l=1e3;l=Ml(this,S,l),h=At(this.J),we(h,"RID",o),we(h,"CVER",22),this.G&&we(h,"X-HTTP-Session-Id",this.G),ps(this,h),C&&(this.R?l="headers="+ss(Cl(C))+"&"+l:this.u&&Bo(h,this.u,C)),Lo(this.h,S),this.Ra&&we(h,"TYPE","init"),this.S?(we(h,"$req",l),we(h,"SID","null"),S.U=!0,ko(S,h,null)):ko(S,h,l),this.I=2}}else this.I==3&&(o?xl(this,o):this.i.length==0||ml(this.h)||xl(this))};function xl(o,l){var h;l?h=l.l:h=o.V++;const p=At(o.J);we(p,"SID",o.M),we(p,"RID",h),we(p,"AID",o.K),ps(o,p),o.u&&o.o&&Bo(p,o.u,o.o),h=new on(o,o.j,h,o.D+1),o.u===null&&(h.J=o.o),l&&(o.i=l.G.concat(o.i)),l=Ml(o,h,1e3),h.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),Lo(o.h,h),ko(h,p,l)}function ps(o,l){o.H&&pt(o.H,function(h,p){we(l,p,h)}),o.l&&pt({},function(h,p){we(l,p,h)})}function Ml(o,l,h){h=Math.min(o.i.length,h);const p=o.l?f(o.l.Ka,o.l,o):null;e:{var S=o.i;let ie=-1;for(;;){const ke=["count="+h];ie==-1?h>0?(ie=S[0].g,ke.push("ofs="+ie)):ie=0:ke.push("ofs="+ie);let Ee=!0;for(let Ue=0;Ue<h;Ue++){var C=S[Ue].g;const bt=S[Ue].map;if(C-=ie,C<0)ie=Math.max(0,S[Ue].g-100),Ee=!1;else try{C="req"+C+"_"||"";try{var F=bt instanceof Map?bt:Object.entries(bt);for(const[Hn,un]of F){let hn=un;c(un)&&(hn=fe(un)),ke.push(C+Hn+"="+encodeURIComponent(hn))}}catch(Hn){throw ke.push(C+"type="+encodeURIComponent("_badmap")),Hn}}catch{p&&p(bt)}}if(Ee){F=ke.join("&");break e}}F=void 0}return o=o.i.splice(0,h),l.G=o,F}function Ll(o){if(!o.g&&!o.v){o.Y=1;var l=o.Da;le||m(),ye||(le(),ye=!0),I.add(l,o),o.A=0}}function $o(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=ns(f(o.Da,o),Bl(o,o.A)),o.A++,!0)}n.Da=function(){if(this.v=null,Fl(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=ns(f(this.Wa,this),o)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ze(10),li(this),Fl(this))};function qo(o){o.B!=null&&(a.clearTimeout(o.B),o.B=null)}function Fl(o){o.g=new on(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var l=At(o.na);we(l,"RID","rpc"),we(l,"SID",o.M),we(l,"AID",o.K),we(l,"CI",o.F?"0":"1"),!o.F&&o.ia&&we(l,"TO",o.ia),we(l,"TYPE","xmlhttp"),ps(o,l),o.u&&o.o&&Bo(l,o.u,o.o),o.O&&(o.g.H=o.O);var h=o.g;o=o.ba,h.M=1,h.A=oi(At(l)),h.u=null,h.R=!0,fl(h,o)}n.Va=function(){this.C!=null&&(this.C=null,li(this),$o(this),Ze(19))};function hi(o){o.C!=null&&(a.clearTimeout(o.C),o.C=null)}function Ul(o,l){var h=null;if(o.g==l){hi(o),qo(o),o.g=null;var p=2}else if(Mo(o.h,l))h=l.G,yl(o.h,l),p=1;else return;if(o.I!=0){if(l.o)if(p==1){h=l.u?l.u.length:0,l=Date.now()-l.F;var S=o.D;p=Bn(),O(p,new al(p,h)),ui(o)}else Ll(o);else if(S=l.m,S==3||S==0&&l.X>0||!(p==1&&Ag(o,l)||p==2&&$o(o)))switch(h&&h.length>0&&(l=o.h,l.i=l.i.concat(h)),S){case 1:qn(o,5);break;case 4:qn(o,10);break;case 3:qn(o,6);break;default:qn(o,2)}}}function Bl(o,l){let h=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(h*=2),h*l}function qn(o,l){if(o.j.info("Error code "+l),l==2){var h=f(o.bb,o),p=o.Ua;const S=!p;p=new an(p||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||os(p,"https"),oi(p),S?yg(p.toString(),h):Eg(p.toString(),h)}else Ze(2);o.I=0,o.l&&o.l.pa(l),jl(o),Ol(o)}n.bb=function(o){o?(this.j.info("Successfully pinged google.com"),Ze(2)):(this.j.info("Failed to ping google.com"),Ze(1))};function jl(o){if(o.I=0,o.ja=[],o.l){const l=El(o.h);(l.length!=0||o.i.length!=0)&&(L(o.ja,l),L(o.ja,o.i),o.h.i.length=0,R(o.i),o.i.length=0),o.l.oa()}}function $l(o,l,h){var p=h instanceof an?At(h):new an(h);if(p.g!="")l&&(p.g=l+"."+p.g),as(p,p.u);else{var S=a.location;p=S.protocol,l=l?l+"."+S.hostname:S.hostname,S=+S.port;const C=new an(null);p&&os(C,p),l&&(C.g=l),S&&as(C,S),h&&(C.h=h),p=C}return h=o.G,l=o.wa,h&&l&&we(p,h,l),we(p,"VER",o.ka),ps(o,p),p}function ql(o,l,h){if(l&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return l=o.Aa&&!o.ma?new Re(new Uo({ab:h})):new Re(o.ma),l.Fa(o.L),l}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hl(){}n=Hl.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function fi(){}fi.prototype.g=function(o,l){return new ht(o,l)};function ht(o,l){x.call(this),this.g=new kl(l),this.l=o,this.h=l&&l.messageUrlParams||null,o=l&&l.messageHeaders||null,l&&l.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=l&&l.initMessageHeaders||null,l&&l.messageContentType&&(o?o["X-WebChannel-Content-Type"]=l.messageContentType:o={"X-WebChannel-Content-Type":l.messageContentType}),l&&l.sa&&(o?o["X-WebChannel-Client-Profile"]=l.sa:o={"X-WebChannel-Client-Profile":l.sa}),this.g.U=o,(o=l&&l.Qb)&&!y(o)&&(this.g.u=o),this.A=l&&l.supportsCrossDomainXhr||!1,this.v=l&&l.sendRawJson||!1,(l=l&&l.httpSessionIdParam)&&!y(l)&&(this.g.G=l,o=this.h,o!==null&&l in o&&(o=this.h,l in o&&delete o[l])),this.j=new dr(this)}g(ht,x),ht.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ht.prototype.close=function(){jo(this.g)},ht.prototype.o=function(o){var l=this.g;if(typeof o=="string"){var h={};h.__data__=o,o=h}else this.v&&(h={},h.__data__=fe(o),o=h);l.i.push(new ug(l.Ya++,o)),l.I==3&&ui(l)},ht.prototype.N=function(){this.g.l=null,delete this.j,jo(this.g),delete this.g,ht.Z.N.call(this)};function zl(o){ur.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var l=o.__sm__;if(l){e:{for(const h in l){o=h;break e}o=void 0}(this.i=o)&&(o=this.i,l=l!==null&&o in l?l[o]:void 0),this.data=l}else this.data=o}g(zl,ur);function Kl(){$e.call(this),this.status=1}g(Kl,$e);function dr(o){this.g=o}g(dr,Hl),dr.prototype.ra=function(){O(this.g,"a")},dr.prototype.qa=function(o){O(this.g,new zl(o))},dr.prototype.pa=function(o){O(this.g,new Kl)},dr.prototype.oa=function(){O(this.g,"b")},fi.prototype.createWebChannel=fi.prototype.g,ht.prototype.send=ht.prototype.o,ht.prototype.open=ht.prototype.m,ht.prototype.close=ht.prototype.close,vd=function(){return new fi},Td=function(){return Bn()},Ed=Fe,xa={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},si.NO_ERROR=0,si.TIMEOUT=8,si.HTTP_ERROR=6,Ci=si,cl.COMPLETE="complete",yd=cl,ut.EventType=_t,_t.OPEN="a",_t.CLOSE="b",_t.ERROR="c",_t.MESSAGE="d",x.prototype.listen=x.prototype.J,ys=ut,Re.prototype.listenOnce=Re.prototype.K,Re.prototype.getLastError=Re.prototype.Ha,Re.prototype.getLastErrorCode=Re.prototype.ya,Re.prototype.getStatus=Re.prototype.ca,Re.prototype.getResponseJson=Re.prototype.La,Re.prototype.getResponseText=Re.prototype.la,Re.prototype.send=Re.prototype.ea,Re.prototype.setWithCredentials=Re.prototype.Fa,_d=Re}).apply(typeof _i<"u"?_i:typeof self<"u"?self:typeof window<"u"?window:{});const Uu="@firebase/firestore",Bu="4.9.2";class We{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}We.UNAUTHENTICATED=new We(null),We.GOOGLE_CREDENTIALS=new We("google-credentials-uid"),We.FIRST_PARTY=new We("first-party-uid"),We.MOCK_USER=new We("mock-user");let Gr="12.3.0";const rr=new bc("@firebase/firestore");function _r(){return rr.logLevel}function H(n,...e){if(rr.logLevel<=ae.DEBUG){const t=e.map(Cc);rr.debug(`Firestore (${Gr}): ${n}`,...t)}}function Zt(n,...e){if(rr.logLevel<=ae.ERROR){const t=e.map(Cc);rr.error(`Firestore (${Gr}): ${n}`,...t)}}function Lr(n,...e){if(rr.logLevel<=ae.WARN){const t=e.map(Cc);rr.warn(`Firestore (${Gr}): ${n}`,...t)}}function Cc(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function ne(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Id(n,r,t)}function Id(n,e,t){let r=`FIRESTORE (${Gr}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Zt(r),new Error(r)}function be(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||Id(e,s,r)}function he(n,e){return n}const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends rn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Yn{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class wd{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $E{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(We.UNAUTHENTICATED)))}shutdown(){}}class qE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class HE{constructor(e){this.t=e,this.currentUser=We.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){be(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve();let i=new Yn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Yn,e.enqueueRetryable((()=>s(this.currentUser)))};const a=()=>{const u=i;e.enqueueRetryable((async()=>{await u.promise,await s(this.currentUser)}))},c=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((u=>c(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Yn)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(be(typeof r.accessToken=="string",31837,{l:r}),new wd(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return be(e===null||typeof e=="string",2055,{h:e}),new We(e)}}class zE{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=We.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class KE{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new zE(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(We.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ju{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class GE{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Dt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){be(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ju(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(be(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ju(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function WE(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Ad{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=WE(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<t&&(r+=e.charAt(s[i]%62))}return r}}function ce(n,e){return n<e?-1:n>e?1:0}function Ma(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),i=e.charAt(r);if(s!==i)return ca(s)===ca(i)?ce(s,i):ca(s)?1:-1}return ce(n.length,e.length)}const QE=55296,JE=57343;function ca(n){const e=n.charCodeAt(0);return e>=QE&&e<=JE}function Fr(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}const $u="__name__";class Ct{constructor(e,t,r){t===void 0?t=0:t>e.length&&ne(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ne(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ct.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ct?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const i=Ct.compareSegments(e.get(s),t.get(s));if(i!==0)return i}return ce(e.length,t.length)}static compareSegments(e,t){const r=Ct.isNumericId(e),s=Ct.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Ct.extractNumericId(e).compare(Ct.extractNumericId(t)):Ma(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Sn.fromString(e.substring(4,e.length-2))}}class Ae extends Ct{construct(e,t,r){return new Ae(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new Ae(t)}static emptyPath(){return new Ae([])}}const YE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class st extends Ct{construct(e,t,r){return new st(e,t,r)}static isValidIdentifier(e){return YE.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),st.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$u}static keyField(){return new st([$u])}static fromServerFormat(e){const t=[];let r="",s=0;const i=()=>{if(r.length===0)throw new G(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new G(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new G(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(r+=c,s++):(i(),s++)}if(i(),a)throw new G(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new st(t)}static emptyPath(){return new st([])}}class Z{constructor(e){this.path=e}static fromPath(e){return new Z(Ae.fromString(e))}static fromName(e){return new Z(Ae.fromString(e).popFirst(5))}static empty(){return new Z(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ae.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Z(new Ae(e.slice()))}}function XE(n,e,t,r){if(e===!0&&r===!0)throw new G(U.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function qu(n){if(Z.isDocumentKey(n))throw new G(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ZE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function eT(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ne(12329,{type:typeof n})}function La(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new G(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=eT(n);throw new G(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Ve(n,e){const t={typeString:n};return e&&(t.value=e),t}function Js(n,e){if(!ZE(n))throw new G(U.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const a=n[r];if(s&&typeof a!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){t=`Expected '${r}' field to equal '${i.value}'`;break}}if(t)throw new G(U.INVALID_ARGUMENT,t);return!0}const Hu=-62135596800,zu=1e6;class Ne{static now(){return Ne.fromMillis(Date.now())}static fromDate(e){return Ne.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*zu);return new Ne(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new G(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new G(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Hu)throw new G(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/zu}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ne._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Js(e,Ne._jsonSchema))return new Ne(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Hu;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ne._jsonSchemaVersion="firestore/timestamp/1.0",Ne._jsonSchema={type:Ve("string",Ne._jsonSchemaVersion),seconds:Ve("number"),nanoseconds:Ve("number")};class te{static fromTimestamp(e){return new te(e)}static min(){return new te(new Ne(0,0))}static max(){return new te(new Ne(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const js=-1;function tT(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=te.fromTimestamp(r===1e9?new Ne(t+1,0):new Ne(t,r));return new Nn(s,Z.empty(),e)}function nT(n){return new Nn(n.readTime,n.key,js)}class Nn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Nn(te.min(),Z.empty(),js)}static max(){return new Nn(te.max(),Z.empty(),js)}}function rT(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Z.comparator(n.documentKey,e.documentKey),t!==0?t:ce(n.largestBatchId,e.largestBatchId))}const sT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function _o(n){if(n.code!==U.FAILED_PRECONDITION||n.message!==sT)throw n;H("LocalStore","Unexpectedly lost primary lease")}class D{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new D(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(t,i).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof D?t:D.resolve(t)}catch(t){return D.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):D.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):D.reject(t)}static resolve(e){return new D(((t,r)=>{t(e)}))}static reject(e){return new D(((t,r)=>{r(e)}))}static waitFor(e){return new D(((t,r)=>{let s=0,i=0,a=!1;e.forEach((c=>{++s,c.next((()=>{++i,a&&i===s&&t()}),(u=>r(u)))})),a=!0,i===s&&t()}))}static or(e){let t=D.resolve(!1);for(const r of e)t=t.next((s=>s?D.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,i)=>{r.push(t.call(this,s,i))})),this.waitFor(r)}static mapArray(e,t){return new D(((r,s)=>{const i=e.length,a=new Array(i);let c=0;for(let u=0;u<i;u++){const f=u;t(e[f]).next((d=>{a[f]=d,++c,c===i&&r(a)}),(d=>s(d)))}}))}static doWhile(e,t){return new D(((r,s)=>{const i=()=>{e()===!0?t().next((()=>{i()}),s):r()};i()}))}}function oT(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Wr(n){return n.name==="IndexedDbTransactionError"}class yo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}yo.ce=-1;const aT=-1;function Eo(n){return n==null}function Fa(n){return n===0&&1/n==-1/0}const bd="";function cT(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Ku(e)),e=lT(n.get(t),e);return Ku(e)}function lT(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const i=n.charAt(s);switch(i){case"\0":t+="";break;case bd:t+="";break;default:t+=i}}return t}function Ku(n){return n+bd+""}function Gu(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ys(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function uT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Pe{constructor(e,t){this.comparator=e,this.root=t||qe.EMPTY}insert(e,t){return new Pe(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qe.BLACK,null,null))}remove(e){return new Pe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qe.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yi(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yi(this.root,e,this.comparator,!1)}getReverseIterator(){return new yi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yi(this.root,e,this.comparator,!0)}}class yi{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qe{constructor(e,t,r,s,i){this.key=e,this.value=t,this.color=r??qe.RED,this.left=s??qe.EMPTY,this.right=i??qe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,i){return new qe(e??this.key,t??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,t,r),null):i===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return qe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return qe.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ne(27949);return e+(this.isRed()?0:1)}}qe.EMPTY=null,qe.RED=!0,qe.BLACK=!1;qe.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(e,t,r,s,i){return this}insert(e,t,r){return new qe(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class xe{constructor(e){this.comparator=e,this.data=new Pe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Wu(this.data.getIterator())}getIteratorFrom(e){return new Wu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof xe)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new xe(this.comparator);return t.data=e,t}}class Wu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Tn{constructor(e){this.fields=e,e.sort(st.comparator)}static empty(){return new Tn([])}unionWith(e){let t=new xe(st.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Tn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Fr(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class Sd extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class He{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Sd("Invalid base64 string: "+i):i}})(e);return new He(t)}static fromUint8Array(e){const t=(function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i})(e);return new He(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}He.EMPTY_BYTE_STRING=new He("");const hT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vn(n){if(be(!!n,39018),typeof n=="string"){let e=0;const t=hT.exec(n);if(be(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ce(n.seconds),nanos:Ce(n.nanos)}}function Ce(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function kn(n){return typeof n=="string"?He.fromBase64String(n):He.fromUint8Array(n)}const Rd="server_timestamp",Cd="__type__",Pd="__previous_value__",Dd="__local_write_time__";function Pc(n){return(n?.mapValue?.fields||{})[Cd]?.stringValue===Rd}function To(n){const e=n.mapValue.fields[Pd];return Pc(e)?To(e):e}function $s(n){const e=Vn(n.mapValue.fields[Dd].timestampValue);return new Ne(e.seconds,e.nanos)}class fT{constructor(e,t,r,s,i,a,c,u,f,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=f,this.isUsingEmulator=d}}const Ki="(default)";class qs{constructor(e,t){this.projectId=e,this.database=t||Ki}static empty(){return new qs("","")}get isDefaultDatabase(){return this.database===Ki}isEqual(e){return e instanceof qs&&e.projectId===this.projectId&&e.database===this.database}}const dT="__type__",pT="__max__",Ei={mapValue:{}},gT="__vector__",Ua="value";function On(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Pc(n)?4:_T(n)?9007199254740991:mT(n)?10:11:ne(28295,{value:n})}function Ut(n,e){if(n===e)return!0;const t=On(n);if(t!==On(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return $s(n).isEqual($s(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Vn(s.timestampValue),c=Vn(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,i){return kn(s.bytesValue).isEqual(kn(i.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,i){return Ce(s.geoPointValue.latitude)===Ce(i.geoPointValue.latitude)&&Ce(s.geoPointValue.longitude)===Ce(i.geoPointValue.longitude)})(n,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return Ce(s.integerValue)===Ce(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Ce(s.doubleValue),c=Ce(i.doubleValue);return a===c?Fa(a)===Fa(c):isNaN(a)&&isNaN(c)}return!1})(n,e);case 9:return Fr(n.arrayValue.values||[],e.arrayValue.values||[],Ut);case 10:case 11:return(function(s,i){const a=s.mapValue.fields||{},c=i.mapValue.fields||{};if(Gu(a)!==Gu(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!Ut(a[u],c[u])))return!1;return!0})(n,e);default:return ne(52216,{left:n})}}function Hs(n,e){return(n.values||[]).find((t=>Ut(t,e)))!==void 0}function Ur(n,e){if(n===e)return 0;const t=On(n),r=On(e);if(t!==r)return ce(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ce(n.booleanValue,e.booleanValue);case 2:return(function(i,a){const c=Ce(i.integerValue||i.doubleValue),u=Ce(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(n,e);case 3:return Qu(n.timestampValue,e.timestampValue);case 4:return Qu($s(n),$s(e));case 5:return Ma(n.stringValue,e.stringValue);case 6:return(function(i,a){const c=kn(i),u=kn(a);return c.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(i,a){const c=i.split("/"),u=a.split("/");for(let f=0;f<c.length&&f<u.length;f++){const d=ce(c[f],u[f]);if(d!==0)return d}return ce(c.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(i,a){const c=ce(Ce(i.latitude),Ce(a.latitude));return c!==0?c:ce(Ce(i.longitude),Ce(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Ju(n.arrayValue,e.arrayValue);case 10:return(function(i,a){const c=i.fields||{},u=a.fields||{},f=c[Ua]?.arrayValue,d=u[Ua]?.arrayValue,g=ce(f?.values?.length||0,d?.values?.length||0);return g!==0?g:Ju(f,d)})(n.mapValue,e.mapValue);case 11:return(function(i,a){if(i===Ei.mapValue&&a===Ei.mapValue)return 0;if(i===Ei.mapValue)return 1;if(a===Ei.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),f=a.fields||{},d=Object.keys(f);u.sort(),d.sort();for(let g=0;g<u.length&&g<d.length;++g){const T=Ma(u[g],d[g]);if(T!==0)return T;const R=Ur(c[u[g]],f[d[g]]);if(R!==0)return R}return ce(u.length,d.length)})(n.mapValue,e.mapValue);default:throw ne(23264,{he:t})}}function Qu(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ce(n,e);const t=Vn(n),r=Vn(e),s=ce(t.seconds,r.seconds);return s!==0?s:ce(t.nanos,r.nanos)}function Ju(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const i=Ur(t[s],r[s]);if(i)return i}return ce(t.length,r.length)}function Br(n){return Ba(n)}function Ba(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Vn(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return kn(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Z.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const i of t.values||[])s?s=!1:r+=",",r+=Ba(i);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Ba(t.fields[a])}`;return s+"}"})(n.mapValue):ne(61005,{value:n})}function Pi(n){switch(On(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=To(n);return e?16+Pi(e):16;case 5:return 2*n.stringValue.length;case 6:return kn(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+Pi(i)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return Ys(r.fields,((i,a)=>{s+=i.length+Pi(a)})),s})(n.mapValue);default:throw ne(13486,{value:n})}}function ja(n){return!!n&&"integerValue"in n}function Dc(n){return!!n&&"arrayValue"in n}function Yu(n){return!!n&&"nullValue"in n}function Xu(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function la(n){return!!n&&"mapValue"in n}function mT(n){return(n?.mapValue?.fields||{})[dT]?.stringValue===gT}function Ds(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ys(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Ds(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ds(n.arrayValue.values[t]);return e}return{...n}}function _T(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===pT}class Nt{constructor(e){this.value=e}static empty(){return new Nt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!la(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ds(t)}setAll(e){let t=st.emptyPath(),r={},s=[];e.forEach(((a,c)=>{if(!t.isImmediateParentOf(c)){const u=this.getFieldsMap(t);this.applyChanges(u,r,s),r={},s=[],t=c.popLast()}a?r[c.lastSegment()]=Ds(a):s.push(c.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,r,s)}delete(e){const t=this.field(e.popLast());la(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ut(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];la(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Ys(t,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new Nt(Ds(this.value))}}class Je{constructor(e,t,r,s,i,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Je(e,0,te.min(),te.min(),te.min(),Nt.empty(),0)}static newFoundDocument(e,t,r,s){return new Je(e,1,t,te.min(),r,s,0)}static newNoDocument(e,t){return new Je(e,2,t,te.min(),te.min(),Nt.empty(),0)}static newUnknownDocument(e,t){return new Je(e,3,t,te.min(),te.min(),Nt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Je&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Je(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Gi{constructor(e,t){this.position=e,this.inclusive=t}}function Zu(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const i=e[s],a=n.position[s];if(i.field.isKeyField()?r=Z.comparator(Z.fromName(a.referenceValue),t.key):r=Ur(a,t.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function eh(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ut(n.position[t],e.position[t]))return!1;return!0}class Wi{constructor(e,t="asc"){this.field=e,this.dir=t}}function yT(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Nd{}class Oe extends Nd{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new TT(e,t,r):t==="array-contains"?new wT(e,r):t==="in"?new AT(e,r):t==="not-in"?new bT(e,r):t==="array-contains-any"?new ST(e,r):new Oe(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new vT(e,r):new IT(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ur(t,this.value)):t!==null&&On(this.value)===On(t)&&this.matchesComparison(Ur(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bt extends Nd{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Bt(e,t)}matches(e){return Vd(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Vd(n){return n.op==="and"}function kd(n){return ET(n)&&Vd(n)}function ET(n){for(const e of n.filters)if(e instanceof Bt)return!1;return!0}function $a(n){if(n instanceof Oe)return n.field.canonicalString()+n.op.toString()+Br(n.value);if(kd(n))return n.filters.map((e=>$a(e))).join(",");{const e=n.filters.map((t=>$a(t))).join(",");return`${n.op}(${e})`}}function Od(n,e){return n instanceof Oe?(function(r,s){return s instanceof Oe&&r.op===s.op&&r.field.isEqual(s.field)&&Ut(r.value,s.value)})(n,e):n instanceof Bt?(function(r,s){return s instanceof Bt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,a,c)=>i&&Od(a,s.filters[c])),!0):!1})(n,e):void ne(19439)}function xd(n){return n instanceof Oe?(function(t){return`${t.field.canonicalString()} ${t.op} ${Br(t.value)}`})(n):n instanceof Bt?(function(t){return t.op.toString()+" {"+t.getFilters().map(xd).join(" ,")+"}"})(n):"Filter"}class TT extends Oe{constructor(e,t,r){super(e,t,r),this.key=Z.fromName(r.referenceValue)}matches(e){const t=Z.comparator(e.key,this.key);return this.matchesComparison(t)}}class vT extends Oe{constructor(e,t){super(e,"in",t),this.keys=Md("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class IT extends Oe{constructor(e,t){super(e,"not-in",t),this.keys=Md("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Md(n,e){return(e.arrayValue?.values||[]).map((t=>Z.fromName(t.referenceValue)))}class wT extends Oe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Dc(t)&&Hs(t.arrayValue,this.value)}}class AT extends Oe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Hs(this.value.arrayValue,t)}}class bT extends Oe{constructor(e,t){super(e,"not-in",t)}matches(e){if(Hs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Hs(this.value.arrayValue,t)}}class ST extends Oe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Dc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Hs(this.value.arrayValue,r)))}}class RT{constructor(e,t=null,r=[],s=[],i=null,a=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=c,this.Te=null}}function th(n,e=null,t=[],r=[],s=null,i=null,a=null){return new RT(n,e,t,r,s,i,a)}function Nc(n){const e=he(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>$a(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),Eo(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Br(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Br(r))).join(",")),e.Te=t}return e.Te}function Vc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!yT(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Od(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!eh(n.startAt,e.startAt)&&eh(n.endAt,e.endAt)}function qa(n){return Z.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class vo{constructor(e,t=null,r=[],s=[],i=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function CT(n,e,t,r,s,i,a,c){return new vo(n,e,t,r,s,i,a,c)}function Ld(n){return new vo(n)}function nh(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function PT(n){return n.collectionGroup!==null}function Ns(n){const e=he(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),t.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new xe(st.comparator);return a.filters.forEach((u=>{u.getFlattenedFilters().forEach((f=>{f.isInequality()&&(c=c.add(f.field))}))})),c})(e).forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Wi(i,r))})),t.has(st.keyField().canonicalString())||e.Ie.push(new Wi(st.keyField(),r))}return e.Ie}function xt(n){const e=he(n);return e.Ee||(e.Ee=DT(e,Ns(n))),e.Ee}function DT(n,e){if(n.limitType==="F")return th(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new Wi(s.field,i)}));const t=n.endAt?new Gi(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Gi(n.startAt.position,n.startAt.inclusive):null;return th(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Ha(n,e,t){return new vo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Io(n,e){return Vc(xt(n),xt(e))&&n.limitType===e.limitType}function Fd(n){return`${Nc(xt(n))}|lt:${n.limitType}`}function yr(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>xd(s))).join(", ")}]`),Eo(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>Br(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>Br(s))).join(",")),`Target(${r})`})(xt(n))}; limitType=${n.limitType})`}function wo(n,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Z.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(n,e)&&(function(r,s){for(const i of Ns(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(a,c,u){const f=Zu(a,c,u);return a.inclusive?f<=0:f<0})(r.startAt,Ns(r),s)||r.endAt&&!(function(a,c,u){const f=Zu(a,c,u);return a.inclusive?f>=0:f>0})(r.endAt,Ns(r),s))})(n,e)}function NT(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Ud(n){return(e,t)=>{let r=!1;for(const s of Ns(n)){const i=VT(s,e,t);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function VT(n,e,t){const r=n.field.isKeyField()?Z.comparator(e.key,t.key):(function(i,a,c){const u=a.data.field(i),f=c.data.field(i);return u!==null&&f!==null?Ur(u,f):ne(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ne(19790,{direction:n.dir})}}class ar{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ys(this.inner,((t,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return uT(this.inner)}size(){return this.innerSize}}const kT=new Pe(Z.comparator);function xn(){return kT}const Bd=new Pe(Z.comparator);function Es(...n){let e=Bd;for(const t of n)e=e.insert(t.key,t);return e}function OT(n){let e=Bd;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Qn(){return Vs()}function jd(){return Vs()}function Vs(){return new ar((n=>n.toString()),((n,e)=>n.isEqual(e)))}const xT=new xe(Z.comparator);function de(...n){let e=xT;for(const t of n)e=e.add(t);return e}const MT=new xe(ce);function LT(){return MT}function FT(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fa(e)?"-0":e}}function UT(n){return{integerValue:""+n}}class Ao{constructor(){this._=void 0}}function BT(n,e,t){return n instanceof za?(function(s,i){const a={fields:{[Cd]:{stringValue:Rd},[Dd]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Pc(i)&&(i=To(i)),i&&(a.fields[Pd]=i),{mapValue:a}})(t,e):n instanceof Qi?$d(n,e):n instanceof Ji?qd(n,e):(function(s,i){const a=$T(s,i),c=rh(a)+rh(s.Ae);return ja(a)&&ja(s.Ae)?UT(c):FT(s.serializer,c)})(n,e)}function jT(n,e,t){return n instanceof Qi?$d(n,e):n instanceof Ji?qd(n,e):t}function $T(n,e){return n instanceof Ka?(function(r){return ja(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class za extends Ao{}class Qi extends Ao{constructor(e){super(),this.elements=e}}function $d(n,e){const t=Hd(e);for(const r of n.elements)t.some((s=>Ut(s,r)))||t.push(r);return{arrayValue:{values:t}}}class Ji extends Ao{constructor(e){super(),this.elements=e}}function qd(n,e){let t=Hd(e);for(const r of n.elements)t=t.filter((s=>!Ut(s,r)));return{arrayValue:{values:t}}}class Ka extends Ao{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function rh(n){return Ce(n.integerValue||n.doubleValue)}function Hd(n){return Dc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function qT(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof Qi&&s instanceof Qi||r instanceof Ji&&s instanceof Ji?Fr(r.elements,s.elements,Ut):r instanceof Ka&&s instanceof Ka?Ut(r.Ae,s.Ae):r instanceof za&&s instanceof za})(n.transform,e.transform)}class Xn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xn}static exists(e){return new Xn(void 0,e)}static updateTime(e){return new Xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Di(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class kc{}function zd(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new zT(n.key,Xn.none()):new Oc(n.key,n.data,Xn.none());{const t=n.data,r=Nt.empty();let s=new xe(st.comparator);for(let i of e.fields)if(!s.has(i)){let a=t.field(i);a===null&&i.length>1&&(i=i.popLast(),a=t.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new bo(n.key,r,new Tn(s.toArray()),Xn.none())}}function HT(n,e,t){n instanceof Oc?(function(s,i,a){const c=s.value.clone(),u=ih(s.fieldTransforms,i,a.transformResults);c.setAll(u),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()})(n,e,t):n instanceof bo?(function(s,i,a){if(!Di(s.precondition,i))return void i.convertToUnknownDocument(a.version);const c=ih(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(Kd(s)),u.setAll(c),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(n,e,t):(function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function ks(n,e,t,r){return n instanceof Oc?(function(i,a,c,u){if(!Di(i.precondition,a))return c;const f=i.value.clone(),d=oh(i.fieldTransforms,u,a);return f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null})(n,e,t,r):n instanceof bo?(function(i,a,c,u){if(!Di(i.precondition,a))return c;const f=oh(i.fieldTransforms,u,a),d=a.data;return d.setAll(Kd(i)),d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((g=>g.field)))})(n,e,t,r):(function(i,a,c){return Di(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c})(n,e,t)}function sh(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Fr(r,s,((i,a)=>qT(i,a)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Oc extends kc{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class bo extends kc{constructor(e,t,r,s,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Kd(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function ih(n,e,t){const r=new Map;be(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const i=n[s],a=i.transform,c=e.data.field(i.field);r.set(i.field,jT(a,c,t[s]))}return r}function oh(n,e,t){const r=new Map;for(const s of n){const i=s.transform,a=t.data.field(s.field);r.set(s.field,BT(i,a,e))}return r}class zT extends kc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KT{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&HT(i,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ks(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ks(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=jd();return this.mutations.forEach((s=>{const i=e.get(s.key),a=i.overlayedDocument;let c=this.applyToLocalView(a,i.mutatedFields);c=t.has(s.key)?null:c;const u=zd(a,c);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(te.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),de())}isEqual(e){return this.batchId===e.batchId&&Fr(this.mutations,e.mutations,((t,r)=>sh(t,r)))&&Fr(this.baseMutations,e.baseMutations,((t,r)=>sh(t,r)))}}class GT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class WT{constructor(e,t){this.count=e,this.unchangedNames=t}}var De,ue;function Gd(n){if(n===void 0)return Zt("GRPC error has no .code"),U.UNKNOWN;switch(n){case De.OK:return U.OK;case De.CANCELLED:return U.CANCELLED;case De.UNKNOWN:return U.UNKNOWN;case De.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case De.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case De.INTERNAL:return U.INTERNAL;case De.UNAVAILABLE:return U.UNAVAILABLE;case De.UNAUTHENTICATED:return U.UNAUTHENTICATED;case De.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case De.NOT_FOUND:return U.NOT_FOUND;case De.ALREADY_EXISTS:return U.ALREADY_EXISTS;case De.PERMISSION_DENIED:return U.PERMISSION_DENIED;case De.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case De.ABORTED:return U.ABORTED;case De.OUT_OF_RANGE:return U.OUT_OF_RANGE;case De.UNIMPLEMENTED:return U.UNIMPLEMENTED;case De.DATA_LOSS:return U.DATA_LOSS;default:return ne(39323,{code:n})}}(ue=De||(De={}))[ue.OK=0]="OK",ue[ue.CANCELLED=1]="CANCELLED",ue[ue.UNKNOWN=2]="UNKNOWN",ue[ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ue[ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ue[ue.NOT_FOUND=5]="NOT_FOUND",ue[ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",ue[ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",ue[ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",ue[ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ue[ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ue[ue.ABORTED=10]="ABORTED",ue[ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",ue[ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",ue[ue.INTERNAL=13]="INTERNAL",ue[ue.UNAVAILABLE=14]="UNAVAILABLE",ue[ue.DATA_LOSS=15]="DATA_LOSS";function QT(){return new TextEncoder}const JT=new Sn([4294967295,4294967295],0);function ah(n){const e=QT().encode(n),t=new md;return t.update(e),new Uint8Array(t.digest())}function ch(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Sn([t,r],0),new Sn([s,i],0)]}class xc{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ts(`Invalid padding: ${t}`);if(r<0)throw new Ts(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ts(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ts(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Sn.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(Sn.fromNumber(r)));return s.compare(JT)===1&&(s=new Sn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=ah(e),[r,s]=ch(t);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new xc(i,s,t);return r.forEach((c=>a.insert(c))),a}insert(e){if(this.ge===0)return;const t=ah(e),[r,s]=ch(t);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Ts extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class So{constructor(e,t,r,s,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Xs.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new So(te.min(),s,new Pe(ce),xn(),de())}}class Xs{constructor(e,t,r,s,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Xs(r,t,de(),de(),de())}}class Ni{constructor(e,t,r,s){this.be=e,this.removedTargetIds=t,this.key=r,this.De=s}}class Wd{constructor(e,t){this.targetId=e,this.Ce=t}}class Qd{constructor(e,t,r=He.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class lh{constructor(){this.ve=0,this.Fe=uh(),this.Me=He.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=de(),t=de(),r=de();return this.Fe.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:ne(38017,{changeType:i})}})),new Xs(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=uh()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,be(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class YT{constructor(e){this.Ge=e,this.ze=new Map,this.je=xn(),this.Je=Ti(),this.He=Ti(),this.Ye=new Pe(ce)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:ne(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const i=s.target;if(qa(i))if(r===0){const a=new Z(i.path);this.et(t,a,Je.newNoDocument(a,te.min()))}else be(r===1,20013,{expectedCount:r});else{const a=this._t(t);if(a!==r){const c=this.ut(e),u=c?this.ct(c,e,a):1;if(u!==0){this.it(t);const f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=t;let a,c;try{a=kn(r).toUint8Array()}catch(u){if(u instanceof Sd)return Lr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new xc(a,s,i)}catch(u){return Lr(u instanceof Ts?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((i=>{const a=this.Ge.ht(),c=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(t,i,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((i,a)=>{const c=this.ot(a);if(c){if(i.current&&qa(c.target)){const u=new Z(c.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,Je.newNoDocument(u,e))}i.Be&&(t.set(a,i.ke()),i.qe())}}));let r=de();this.He.forEach(((i,a)=>{let c=!0;a.forEachWhile((u=>{const f=this.ot(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(i))})),this.je.forEach(((i,a)=>a.setReadTime(e)));const s=new So(e,t,this.Ye,this.je,r);return this.je=xn(),this.Je=Ti(),this.He=Ti(),this.Ye=new Pe(ce),s}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new lh,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new xe(ce),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new xe(ce),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||H("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new lh),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ti(){return new Pe(Z.comparator)}function uh(){return new Pe(Z.comparator)}const XT={asc:"ASCENDING",desc:"DESCENDING"},ZT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ev={and:"AND",or:"OR"};class tv{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ga(n,e){return n.useProto3Json||Eo(e)?e:{value:e}}function nv(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rv(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Rr(n){return be(!!n,49232),te.fromTimestamp((function(t){const r=Vn(t);return new Ne(r.seconds,r.nanos)})(n))}function sv(n,e){return Wa(n,e).canonicalString()}function Wa(n,e){const t=(function(s){return new Ae(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Jd(n){const e=Ae.fromString(n);return be(tp(e),10190,{key:e.toString()}),e}function ua(n,e){const t=Jd(e);if(t.get(1)!==n.databaseId.projectId)throw new G(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new G(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Z(Xd(t))}function Yd(n,e){return sv(n.databaseId,e)}function iv(n){const e=Jd(n);return e.length===4?Ae.emptyPath():Xd(e)}function hh(n){return new Ae(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Xd(n){return be(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function ov(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ne(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(f,d){return f.useProto3Json?(be(d===void 0||typeof d=="string",58123),He.fromBase64String(d||"")):(be(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),He.fromUint8Array(d||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&(function(f){const d=f.code===void 0?U.UNKNOWN:Gd(f.code);return new G(d,f.message||"")})(a);t=new Qd(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ua(n,r.document.name),i=Rr(r.document.updateTime),a=r.document.createTime?Rr(r.document.createTime):te.min(),c=new Nt({mapValue:{fields:r.document.fields}}),u=Je.newFoundDocument(s,i,a,c),f=r.targetIds||[],d=r.removedTargetIds||[];t=new Ni(f,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ua(n,r.document),i=r.readTime?Rr(r.readTime):te.min(),a=Je.newNoDocument(s,i),c=r.removedTargetIds||[];t=new Ni([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ua(n,r.document),i=r.removedTargetIds||[];t=new Ni([],i,s,null)}else{if(!("filter"in e))return ne(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new WT(s,i),c=r.targetId;t=new Wd(c,a)}}return t}function av(n,e){return{documents:[Yd(n,e.path)]}}function cv(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Yd(n,s);const i=(function(f){if(f.length!==0)return ep(Bt.create(f,"and"))})(e.filters);i&&(t.structuredQuery.where=i);const a=(function(f){if(f.length!==0)return f.map((d=>(function(T){return{field:Er(T.field),direction:hv(T.dir)}})(d)))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=Ga(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:s}}function lv(n){let e=iv(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){be(r===1,65062);const d=t.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];t.where&&(i=(function(g){const T=Zd(g);return T instanceof Bt&&kd(T)?T.getFilters():[T]})(t.where));let a=[];t.orderBy&&(a=(function(g){return g.map((T=>(function(L){return new Wi(Tr(L.field),(function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(T)))})(t.orderBy));let c=null;t.limit&&(c=(function(g){let T;return T=typeof g=="object"?g.value:g,Eo(T)?null:T})(t.limit));let u=null;t.startAt&&(u=(function(g){const T=!!g.before,R=g.values||[];return new Gi(R,T)})(t.startAt));let f=null;return t.endAt&&(f=(function(g){const T=!g.before,R=g.values||[];return new Gi(R,T)})(t.endAt)),CT(e,s,a,i,c,"F",u,f)}function uv(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Zd(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Tr(t.unaryFilter.field);return Oe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Tr(t.unaryFilter.field);return Oe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Tr(t.unaryFilter.field);return Oe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Tr(t.unaryFilter.field);return Oe.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Oe.create(Tr(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Bt.create(t.compositeFilter.filters.map((r=>Zd(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ne(1026)}})(t.compositeFilter.op))})(n):ne(30097,{filter:n})}function hv(n){return XT[n]}function fv(n){return ZT[n]}function dv(n){return ev[n]}function Er(n){return{fieldPath:n.canonicalString()}}function Tr(n){return st.fromServerFormat(n.fieldPath)}function ep(n){return n instanceof Oe?(function(t){if(t.op==="=="){if(Xu(t.value))return{unaryFilter:{field:Er(t.field),op:"IS_NAN"}};if(Yu(t.value))return{unaryFilter:{field:Er(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Xu(t.value))return{unaryFilter:{field:Er(t.field),op:"IS_NOT_NAN"}};if(Yu(t.value))return{unaryFilter:{field:Er(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Er(t.field),op:fv(t.op),value:t.value}}})(n):n instanceof Bt?(function(t){const r=t.getFilters().map((s=>ep(s)));return r.length===1?r[0]:{compositeFilter:{op:dv(t.op),filters:r}}})(n):ne(54877,{filter:n})}function tp(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class vn{constructor(e,t,r,s,i=te.min(),a=te.min(),c=He.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new vn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new vn(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class pv{constructor(e){this.yt=e}}function gv(n){const e=lv({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ha(e,e.limit,"L"):e}class mv{constructor(){this.Cn=new _v}addToCollectionParentIndex(e,t){return this.Cn.add(t),D.resolve()}getCollectionParents(e,t){return D.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return D.resolve()}deleteFieldIndex(e,t){return D.resolve()}deleteAllFieldIndexes(e){return D.resolve()}createTargetIndexes(e,t){return D.resolve()}getDocumentsMatchingTarget(e,t){return D.resolve(null)}getIndexType(e,t){return D.resolve(0)}getFieldIndexes(e,t){return D.resolve([])}getNextCollectionGroupToUpdate(e){return D.resolve(null)}getMinOffset(e,t){return D.resolve(Nn.min())}getMinOffsetFromCollectionGroup(e,t){return D.resolve(Nn.min())}updateCollectionGroup(e,t,r){return D.resolve()}updateIndexEntries(e,t){return D.resolve()}}class _v{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new xe(Ae.comparator),i=!s.has(r);return this.index[t]=s.add(r),i}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new xe(Ae.comparator)).toArray()}}const fh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},np=41943040;class at{static withCacheSize(e){return new at(e,at.DEFAULT_COLLECTION_PERCENTILE,at.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}at.DEFAULT_COLLECTION_PERCENTILE=10,at.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,at.DEFAULT=new at(np,at.DEFAULT_COLLECTION_PERCENTILE,at.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),at.DISABLED=new at(-1,0,0);class jr{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new jr(0)}static cr(){return new jr(-1)}}const dh="LruGarbageCollector",yv=1048576;function ph([n,e],[t,r]){const s=ce(n,t);return s===0?ce(e,r):s}class Ev{constructor(e){this.Ir=e,this.buffer=new xe(ph),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();ph(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Tv{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){H(dh,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Wr(t)?H(dh,"Ignoring IndexedDB error during garbage collection: ",t):await _o(t)}await this.Vr(3e5)}))}}class vv{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return D.resolve(yo.ce);const r=new Ev(t);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),D.resolve(fh)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fh):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,s,i,a,c,u,f;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),s=this.params.maximumSequenceNumbersToCollect):s=g,a=Date.now(),this.nthSequenceNumber(e,s)))).next((g=>(r=g,c=Date.now(),this.removeTargets(e,r,t)))).next((g=>(i=g,u=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(f=Date.now(),_r()<=ae.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(c-a)+`ms
	Removed ${i} targets in `+(u-c)+`ms
	Removed ${g} documents in `+(f-u)+`ms
Total Duration: ${f-d}ms`),D.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:g}))))}}function Iv(n,e){return new vv(n,e)}class wv{constructor(){this.changes=new ar((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Je.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?D.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Av{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class bv{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&ks(r.mutation,s,Tn.empty(),Ne.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,de()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=de()){const s=Qn();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((i=>{let a=Es();return i.forEach(((c,u)=>{a=a.insert(c,u.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){const r=Qn();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,de())))}populateOverlays(e,t,r){const s=[];return r.forEach((i=>{t.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((a,c)=>{t.set(a,c)}))}))}computeViews(e,t,r,s){let i=xn();const a=Vs(),c=(function(){return Vs()})();return t.forEach(((u,f)=>{const d=r.get(f.key);s.has(f.key)&&(d===void 0||d.mutation instanceof bo)?i=i.insert(f.key,f):d!==void 0?(a.set(f.key,d.mutation.getFieldMask()),ks(d.mutation,f,d.mutation.getFieldMask(),Ne.now())):a.set(f.key,Tn.empty())})),this.recalculateAndSaveOverlays(e,i).next((u=>(u.forEach(((f,d)=>a.set(f,d))),t.forEach(((f,d)=>c.set(f,new Av(d,a.get(f)??null)))),c)))}recalculateAndSaveOverlays(e,t){const r=Vs();let s=new Pe(((a,c)=>a-c)),i=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(const c of a)c.keys().forEach((u=>{const f=t.get(u);if(f===null)return;let d=r.get(u)||Tn.empty();d=c.applyToLocalView(f,d),r.set(u,d);const g=(s.get(c.batchId)||de()).add(u);s=s.insert(c.batchId,g)}))})).next((()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),f=u.key,d=u.value,g=jd();d.forEach((T=>{if(!i.has(T)){const R=zd(t.get(T),r.get(T));R!==null&&g.set(T,R),i=i.add(T)}})),a.push(this.documentOverlayCache.saveOverlays(e,f,g))}return D.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return(function(a){return Z.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):PT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-i.size):D.resolve(Qn());let c=js,u=i;return a.next((f=>D.forEach(f,((d,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),i.get(d)?D.resolve():this.remoteDocumentCache.getEntry(e,d).next((T=>{u=u.insert(d,T)}))))).next((()=>this.populateOverlays(e,f,i))).next((()=>this.computeViews(e,u,f,de()))).next((d=>({batchId:c,changes:OT(d)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Z(t)).next((r=>{let s=Es();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const i=t.collectionGroup;let a=Es();return this.indexManager.getCollectionParents(e,i).next((c=>D.forEach(c,(u=>{const f=(function(g,T){return new vo(T,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,f,r,s).next((d=>{d.forEach(((g,T)=>{a=a.insert(g,T)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i,s)))).next((a=>{i.forEach(((u,f)=>{const d=f.getKey();a.get(d)===null&&(a=a.insert(d,Je.newInvalidDocument(d)))}));let c=Es();return a.forEach(((u,f)=>{const d=i.get(u);d!==void 0&&ks(d.mutation,f,Tn.empty(),Ne.now()),wo(t,f)&&(c=c.insert(u,f))})),c}))}}class Sv{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return D.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Rr(s.createTime)}})(t)),D.resolve()}getNamedQuery(e,t){return D.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:gv(s.bundledQuery),readTime:Rr(s.readTime)}})(t)),D.resolve()}}class Rv{constructor(){this.overlays=new Pe(Z.comparator),this.qr=new Map}getOverlay(e,t){return D.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Qn();return D.forEach(t,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,i)=>{this.St(e,t,i)})),D.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),D.resolve()}getOverlaysForCollection(e,t,r){const s=Qn(),i=t.length+1,a=new Z(t.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,f=u.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return D.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let i=new Pe(((f,d)=>f-d));const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let d=i.get(f.largestBatchId);d===null&&(d=Qn(),i=i.insert(f.largestBatchId,d)),d.set(f.getKey(),f)}}const c=Qn(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((f,d)=>c.set(f,d))),!(c.size()>=s)););return D.resolve(c)}St(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new GT(t,r));let i=this.qr.get(t);i===void 0&&(i=de(),this.qr.set(t,i)),this.qr.set(t,i.add(r.key))}}class Cv{constructor(){this.sessionToken=He.EMPTY_BYTE_STRING}getSessionToken(e){return D.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,D.resolve()}}class Mc{constructor(){this.Qr=new xe(Be.$r),this.Ur=new xe(Be.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Be(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Be(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Z(new Ae([])),r=new Be(t,e),s=new Be(t,e+1),i=[];return this.Ur.forEachInRange([r,s],(a=>{this.Gr(a),i.push(a.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Z(new Ae([])),r=new Be(t,e),s=new Be(t,e+1);let i=de();return this.Ur.forEachInRange([r,s],(a=>{i=i.add(a.key)})),i}containsKey(e){const t=new Be(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Be{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Z.comparator(e.key,t.key)||ce(e.Yr,t.Yr)}static Kr(e,t){return ce(e.Yr,t.Yr)||Z.comparator(e.key,t.key)}}class Pv{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new xe(Be.$r)}checkEmpty(e){return D.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new KT(i,t,r,s);this.mutationQueue.push(a);for(const c of s)this.Zr=this.Zr.add(new Be(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return D.resolve(a)}lookupMutationBatch(e,t){return D.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.ei(r),i=s<0?0:s;return D.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return D.resolve(this.mutationQueue.length===0?aT:this.tr-1)}getAllMutationBatches(e){return D.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Be(t,0),s=new Be(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],(a=>{const c=this.Xr(a.Yr);i.push(c)})),D.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xe(ce);return t.forEach((s=>{const i=new Be(s,0),a=new Be(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],(c=>{r=r.add(c.Yr)}))})),D.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let i=r;Z.isDocumentKey(i)||(i=i.child(""));const a=new Be(new Z(i),0);let c=new xe(ce);return this.Zr.forEachWhile((u=>{const f=u.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(c=c.add(u.Yr)),!0)}),a),D.resolve(this.ti(c))}ti(e){const t=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){be(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return D.forEach(t.mutations,(s=>{const i=new Be(s.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Be(t,0),s=this.Zr.firstAfterOrEqual(r);return D.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,D.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Dv{constructor(e){this.ri=e,this.docs=(function(){return new Pe(Z.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return D.resolve(r?r.document.mutableCopy():Je.newInvalidDocument(t))}getEntries(e,t){let r=xn();return t.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Je.newInvalidDocument(s))})),D.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let i=xn();const a=t.path,c=new Z(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:f,value:{document:d}}=u.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||rT(nT(d),r)<=0||(s.has(d.key)||wo(t,d))&&(i=i.insert(d.key,d.mutableCopy()))}return D.resolve(i)}getAllFromCollectionGroup(e,t,r,s){ne(9500)}ii(e,t){return D.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new Nv(this)}getSize(e){return D.resolve(this.size)}}class Nv extends wv{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),D.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class Vv{constructor(e){this.persistence=e,this.si=new ar((t=>Nc(t)),Vc),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.oi=0,this._i=new Mc,this.targetCount=0,this.ai=jr.ur()}forEachTarget(e,t){return this.si.forEach(((r,s)=>t(s))),D.resolve()}getLastRemoteSnapshotVersion(e){return D.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return D.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),D.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),D.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new jr(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,D.resolve()}updateTargetData(e,t){return this.Pr(t),D.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,D.resolve()}removeTargets(e,t,r){let s=0;const i=[];return this.si.forEach(((a,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),D.waitFor(i).next((()=>s))}getTargetCount(e){return D.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return D.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),D.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const s=this.persistence.referenceDelegate,i=[];return s&&t.forEach((a=>{i.push(s.markPotentiallyOrphaned(e,a))})),D.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),D.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return D.resolve(r)}containsKey(e,t){return D.resolve(this._i.containsKey(t))}}class rp{constructor(e,t){this.ui={},this.overlays={},this.ci=new yo(0),this.li=!1,this.li=!0,this.hi=new Cv,this.referenceDelegate=e(this),this.Pi=new Vv(this),this.indexManager=new mv,this.remoteDocumentCache=(function(s){return new Dv(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new pv(t),this.Ii=new Sv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Rv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new Pv(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){H("MemoryPersistence","Starting transaction:",e);const s=new kv(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ai(e,t){return D.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class kv extends iT{constructor(e){super(),this.currentSequenceNumber=e}}class Lc{constructor(e){this.persistence=e,this.Ri=new Mc,this.Vi=null}static mi(e){return new Lc(e)}get fi(){if(this.Vi)return this.Vi;throw ne(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),D.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),D.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),D.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return D.forEach(this.fi,(r=>{const s=Z.fromPath(r);return this.gi(e,s).next((i=>{i||t.removeEntry(s,te.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return D.or([()=>D.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Yi{constructor(e,t){this.persistence=e,this.pi=new ar((r=>cT(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=Iv(this,t)}static mi(e,t){return new Yi(e,t)}Ei(){}di(e){return D.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return D.forEach(this.pi,((r,s)=>this.br(e,r,s).next((i=>i?D.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,(a=>this.br(e,a,t).next((c=>{c||(r++,i.removeEntry(a,te.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),D.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),D.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),D.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),D.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Pi(e.data.value)),t}br(e,t,r){return D.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return D.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Fc{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=s}static As(e,t){let r=de(),s=de();for(const i of t.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Fc(e,t.fromCache,r,s)}}class Ov{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class xv{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Iy()?8:oT(Xe())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const i={result:null};return this.ys(e,t).next((a=>{i.result=a})).next((()=>{if(!i.result)return this.ws(e,t,s,r).next((a=>{i.result=a}))})).next((()=>{if(i.result)return;const a=new Ov;return this.Ss(e,t,a).next((c=>{if(i.result=c,this.Vs)return this.bs(e,t,a,c.size)}))})).next((()=>i.result))}bs(e,t,r,s){return r.documentReadCount<this.fs?(_r()<=ae.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",yr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),D.resolve()):(_r()<=ae.DEBUG&&H("QueryEngine","Query:",yr(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(_r()<=ae.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",yr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xt(t))):D.resolve())}ys(e,t){if(nh(t))return D.resolve(null);let r=xt(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Ha(t,null,"F"),r=xt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const a=de(...i);return this.ps.getDocuments(e,a).next((c=>this.indexManager.getMinOffset(e,r).next((u=>{const f=this.Ds(t,c);return this.Cs(t,f,a,u.readTime)?this.ys(e,Ha(t,null,"F")):this.vs(e,f,t,u)}))))})))))}ws(e,t,r,s){return nh(t)||s.isEqual(te.min())?D.resolve(null):this.ps.getDocuments(e,r).next((i=>{const a=this.Ds(t,i);return this.Cs(t,a,r,s)?D.resolve(null):(_r()<=ae.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),yr(t)),this.vs(e,a,t,tT(s,js)).next((c=>c)))}))}Ds(e,t){let r=new xe(Ud(e));return t.forEach(((s,i)=>{wo(e,i)&&(r=r.add(i))})),r}Cs(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,t,r){return _r()<=ae.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",yr(t)),this.ps.getDocumentsMatchingQuery(e,t,Nn.min(),r)}vs(e,t,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((i=>(t.forEach((a=>{i=i.insert(a.key,a)})),i)))}}const Uc="LocalStore",Mv=3e8;class Lv{constructor(e,t,r,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new Pe(ce),this.xs=new ar((i=>Nc(i)),Vc),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bv(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function Fv(n,e,t,r){return new Lv(n,e,t,r)}async function sp(n,e){const t=he(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((i=>{const a=[],c=[];let u=de();for(const f of s){a.push(f.batchId);for(const d of f.mutations)u=u.add(d.key)}for(const f of i){c.push(f.batchId);for(const d of f.mutations)u=u.add(d.key)}return t.localDocuments.getDocuments(r,u).next((f=>({Ls:f,removedBatchIds:a,addedBatchIds:c})))}))}))}function ip(n){const e=he(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Uv(n,e){const t=he(n),r=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const a=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const c=[];e.targetChanges.forEach(((d,g)=>{const T=s.get(g);if(!T)return;c.push(t.Pi.removeMatchingKeys(i,d.removedDocuments,g).next((()=>t.Pi.addMatchingKeys(i,d.addedDocuments,g))));let R=T.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?R=R.withResumeToken(He.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):d.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(d.resumeToken,r)),s=s.insert(g,R),(function(B,j,K){return B.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=Mv?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(T,R,d)&&c.push(t.Pi.updateTargetData(i,R))}));let u=xn(),f=de();if(e.documentUpdates.forEach((d=>{e.resolvedLimboDocuments.has(d)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(i,d))})),c.push(Bv(i,a,e.documentUpdates).next((d=>{u=d.ks,f=d.qs}))),!r.isEqual(te.min())){const d=t.Pi.getLastRemoteSnapshotVersion(i).next((g=>t.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r)));c.push(d)}return D.waitFor(c).next((()=>a.apply(i))).next((()=>t.localDocuments.getLocalViewOfDocuments(i,u,f))).next((()=>u))})).then((i=>(t.Ms=s,i)))}function Bv(n,e,t){let r=de(),s=de();return t.forEach((i=>r=r.add(i))),e.getEntries(n,r).next((i=>{let a=xn();return t.forEach(((c,u)=>{const f=i.get(c);u.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(te.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):H(Uc,"Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",u.version)})),{ks:a,qs:s}}))}function jv(n,e){const t=he(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.Pi.getTargetData(r,e).next((i=>i?(s=i,D.resolve(s)):t.Pi.allocateTargetId(r).next((a=>(s=new vn(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Qa(n,e,t){const r=he(n),s=r.Ms.get(e),i=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",i,(a=>r.persistence.referenceDelegate.removeTarget(a,s)))}catch(a){if(!Wr(a))throw a;H(Uc,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function gh(n,e,t){const r=he(n);let s=te.min(),i=de();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(u,f,d){const g=he(u),T=g.xs.get(d);return T!==void 0?D.resolve(g.Ms.get(T)):g.Pi.getTargetData(f,d)})(r,a,xt(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,c.targetId).next((u=>{i=u}))})).next((()=>r.Fs.getDocumentsMatchingQuery(a,e,t?s:te.min(),t?i:de()))).next((c=>($v(r,NT(e),c),{documents:c,Qs:i})))))}function $v(n,e,t){let r=n.Os.get(e)||te.min();t.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),n.Os.set(e,r)}class mh{constructor(){this.activeTargetIds=LT()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qv{constructor(){this.Mo=new mh,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new mh,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Hv{Oo(e){}shutdown(){}}const _h="ConnectivityMonitor";class yh{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(_h,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){H(_h,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let vi=null;function Ja(){return vi===null?vi=(function(){return 268435456+Math.round(2147483648*Math.random())})():vi++,"0x"+vi.toString(16)}const ha="RestConnection",zv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Kv{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Ki?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,t,r,s,i){const a=Ja(),c=this.zo(e,t.toUriEncodedString());H(ha,`Sending RPC '${e}' ${a}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,i);const{host:f}=new URL(c),d=zr(f);return this.Jo(e,c,u,r,d).then((g=>(H(ha,`Received RPC '${e}' ${a}: `,g),g)),(g=>{throw Lr(ha,`RPC '${e}' ${a} failed with error: `,g,"url: ",c,"request:",r),g}))}Ho(e,t,r,s,i,a){return this.Go(e,t,r,s,i)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Gr})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,i)=>e[i]=s)),r&&r.headers.forEach(((s,i)=>e[i]=s))}zo(e,t){const r=zv[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class Gv{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Ge="WebChannelConnection";class Wv extends Kv{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,s,i){const a=Ja();return new Promise(((c,u)=>{const f=new _d;f.setWithCredentials(!0),f.listenOnce(yd.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Ci.NO_ERROR:const g=f.getResponseJson();H(Ge,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),c(g);break;case Ci.TIMEOUT:H(Ge,`RPC '${e}' ${a} timed out`),u(new G(U.DEADLINE_EXCEEDED,"Request time out"));break;case Ci.HTTP_ERROR:const T=f.getStatus();if(H(Ge,`RPC '${e}' ${a} failed with status:`,T,"response text:",f.getResponseText()),T>0){let R=f.getResponseJson();Array.isArray(R)&&(R=R[0]);const L=R?.error;if(L&&L.status&&L.message){const B=(function(K){const Q=K.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(Q)>=0?Q:U.UNKNOWN})(L.status);u(new G(B,L.message))}else u(new G(U.UNKNOWN,"Server responded with status "+f.getStatus()))}else u(new G(U.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{l_:e,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{H(Ge,`RPC '${e}' ${a} completed.`)}}));const d=JSON.stringify(s);H(Ge,`RPC '${e}' ${a} sending request:`,s),f.send(t,"POST",d,r,15)}))}T_(e,t,r){const s=Ja(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=vd(),c=Td(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const d=i.join("");H(Ge,`Creating RPC '${e}' stream ${s}: ${d}`,u);const g=a.createWebChannel(d,u);this.I_(g);let T=!1,R=!1;const L=new Gv({Yo:j=>{R?H(Ge,`Not sending because RPC '${e}' stream ${s} is closed:`,j):(T||(H(Ge,`Opening RPC '${e}' stream ${s} transport.`),g.open(),T=!0),H(Ge,`RPC '${e}' stream ${s} sending:`,j),g.send(j))},Zo:()=>g.close()}),B=(j,K,Q)=>{j.listen(K,(X=>{try{Q(X)}catch(z){setTimeout((()=>{throw z}),0)}}))};return B(g,ys.EventType.OPEN,(()=>{R||(H(Ge,`RPC '${e}' stream ${s} transport opened.`),L.o_())})),B(g,ys.EventType.CLOSE,(()=>{R||(R=!0,H(Ge,`RPC '${e}' stream ${s} transport closed`),L.a_(),this.E_(g))})),B(g,ys.EventType.ERROR,(j=>{R||(R=!0,Lr(Ge,`RPC '${e}' stream ${s} transport errored. Name:`,j.name,"Message:",j.message),L.a_(new G(U.UNAVAILABLE,"The operation could not be completed")))})),B(g,ys.EventType.MESSAGE,(j=>{if(!R){const K=j.data[0];be(!!K,16349);const Q=K,X=Q?.error||Q[0]?.error;if(X){H(Ge,`RPC '${e}' stream ${s} received error:`,X);const z=X.status;let le=(function(m){const E=De[m];if(E!==void 0)return Gd(E)})(z),ye=X.message;le===void 0&&(le=U.INTERNAL,ye="Unknown error status: "+z+" with message "+X.message),R=!0,L.a_(new G(le,ye)),g.close()}else H(Ge,`RPC '${e}' stream ${s} received:`,K),L.u_(K)}})),B(c,Ed.STAT_EVENT,(j=>{j.stat===xa.PROXY?H(Ge,`RPC '${e}' stream ${s} detected buffering proxy`):j.stat===xa.NOPROXY&&H(Ge,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{L.__()}),0),L}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function fa(){return typeof document<"u"?document:null}function op(n){return new tv(n,!0)}class ap{constructor(e,t,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Eh="PersistentStream";class Qv{constructor(e,t,r,s,i,a,c,u){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ap(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===U.RESOURCE_EXHAUSTED?(Zt(t.toString()),Zt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new G(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return H(Eh,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(H(Eh,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Jv extends Qv{constructor(e,t,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,a),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=ov(this.serializer,e),r=(function(i){if(!("targetChange"in i))return te.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?te.min():a.readTime?Rr(a.readTime):te.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=hh(this.serializer),t.addTarget=(function(i,a){let c;const u=a.target;if(c=qa(u)?{documents:av(i,u)}:{query:cv(i,u).ft},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=rv(i,a.resumeToken);const f=Ga(i,a.expectedCount);f!==null&&(c.expectedCount=f)}else if(a.snapshotVersion.compareTo(te.min())>0){c.readTime=nv(i,a.snapshotVersion.toTimestamp());const f=Ga(i,a.expectedCount);f!==null&&(c.expectedCount=f)}return c})(this.serializer,e);const r=uv(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=hh(this.serializer),t.removeTarget=e,this.q_(t)}}class Yv{}class Xv extends Yv{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new G(U.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Go(e,Wa(t,r),s,i,a))).catch((i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(U.UNKNOWN,i.toString())}))}Ho(e,t,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Ho(e,Wa(t,r),s,a,c,i))).catch((a=>{throw a.name==="FirebaseError"?(a.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new G(U.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Zv{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Zt(t),this.aa=!1):H("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const $r="RemoteStore";class eI{constructor(e,t,r,s,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((a=>{r.enqueueAndForget((async()=>{ei(this)&&(H($r,"Restarting streams for network reachability change."),await(async function(u){const f=he(u);f.Ea.add(4),await Zs(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Ro(f)})(this))}))})),this.Ra=new Zv(r,s)}}async function Ro(n){if(ei(n))for(const e of n.da)await e(!0)}async function Zs(n){for(const e of n.da)await e(!1)}function cp(n,e){const t=he(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),qc(t)?$c(t):Qr(t).O_()&&jc(t,e))}function Bc(n,e){const t=he(n),r=Qr(t);t.Ia.delete(e),r.O_()&&lp(t,e),t.Ia.size===0&&(r.O_()?r.L_():ei(t)&&t.Ra.set("Unknown"))}function jc(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Qr(n).Y_(e)}function lp(n,e){n.Va.Ue(e),Qr(n).Z_(e)}function $c(n){n.Va=new YT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Qr(n).start(),n.Ra.ua()}function qc(n){return ei(n)&&!Qr(n).x_()&&n.Ia.size>0}function ei(n){return he(n).Ea.size===0}function up(n){n.Va=void 0}async function tI(n){n.Ra.set("Online")}async function nI(n){n.Ia.forEach(((e,t)=>{jc(n,e)}))}async function rI(n,e){up(n),qc(n)?(n.Ra.ha(e),$c(n)):n.Ra.set("Unknown")}async function sI(n,e,t){if(n.Ra.set("Online"),e instanceof Qd&&e.state===2&&e.cause)try{await(async function(s,i){const a=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s.Ia.delete(c),s.Va.removeTarget(c))})(n,e)}catch(r){H($r,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Th(n,r)}else if(e instanceof Ni?n.Va.Ze(e):e instanceof Wd?n.Va.st(e):n.Va.tt(e),!t.isEqual(te.min()))try{const r=await ip(n.localStore);t.compareTo(r)>=0&&await(function(i,a){const c=i.Va.Tt(a);return c.targetChanges.forEach(((u,f)=>{if(u.resumeToken.approximateByteSize()>0){const d=i.Ia.get(f);d&&i.Ia.set(f,d.withResumeToken(u.resumeToken,a))}})),c.targetMismatches.forEach(((u,f)=>{const d=i.Ia.get(u);if(!d)return;i.Ia.set(u,d.withResumeToken(He.EMPTY_BYTE_STRING,d.snapshotVersion)),lp(i,u);const g=new vn(d.target,u,f,d.sequenceNumber);jc(i,g)})),i.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(r){H($r,"Failed to raise snapshot:",r),await Th(n,r)}}async function Th(n,e,t){if(!Wr(e))throw e;n.Ea.add(1),await Zs(n),n.Ra.set("Offline"),t||(t=()=>ip(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{H($r,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Ro(n)}))}async function vh(n,e){const t=he(n);t.asyncQueue.verifyOperationInProgress(),H($r,"RemoteStore received new credentials");const r=ei(t);t.Ea.add(3),await Zs(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Ro(t)}async function iI(n,e){const t=he(n);e?(t.Ea.delete(2),await Ro(t)):e||(t.Ea.add(2),await Zs(t),t.Ra.set("Unknown"))}function Qr(n){return n.ma||(n.ma=(function(t,r,s){const i=he(t);return i.sa(),new Jv(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(n.datastore,n.asyncQueue,{Xo:tI.bind(null,n),t_:nI.bind(null,n),r_:rI.bind(null,n),H_:sI.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),qc(n)?$c(n):n.Ra.set("Unknown")):(await n.ma.stop(),up(n))}))),n.ma}class Hc{constructor(e,t,r,s,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Yn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,i){const a=Date.now()+r,c=new Hc(e,t,a,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hp(n,e){if(Zt("AsyncQueue",`${e}: ${n}`),Wr(n))return new G(U.UNAVAILABLE,`${e}: ${n}`);throw n}class Cr{static emptySet(e){return new Cr(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Z.comparator(t.key,r.key):(t,r)=>Z.comparator(t.key,r.key),this.keyedMap=Es(),this.sortedSet=new Pe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Cr)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Cr;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Ih{constructor(){this.ga=new Pe(Z.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ne(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class qr{constructor(e,t,r,s,i,a,c,u,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,s,i){const a=[];return t.forEach((c=>{a.push({type:0,doc:c})})),new qr(e,t,Cr.emptySet(t),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Io(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class oI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class aI{constructor(){this.queries=wh(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=he(t),i=s.queries;s.queries=wh(),i.forEach(((a,c)=>{for(const u of c.Sa)u.onError(r)}))})(this,new G(U.ABORTED,"Firestore shutting down"))}}function wh(){return new ar((n=>Fd(n)),Io)}async function cI(n,e){const t=he(n);let r=3;const s=e.query;let i=t.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new oI,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await t.onListen(s,!0);break;case 1:i.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(a){const c=hp(a,`Initialization of query '${yr(e.query)}' failed`);return void e.onError(c)}t.queries.set(s,i),i.Sa.push(e),e.va(t.onlineState),i.wa&&e.Fa(i.wa)&&zc(t)}async function lI(n,e){const t=he(n),r=e.query;let s=3;const i=t.queries.get(r);if(i){const a=i.Sa.indexOf(e);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function uI(n,e){const t=he(n);let r=!1;for(const s of e){const i=s.query,a=t.queries.get(i);if(a){for(const c of a.Sa)c.Fa(s)&&(r=!0);a.wa=s}}r&&zc(t)}function hI(n,e,t){const r=he(n),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(t);r.queries.delete(e)}function zc(n){n.Ca.forEach((e=>{e.next()}))}var Ya,Ah;(Ah=Ya||(Ya={})).Ma="default",Ah.Cache="cache";class fI{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new qr(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=qr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ya.Cache}}class fp{constructor(e){this.key=e}}class dp{constructor(e){this.key=e}}class dI{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=de(),this.mutatedKeys=de(),this.eu=Ud(e),this.tu=new Cr(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new Ih,s=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,a=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((d,g)=>{const T=s.get(d),R=wo(this.query,g)?g:null,L=!!T&&this.mutatedKeys.has(T.key),B=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let j=!1;T&&R?T.data.isEqual(R.data)?L!==B&&(r.track({type:3,doc:R}),j=!0):this.su(T,R)||(r.track({type:2,doc:R}),j=!0,(u&&this.eu(R,u)>0||f&&this.eu(R,f)<0)&&(c=!0)):!T&&R?(r.track({type:0,doc:R}),j=!0):T&&!R&&(r.track({type:1,doc:T}),j=!0,(u||f)&&(c=!0)),j&&(R?(a=a.add(R),i=B?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:a,iu:r,Cs:c,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((d,g)=>(function(R,L){const B=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne(20277,{Rt:j})}};return B(R)-B(L)})(d.type,g.type)||this.eu(d.doc,g.doc))),this.ou(r),s=s??!1;const c=t&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,f=u!==this.Za;return this.Za=u,a.length!==0||f?{snapshot:new qr(this.query,e.tu,i,a,e.mutatedKeys,u===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ih,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=de(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new dp(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new fp(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=de();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return qr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Kc="SyncEngine";class pI{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class gI{constructor(e){this.key=e,this.hu=!1}}class mI{constructor(e,t,r,s,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new ar((c=>Fd(c)),Io),this.Iu=new Map,this.Eu=new Set,this.du=new Pe(Z.comparator),this.Au=new Map,this.Ru=new Mc,this.Vu={},this.mu=new Map,this.fu=jr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _I(n,e,t=!0){const r=yp(n);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await pp(r,e,t,!0),s}async function yI(n,e){const t=yp(n);await pp(t,e,!0,!1)}async function pp(n,e,t,r){const s=await jv(n.localStore,xt(e)),i=s.targetId,a=n.sharedClientState.addLocalQueryTarget(i,t);let c;return r&&(c=await EI(n,e,i,a==="current",s.resumeToken)),n.isPrimaryClient&&t&&cp(n.remoteStore,s),c}async function EI(n,e,t,r,s){n.pu=(g,T,R)=>(async function(B,j,K,Q){let X=j.view.ru(K);X.Cs&&(X=await gh(B.localStore,j.query,!1).then((({documents:I})=>j.view.ru(I,X))));const z=Q&&Q.targetChanges.get(j.targetId),le=Q&&Q.targetMismatches.get(j.targetId)!=null,ye=j.view.applyChanges(X,B.isPrimaryClient,z,le);return Sh(B,j.targetId,ye.au),ye.snapshot})(n,g,T,R);const i=await gh(n.localStore,e,!0),a=new dI(e,i.Qs),c=a.ru(i.documents),u=Xs.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),f=a.applyChanges(c,n.isPrimaryClient,u);Sh(n,t,f.au);const d=new pI(e,t,a);return n.Tu.set(e,d),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function TI(n,e,t){const r=he(n),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((a=>!Io(a,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Qa(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Bc(r.remoteStore,s.targetId),Xa(r,s.targetId)})).catch(_o)):(Xa(r,s.targetId),await Qa(r.localStore,s.targetId,!0))}async function vI(n,e){const t=he(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Bc(t.remoteStore,r.targetId))}async function gp(n,e){const t=he(n);try{const r=await Uv(t.localStore,e);e.targetChanges.forEach(((s,i)=>{const a=t.Au.get(i);a&&(be(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?be(a.hu,14607):s.removedDocuments.size>0&&(be(a.hu,42227),a.hu=!1))})),await _p(t,r,e)}catch(r){await _o(r)}}function bh(n,e,t){const r=he(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((i,a)=>{const c=a.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(a,c){const u=he(a);u.onlineState=c;let f=!1;u.queries.forEach(((d,g)=>{for(const T of g.Sa)T.va(c)&&(f=!0)})),f&&zc(u)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function II(n,e,t){const r=he(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new Pe(Z.comparator);a=a.insert(i,Je.newNoDocument(i,te.min()));const c=de().add(i),u=new So(te.min(),new Map,new Pe(ce),a,c);await gp(r,u),r.du=r.du.remove(i),r.Au.delete(e),Gc(r)}else await Qa(r.localStore,e,!1).then((()=>Xa(r,e,t))).catch(_o)}function Xa(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||mp(n,r)}))}function mp(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Bc(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Gc(n))}function Sh(n,e,t){for(const r of t)r instanceof fp?(n.Ru.addReference(r.key,e),wI(n,r)):r instanceof dp?(H(Kc,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||mp(n,r.key)):ne(19791,{wu:r})}function wI(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(H(Kc,"New document in limbo: "+t),n.Eu.add(r),Gc(n))}function Gc(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Z(Ae.fromString(e)),r=n.fu.next();n.Au.set(r,new gI(t)),n.du=n.du.insert(t,r),cp(n.remoteStore,new vn(xt(Ld(t.path)),r,"TargetPurposeLimboResolution",yo.ce))}}async function _p(n,e,t){const r=he(n),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,u)=>{a.push(r.pu(u,e,t).then((f=>{if((f||t)&&r.isPrimaryClient){const d=f?!f.fromCache:t?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,d?"current":"not-current")}if(f){s.push(f);const d=Fc.As(u.targetId,f);i.push(d)}})))})),await Promise.all(a),r.Pu.H_(s),await(async function(u,f){const d=he(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>D.forEach(f,(T=>D.forEach(T.Es,(R=>d.persistence.referenceDelegate.addReference(g,T.targetId,R))).next((()=>D.forEach(T.ds,(R=>d.persistence.referenceDelegate.removeReference(g,T.targetId,R)))))))))}catch(g){if(!Wr(g))throw g;H(Uc,"Failed to update sequence numbers: "+g)}for(const g of f){const T=g.targetId;if(!g.fromCache){const R=d.Ms.get(T),L=R.snapshotVersion,B=R.withLastLimboFreeSnapshotVersion(L);d.Ms=d.Ms.insert(T,B)}}})(r.localStore,i))}async function AI(n,e){const t=he(n);if(!t.currentUser.isEqual(e)){H(Kc,"User change. New user:",e.toKey());const r=await sp(t.localStore,e);t.currentUser=e,(function(i,a){i.mu.forEach((c=>{c.forEach((u=>{u.reject(new G(U.CANCELLED,a))}))})),i.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await _p(t,r.Ls)}}function bI(n,e){const t=he(n),r=t.Au.get(e);if(r&&r.hu)return de().add(r.key);{let s=de();const i=t.Iu.get(e);if(!i)return s;for(const a of i){const c=t.Tu.get(a);s=s.unionWith(c.view.nu)}return s}}function yp(n){const e=he(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=gp.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=II.bind(null,e),e.Pu.H_=uI.bind(null,e.eventManager),e.Pu.yu=hI.bind(null,e.eventManager),e}class Xi{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=op(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Fv(this.persistence,new xv,e.initialUser,this.serializer)}Cu(e){return new rp(Lc.mi,this.serializer)}Du(e){return new qv}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xi.provider={build:()=>new Xi};class SI extends Xi{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){be(this.persistence.referenceDelegate instanceof Yi,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Tv(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?at.withCacheSize(this.cacheSizeBytes):at.DEFAULT;return new rp((r=>Yi.mi(r,t)),this.serializer)}}class Za{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>bh(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=AI.bind(null,this.syncEngine),await iI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new aI})()}createDatastore(e){const t=op(e.databaseInfo.databaseId),r=(function(i){return new Wv(i)})(e.databaseInfo);return(function(i,a,c,u){return new Xv(i,a,c,u)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,i,a,c){return new eI(r,s,i,a,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>bh(this.syncEngine,t,0)),(function(){return yh.v()?new yh:new Hv})())}createSyncEngine(e,t){return(function(s,i,a,c,u,f,d){const g=new mI(s,i,a,c,u,f);return d&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=he(t);H($r,"RemoteStore shutting down."),r.Ea.add(5),await Zs(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Za.provider={build:()=>new Za};class RI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Zt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Mn="FirestoreClient";class CI{constructor(e,t,r,s,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=We.UNAUTHENTICATED,this.clientId=Ad.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async a=>{H(Mn,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(H(Mn,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=hp(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function da(n,e){n.asyncQueue.verifyOperationInProgress(),H(Mn,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await sp(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Rh(n,e){n.asyncQueue.verifyOperationInProgress();const t=await PI(n);H(Mn,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>vh(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>vh(e.remoteStore,s))),n._onlineComponents=e}async function PI(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){H(Mn,"Using user provided OfflineComponentProvider");try{await da(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Lr("Error using user provided cache. Falling back to memory cache: "+t),await da(n,new Xi)}}else H(Mn,"Using default OfflineComponentProvider"),await da(n,new SI(void 0));return n._offlineComponents}async function DI(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(H(Mn,"Using user provided OnlineComponentProvider"),await Rh(n,n._uninitializedComponentsProvider._online)):(H(Mn,"Using default OnlineComponentProvider"),await Rh(n,new Za))),n._onlineComponents}async function NI(n){const e=await DI(n),t=e.eventManager;return t.onListen=_I.bind(null,e.syncEngine),t.onUnlisten=TI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=yI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=vI.bind(null,e.syncEngine),t}function VI(n,e,t={}){const r=new Yn;return n.asyncQueue.enqueueAndForget((async()=>(function(i,a,c,u,f){const d=new RI({next:T=>{d.Nu(),a.enqueueAndForget((()=>lI(i,g))),T.fromCache&&u.source==="server"?f.reject(new G(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(T)},error:T=>f.reject(T)}),g=new fI(c,d,{includeMetadataChanges:!0,qa:!0});return cI(i,g)})(await NI(n),n.asyncQueue,e,t,r))),r.promise}function Ep(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const Ch=new Map;const Tp="firestore.googleapis.com",Ph=!0;class Dh{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new G(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Tp,this.ssl=Ph}else this.host=e.host,this.ssl=e.ssl??Ph;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=np;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<yv)throw new G(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ep(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new G(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new G(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new G(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wc{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dh(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new $E;switch(r.type){case"firstParty":return new KE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Ch.get(t);r&&(H("ComponentProvider","Removing Datastore"),Ch.delete(t),r.terminate())})(this),Promise.resolve()}}function kI(n,e,t,r={}){n=La(n,Wc);const s=zr(e),i=n._getSettings(),a={...i,emulatorOptions:n._getEmulatorOptions()},c=`${e}:${t}`;s&&(cd(`https://${c}`),ld("Firestore",!0)),i.host!==Tp&&i.host!==c&&Lr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:c,ssl:s,emulatorOptions:r};if(!tr(u,a)&&(n._setSettings(u),r.mockUserToken)){let f,d;if(typeof r.mockUserToken=="string")f=r.mockUserToken,d=We.MOCK_USER;else{f=dy(r.mockUserToken,n._app?.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new G(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new We(g)}n._authCredentials=new qE(new wd(f,d))}}class Co{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Co(this.firestore,e,this._query)}}class mt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mt(this.firestore,e,this._key)}toJSON(){return{type:mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Js(t,mt._jsonSchema))return new mt(e,r||null,new Z(Ae.fromString(t.referencePath)))}}mt._jsonSchemaVersion="firestore/documentReference/1.0",mt._jsonSchema={type:Ve("string",mt._jsonSchemaVersion),referencePath:Ve("string")};class Pr extends Co{constructor(e,t,r){super(e,t,Ld(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mt(this.firestore,null,new Z(e))}withConverter(e){return new Pr(this.firestore,e,this._path)}}function OI(n,e,...t){if(n=or(n),n instanceof Wc){const r=Ae.fromString(e,...t);return qu(r),new Pr(n,null,r)}{if(!(n instanceof mt||n instanceof Pr))throw new G(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ae.fromString(e,...t));return qu(r),new Pr(n.firestore,null,r)}}const Nh="AsyncQueue";class Vh{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ap(this,"async_queue_retry"),this._c=()=>{const r=fa();r&&H(Nh,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=fa();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=fa();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Yn;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Wr(e))throw e;H(Nh,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Zt("INTERNAL UNHANDLED ERROR: ",kh(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=Hc.createAndSchedule(this,e,t,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&ne(47125,{Pc:kh(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function kh(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class vp extends Wc{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new Vh,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Vh(e),this._firestoreClient=void 0,await e}}}function xI(n,e){const t=typeof n=="object"?n:dd(),r=typeof n=="string"?n:Ki,s=Rc(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=hy("firestore");i&&kI(s,...i)}return s}function MI(n){if(n._terminated)throw new G(U.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||LI(n),n._firestoreClient}function LI(n){const e=n._freezeSettings(),t=(function(s,i,a,c){return new fT(s,i,a,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,Ep(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new CI(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(n._componentsProvider))}class Vt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vt(He.fromBase64String(e))}catch(t){throw new G(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Vt(He.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Js(e,Vt._jsonSchema))return Vt.fromBase64String(e.bytes)}}Vt._jsonSchemaVersion="firestore/bytes/1.0",Vt._jsonSchema={type:Ve("string",Vt._jsonSchemaVersion),bytes:Ve("string")};class Ip{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new G(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new st(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Rn{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new G(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new G(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Rn._jsonSchemaVersion}}static fromJSON(e){if(Js(e,Rn._jsonSchema))return new Rn(e.latitude,e.longitude)}}Rn._jsonSchemaVersion="firestore/geoPoint/1.0",Rn._jsonSchema={type:Ve("string",Rn._jsonSchemaVersion),latitude:Ve("number"),longitude:Ve("number")};class Cn{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Cn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Js(e,Cn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Cn(e.vectorValues);throw new G(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Cn._jsonSchemaVersion="firestore/vectorValue/1.0",Cn._jsonSchema={type:Ve("string",Cn._jsonSchemaVersion),vectorValues:Ve("object")};const FI=new RegExp("[~\\*/\\[\\]]");function UI(n,e,t){if(e.search(FI)>=0)throw Oh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n);try{return new Ip(...e.split("."))._internalPath}catch{throw Oh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n)}}function Oh(n,e,t,r,s){let i=`Function ${e}() called with invalid data`;i+=". ";let a="";return new G(U.INVALID_ARGUMENT,i+n+a)}class wp{constructor(e,t,r,s,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new BI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ap("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class BI extends wp{data(){return super.data()}}function Ap(n,e){return typeof e=="string"?UI(n,e):e instanceof Ip?e._internalPath:e._delegate._internalPath}function jI(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new G(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $I{convertValue(e,t="none"){switch(On(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ce(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(kn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ne(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ys(e,((s,i)=>{r[s]=this.convertValue(i,t)})),r}convertVectorValue(e){const t=e.fields?.[Ua].arrayValue?.values?.map((r=>Ce(r.doubleValue)));return new Cn(t)}convertGeoPoint(e){return new Rn(Ce(e.latitude),Ce(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=To(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp($s(e));default:return null}}convertTimestamp(e){const t=Vn(e);return new Ne(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ae.fromString(e);be(tp(r),9688,{name:e});const s=new qs(r.get(1),r.get(3)),i=new Z(r.popFirst(5));return s.isEqual(t)||Zt(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}class Ii{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dr extends wp{constructor(e,t,r,s,i,a){super(e,t,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Vi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Ap("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new G(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Dr._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Dr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Dr._jsonSchema={type:Ve("string",Dr._jsonSchemaVersion),bundleSource:Ve("string","DocumentSnapshot"),bundleName:Ve("string"),bundle:Ve("string")};class Vi extends Dr{data(e={}){return super.data(e)}}class Nr{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Ii(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Vi(this._firestore,this._userDataWriter,r.key,r,new Ii(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new G(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map((c=>{const u=new Vi(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Ii(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}}))}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>i||c.type!==3)).map((c=>{const u=new Vi(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Ii(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,d=-1;return c.type!==0&&(f=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),d=a.indexOf(c.doc.key)),{type:qI(c.type),doc:u,oldIndex:f,newIndex:d}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new G(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Nr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ad.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(t.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function qI(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne(61501,{type:n})}}Nr._jsonSchemaVersion="firestore/querySnapshot/1.0",Nr._jsonSchema={type:Ve("string",Nr._jsonSchemaVersion),bundleSource:Ve("string","QuerySnapshot"),bundleName:Ve("string"),bundle:Ve("string")};class HI extends $I{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vt(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mt(this.firestore,null,t)}}function zI(n){n=La(n,Co);const e=La(n.firestore,vp),t=MI(e),r=new HI(e);return jI(n._query),VI(t,n._query).then((s=>new Nr(e,r,n,s)))}(function(e,t=!0){(function(s){Gr=s})(Kr),Mr(new nr("firestore",((r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),c=new vp(new HE(r.getProvider("auth-internal")),new GE(a,r.getProvider("app-check-internal")),(function(f,d){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new G(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qs(f.options.projectId,d)})(a,s),a);return i={useFetchStreams:t,...i},c._setSettings(i),c}),"PUBLIC").setMultipleInstances(!0)),bn(Uu,Bu,e),bn(Uu,Bu,"esm2020")})();function bp(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KI=bp,Sp=new Ws("auth","Firebase",bp());const Zi=new bc("@firebase/auth");function GI(n,...e){Zi.logLevel<=ae.WARN&&Zi.warn(`Auth (${Kr}): ${n}`,...e)}function ki(n,...e){Zi.logLevel<=ae.ERROR&&Zi.error(`Auth (${Kr}): ${n}`,...e)}function en(n,...e){throw Qc(n,...e)}function Mt(n,...e){return Qc(n,...e)}function Rp(n,e,t){const r={...KI(),[e]:t};return new Ws("auth","Firebase",r).create(e,{appName:n.name})}function Zn(n){return Rp(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Qc(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Sp.create(n,...e)}function ee(n,e,...t){if(!n)throw Qc(e,...t)}function Gt(n){const e="INTERNAL ASSERTION FAILED: "+n;throw ki(e),new Error(e)}function tn(n,e){n||Gt(e)}function ec(){return typeof self<"u"&&self.location?.href||""}function WI(){return xh()==="http:"||xh()==="https:"}function xh(){return typeof self<"u"&&self.location?.protocol||null}function QI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WI()||Ey()||"connection"in navigator)?navigator.onLine:!0}function JI(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class ti{constructor(e,t){this.shortDelay=e,this.longDelay=t,tn(t>e,"Short delay should be less than long delay!"),this.isMobile=my()||Ty()}get(){return QI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Jc(n,e){tn(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class Cp{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const YI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const XI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ZI=new ti(3e4,6e4);function Yc(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Jr(n,e,t,r,s={}){return Pp(n,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const c=Qs({key:n.config.apiKey,...a}).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:u,...i};return yy()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&zr(n.emulatorConfig.host)&&(f.credentials="include"),Cp.fetch()(await Dp(n,n.config.apiHost,t,c),f)})}async function Pp(n,e,t){n._canInitEmulator=!1;const r={...YI,...e};try{const s=new tw(n),i=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw wi(n,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const c=i.ok?a.errorMessage:a.error.message,[u,f]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw wi(n,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw wi(n,"email-already-in-use",a);if(u==="USER_DISABLED")throw wi(n,"user-disabled",a);const d=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw Rp(n,d,f);en(n,d)}}catch(s){if(s instanceof rn)throw s;en(n,"network-request-failed",{message:String(s)})}}async function ew(n,e,t,r,s={}){const i=await Jr(n,e,t,r,s);return"mfaPendingCredential"in i&&en(n,"multi-factor-auth-required",{_serverResponse:i}),i}async function Dp(n,e,t,r){const s=`${e}${t}?${r}`,i=n,a=i.config.emulator?Jc(n.config,s):`${n.config.apiScheme}://${s}`;return XI.includes(t)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}class tw{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Mt(this.auth,"network-request-failed")),ZI.get())})}}function wi(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Mt(n,e,r);return s.customData._tokenResponse=t,s}async function nw(n,e){return Jr(n,"POST","/v1/accounts:delete",e)}async function eo(n,e){return Jr(n,"POST","/v1/accounts:lookup",e)}function Os(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function rw(n,e=!1){const t=or(n),r=await t.getIdToken(e),s=Xc(r);ee(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i?.sign_in_provider;return{claims:s,token:r,authTime:Os(pa(s.auth_time)),issuedAtTime:Os(pa(s.iat)),expirationTime:Os(pa(s.exp)),signInProvider:a||null,signInSecondFactor:i?.sign_in_second_factor||null}}function pa(n){return Number(n)*1e3}function Xc(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return ki("JWT malformed, contained fewer than 3 sections"),null;try{const s=sd(t);return s?JSON.parse(s):(ki("Failed to decode base64 JWT payload"),null)}catch(s){return ki("Caught error parsing JWT payload as JSON",s?.toString()),null}}function Mh(n){const e=Xc(n);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function zs(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof rn&&sw(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function sw({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class iw{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class tc{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Os(this.lastLoginAt),this.creationTime=Os(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function to(n){const e=n.auth,t=await n.getIdToken(),r=await zs(n,eo(e,{idToken:t}));ee(r?.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const i=s.providerUserInfo?.length?Np(s.providerUserInfo):[],a=aw(n.providerData,i),c=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!a?.length,f=c?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new tc(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,d)}async function ow(n){const e=or(n);await to(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function aw(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Np(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function cw(n,e){const t=await Pp(n,{},async()=>{const r=Qs({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=n.config,a=await Dp(n,s,"/v1/token",`key=${i}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return n.emulatorConfig&&zr(n.emulatorConfig.host)&&(u.credentials="include"),Cp.fetch()(a,u)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function lw(n,e){return Jr(n,"POST","/v2/accounts:revokeToken",Yc(n,e))}class Vr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Mh(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ee(e.length!==0,"internal-error");const t=Mh(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:i}=await cw(e,t);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:i}=t,a=new Vr;return r&&(ee(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(ee(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(ee(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vr,this.toJSON())}_performRefresh(){return Gt("not implemented")}}function fn(n,e){ee(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Et{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new iw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new tc(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await zs(this,this.stsTokenManager.getToken(this.auth,e));return ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return rw(this,e)}reload(){return ow(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Et({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await to(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Dt(this.auth.app))return Promise.reject(Zn(this.auth));const e=await this.getIdToken();return await zs(this,nw(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,i=t.phoneNumber??void 0,a=t.photoURL??void 0,c=t.tenantId??void 0,u=t._redirectEventId??void 0,f=t.createdAt??void 0,d=t.lastLoginAt??void 0,{uid:g,emailVerified:T,isAnonymous:R,providerData:L,stsTokenManager:B}=t;ee(g&&B,e,"internal-error");const j=Vr.fromJSON(this.name,B);ee(typeof g=="string",e,"internal-error"),fn(r,e.name),fn(s,e.name),ee(typeof T=="boolean",e,"internal-error"),ee(typeof R=="boolean",e,"internal-error"),fn(i,e.name),fn(a,e.name),fn(c,e.name),fn(u,e.name),fn(f,e.name),fn(d,e.name);const K=new Et({uid:g,auth:e,email:s,emailVerified:T,displayName:r,isAnonymous:R,photoURL:a,phoneNumber:i,tenantId:c,stsTokenManager:j,createdAt:f,lastLoginAt:d});return L&&Array.isArray(L)&&(K.providerData=L.map(Q=>({...Q}))),u&&(K._redirectEventId=u),K}static async _fromIdTokenResponse(e,t,r=!1){const s=new Vr;s.updateFromServerResponse(t);const i=new Et({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await to(i),i}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];ee(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Np(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!i?.length,c=new Vr;c.updateFromIdToken(r);const u=new Et({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:a}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new tc(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(u,f),u}}const Lh=new Map;function Wt(n){tn(n instanceof Function,"Expected a class definition");let e=Lh.get(n);return e?(tn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Lh.set(n,e),e)}class Vp{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Vp.type="NONE";const Fh=Vp;function Oi(n,e,t){return`firebase:${n}:${e}:${t}`}class kr{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Oi(this.userKey,s.apiKey,i),this.fullPersistenceKey=Oi("persistence",s.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await eo(this.auth,{idToken:e}).catch(()=>{});return t?Et._fromGetAccountInfoResponse(this.auth,t,e):null}return Et._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new kr(Wt(Fh),e,r);const s=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let i=s[0]||Wt(Fh);const a=Oi(r,e.config.apiKey,e.name);let c=null;for(const f of t)try{const d=await f._get(a);if(d){let g;if(typeof d=="string"){const T=await eo(e,{idToken:d}).catch(()=>{});if(!T)break;g=await Et._fromGetAccountInfoResponse(e,T,d)}else g=Et._fromJSON(e,d);f!==i&&(c=g),i=f;break}}catch{}const u=s.filter(f=>f._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new kr(i,e,r):(i=u[0],c&&await i._set(a,c.toJSON()),await Promise.all(t.map(async f=>{if(f!==i)try{await f._remove(a)}catch{}})),new kr(i,e,r))}}function Uh(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Mp(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kp(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Fp(e))return"Blackberry";if(Up(e))return"Webos";if(Op(e))return"Safari";if((e.includes("chrome/")||xp(e))&&!e.includes("edge/"))return"Chrome";if(Lp(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function kp(n=Xe()){return/firefox\//i.test(n)}function Op(n=Xe()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xp(n=Xe()){return/crios\//i.test(n)}function Mp(n=Xe()){return/iemobile/i.test(n)}function Lp(n=Xe()){return/android/i.test(n)}function Fp(n=Xe()){return/blackberry/i.test(n)}function Up(n=Xe()){return/webos/i.test(n)}function Zc(n=Xe()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function uw(n=Xe()){return Zc(n)&&!!window.navigator?.standalone}function hw(){return vy()&&document.documentMode===10}function Bp(n=Xe()){return Zc(n)||Lp(n)||Up(n)||Fp(n)||/windows phone/i.test(n)||Mp(n)}function jp(n,e=[]){let t;switch(n){case"Browser":t=Uh(Xe());break;case"Worker":t=`${Uh(Xe())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Kr}/${r}`}class fw{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=i=>new Promise((a,c)=>{try{const u=e(i);a(u)}catch(u){c(u)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function dw(n,e={}){return Jr(n,"GET","/v2/passwordPolicy",Yc(n,e))}const pw=6;class gw{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??pw,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class mw{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bh(this),this.idTokenSubscription=new Bh(this),this.beforeStateQueue=new fw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Sp,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Wt(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await kr.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await eo(this,{idToken:e}),r=await Et._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Dt(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,a=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!i||i===a)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await to(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=JI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Dt(this.app))return Promise.reject(Zn(this));const t=e?or(e):null;return t&&ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Dt(this.app)?Promise.reject(Zn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Dt(this.app)?Promise.reject(Zn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wt(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await dw(this),t=new gw(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ws("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await lw(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Wt(e)||this._popupRedirectResolver;ee(t,this,"argument-error"),this.redirectPersistenceManager=await kr.create(this,[Wt(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(c,this,"internal-error"),c.then(()=>{a||i(this.currentUser)}),typeof t=="function"){const u=e.addObserver(t,r,s);return()=>{a=!0,u()}}else{const u=e.addObserver(t);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jp(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Dt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&GI(`Error while retrieving App Check token: ${e.error}`),e?.token}}function el(n){return or(n)}class Bh{constructor(e){this.auth=e,this.observer=null,this.addObserver=Py(t=>this.observer=t)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let tl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _w(n){tl=n}function yw(n){return tl.loadJS(n)}function Ew(){return tl.gapiScript}function Tw(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function vw(n,e){const t=Rc(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),i=t.getOptions();if(tr(i,e??{}))return s;en(s,"already-initialized")}return t.initialize({options:e})}function Iw(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Wt);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function ww(n,e,t){const r=el(n);ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=$p(e),{host:a,port:c}=Aw(e),u=c===null?"":`:${c}`,f={url:`${i}//${a}${u}/`},d=Object.freeze({host:a,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ee(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ee(tr(f,r.config.emulator)&&tr(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,zr(a)?(cd(`${i}//${a}${u}`),ld("Auth",!0)):bw()}function $p(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Aw(n){const e=$p(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:jh(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:jh(a)}}}function jh(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function bw(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class qp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Gt("not implemented")}_getIdTokenResponse(e){return Gt("not implemented")}_linkToIdToken(e,t){return Gt("not implemented")}_getReauthenticationResolver(e){return Gt("not implemented")}}async function Or(n,e){return ew(n,"POST","/v1/accounts:signInWithIdp",Yc(n,e))}const Sw="http://localhost";class sr extends qp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new sr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):en("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=t;if(!r||!s)return null;const a=new sr(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Or(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Or(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Or(e,t)}buildRequest(){const e={requestUri:Sw,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Qs(t)}return e}}class Hp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ni extends Hp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class gn extends ni{constructor(){super("facebook.com")}static credential(e){return sr._fromParams({providerId:gn.PROVIDER_ID,signInMethod:gn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gn.credentialFromTaggedObject(e)}static credentialFromError(e){return gn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gn.credential(e.oauthAccessToken)}catch{return null}}}gn.FACEBOOK_SIGN_IN_METHOD="facebook.com";gn.PROVIDER_ID="facebook.com";class mn extends ni{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return sr._fromParams({providerId:mn.PROVIDER_ID,signInMethod:mn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return mn.credentialFromTaggedObject(e)}static credentialFromError(e){return mn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return mn.credential(t,r)}catch{return null}}}mn.GOOGLE_SIGN_IN_METHOD="google.com";mn.PROVIDER_ID="google.com";class _n extends ni{constructor(){super("github.com")}static credential(e){return sr._fromParams({providerId:_n.PROVIDER_ID,signInMethod:_n.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _n.credentialFromTaggedObject(e)}static credentialFromError(e){return _n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _n.credential(e.oauthAccessToken)}catch{return null}}}_n.GITHUB_SIGN_IN_METHOD="github.com";_n.PROVIDER_ID="github.com";class yn extends ni{constructor(){super("twitter.com")}static credential(e,t){return sr._fromParams({providerId:yn.PROVIDER_ID,signInMethod:yn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return yn.credentialFromTaggedObject(e)}static credentialFromError(e){return yn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return yn.credential(t,r)}catch{return null}}}yn.TWITTER_SIGN_IN_METHOD="twitter.com";yn.PROVIDER_ID="twitter.com";class Hr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const i=await Et._fromIdTokenResponse(e,r,s),a=$h(r);return new Hr({user:i,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=$h(r);return new Hr({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function $h(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class no extends rn{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,no.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new no(e,t,r,s)}}function zp(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?no._fromErrorAndOperation(n,i,e,r):i})}async function Rw(n,e,t=!1){const r=await zs(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Hr._forOperation(n,"link",r)}async function Cw(n,e,t=!1){const{auth:r}=n;if(Dt(r.app))return Promise.reject(Zn(r));const s="reauthenticate";try{const i=await zs(n,zp(r,s,e,n),t);ee(i.idToken,r,"internal-error");const a=Xc(i.idToken);ee(a,r,"internal-error");const{sub:c}=a;return ee(n.uid===c,r,"user-mismatch"),Hr._forOperation(n,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&en(r,"user-mismatch"),i}}async function Pw(n,e,t=!1){if(Dt(n.app))return Promise.reject(Zn(n));const r="signIn",s=await zp(n,r,e),i=await Hr._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(i.user),i}function Dw(n,e,t,r){return or(n).onIdTokenChanged(e,t,r)}function Nw(n,e,t){return or(n).beforeAuthStateChanged(e,t)}const ro="__sak";class Kp{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ro,"1"),this.storage.removeItem(ro),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Vw=1e3,kw=10;class Gp extends Kp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Bp(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);hw()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,kw):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},Vw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Gp.type="LOCAL";const Ow=Gp;class Wp extends Kp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Wp.type="SESSION";const Qp=Wp;function xw(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Po{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Po(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:i}=t.data,a=this.handlersMap[s];if(!a?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(a).map(async f=>f(t.origin,i)),u=await xw(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Po.receivers=[];function nl(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class Mw{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((c,u)=>{const f=nl("",20);s.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(g){const T=g;if(T.data.eventId===f)switch(T.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(T.data.response);break;default:clearTimeout(d),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function Lt(){return window}function Lw(n){Lt().location.href=n}function Jp(){return typeof Lt().WorkerGlobalScope<"u"&&typeof Lt().importScripts=="function"}async function Fw(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Uw(){return navigator?.serviceWorker?.controller||null}function Bw(){return Jp()?self:null}const Yp="firebaseLocalStorageDb",jw=1,so="firebaseLocalStorage",Xp="fbase_key";class ri{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Do(n,e){return n.transaction([so],e?"readwrite":"readonly").objectStore(so)}function $w(){const n=indexedDB.deleteDatabase(Yp);return new ri(n).toPromise()}function nc(){const n=indexedDB.open(Yp,jw);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(so,{keyPath:Xp})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(so)?e(r):(r.close(),await $w(),e(await nc()))})})}async function qh(n,e,t){const r=Do(n,!0).put({[Xp]:e,value:t});return new ri(r).toPromise()}async function qw(n,e){const t=Do(n,!1).get(e),r=await new ri(t).toPromise();return r===void 0?null:r.value}function Hh(n,e){const t=Do(n,!0).delete(e);return new ri(t).toPromise()}const Hw=800,zw=3;class Zp{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await nc(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>zw)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Jp()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Po._getInstance(Bw()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Fw(),!this.activeServiceWorker)return;this.sender=new Mw(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Uw()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await nc();return await qh(e,ro,"1"),await Hh(e,ro),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>qh(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>qw(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Hh(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Do(s,!1).getAll();return new ri(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Hw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Zp.type="LOCAL";const Kw=Zp;new ti(3e4,6e4);function Gw(n,e){return e?Wt(e):(ee(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class rl extends qp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Or(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Or(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Or(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ww(n){return Pw(n.auth,new rl(n),n.bypassAuthState)}function Qw(n){const{auth:e,user:t}=n;return ee(t,e,"internal-error"),Cw(t,new rl(n),n.bypassAuthState)}async function Jw(n){const{auth:e,user:t}=n;return ee(t,e,"internal-error"),Rw(t,new rl(n),n.bypassAuthState)}class eg{constructor(e,t,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:i,error:a,type:c}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:t,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ww;case"linkViaPopup":case"linkViaRedirect":return Jw;case"reauthViaPopup":case"reauthViaRedirect":return Qw;default:en(this.auth,"internal-error")}}resolve(e){tn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){tn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Yw=new ti(2e3,1e4);class vr extends eg{constructor(e,t,r,s,i){super(e,t,s,i),this.provider=r,this.authWindow=null,this.pollId=null,vr.currentPopupAction&&vr.currentPopupAction.cancel(),vr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ee(e,this.auth,"internal-error"),e}async onExecution(){tn(this.filter.length===1,"Popup operations only handle one event");const e=nl();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Mt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Mt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vr.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Mt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Yw.get())};e()}}vr.currentPopupAction=null;const Xw="pendingRedirect",xi=new Map;class Zw extends eg{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=xi.get(this.auth._key());if(!e){try{const r=await eA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}xi.set(this.auth._key(),e)}return this.bypassAuthState||xi.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function eA(n,e){const t=rA(e),r=nA(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function tA(n,e){xi.set(n._key(),e)}function nA(n){return Wt(n._redirectPersistence)}function rA(n){return Oi(Xw,n.config.apiKey,n.name)}async function sA(n,e,t=!1){if(Dt(n.app))return Promise.reject(Zn(n));const r=el(n),s=Gw(r,e),a=await new Zw(r,s,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}const iA=600*1e3;class oA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!aA(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!tg(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Mt(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=iA&&this.cachedEventUids.clear(),this.cachedEventUids.has(zh(e))}saveEventToCache(e){this.cachedEventUids.add(zh(e)),this.lastProcessedEventTime=Date.now()}}function zh(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function tg({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function aA(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tg(n);default:return!1}}async function cA(n,e={}){return Jr(n,"GET","/v1/projects",e)}const lA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uA=/^https?/;async function hA(n){if(n.config.emulator)return;const{authorizedDomains:e}=await cA(n);for(const t of e)try{if(fA(t))return}catch{}en(n,"unauthorized-domain")}function fA(n){const e=ec(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!uA.test(t))return!1;if(lA.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const dA=new ti(3e4,6e4);function Kh(){const n=Lt().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function pA(n){return new Promise((e,t)=>{function r(){Kh(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Kh(),t(Mt(n,"network-request-failed"))},timeout:dA.get()})}if(Lt().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Lt().gapi?.load)r();else{const s=Tw("iframefcb");return Lt()[s]=()=>{gapi.load?r():t(Mt(n,"network-request-failed"))},yw(`${Ew()}?onload=${s}`).catch(i=>t(i))}}).catch(e=>{throw Mi=null,e})}let Mi=null;function gA(n){return Mi=Mi||pA(n),Mi}const mA=new ti(5e3,15e3),_A="__/auth/iframe",yA="emulator/auth/iframe",EA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},TA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vA(n){const e=n.config;ee(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Jc(e,yA):`https://${n.config.authDomain}/${_A}`,r={apiKey:e.apiKey,appName:n.name,v:Kr},s=TA.get(n.config.apiHost);s&&(r.eid=s);const i=n._getFrameworks();return i.length&&(r.fw=i.join(",")),`${t}?${Qs(r).slice(1)}`}async function IA(n){const e=await gA(n),t=Lt().gapi;return ee(t,n,"internal-error"),e.open({where:document.body,url:vA(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:EA,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=Mt(n,"network-request-failed"),c=Lt().setTimeout(()=>{i(a)},mA.get());function u(){Lt().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(a)})}))}const wA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},AA=500,bA=600,SA="_blank",RA="http://localhost";class Gh{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function CA(n,e,t,r=AA,s=bA){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...wA,width:r.toString(),height:s.toString(),top:i,left:a},f=Xe().toLowerCase();t&&(c=xp(f)?SA:t),kp(f)&&(e=e||RA,u.scrollbars="yes");const d=Object.entries(u).reduce((T,[R,L])=>`${T}${R}=${L},`,"");if(uw(f)&&c!=="_self")return PA(e||"",c),new Gh(null);const g=window.open(e||"",c,d);ee(g,n,"popup-blocked");try{g.focus()}catch{}return new Gh(g)}function PA(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const DA="__/auth/handler",NA="emulator/auth/handler",VA=encodeURIComponent("fac");async function Wh(n,e,t,r,s,i){ee(n.config.authDomain,n,"auth-domain-config-required"),ee(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Kr,eventId:s};if(e instanceof Hp){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",Cy(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,g]of Object.entries({}))a[d]=g}if(e instanceof ni){const d=e.getScopes().filter(g=>g!=="");d.length>0&&(a.scopes=d.join(","))}n.tenantId&&(a.tid=n.tenantId);const c=a;for(const d of Object.keys(c))c[d]===void 0&&delete c[d];const u=await n._getAppCheckToken(),f=u?`#${VA}=${encodeURIComponent(u)}`:"";return`${kA(n)}?${Qs(c).slice(1)}${f}`}function kA({config:n}){return n.emulator?Jc(n,NA):`https://${n.authDomain}/${DA}`}const ga="webStorageSupport";class OA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qp,this._completeRedirectFn=sA,this._overrideRedirectResult=tA}async _openPopup(e,t,r,s){tn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await Wh(e,t,r,ec(),s);return CA(e,i,nl())}async _openRedirect(e,t,r,s){await this._originValidation(e);const i=await Wh(e,t,r,ec(),s);return Lw(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:i}=this.eventManagers[t];return s?Promise.resolve(s):(tn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await IA(e),r=new oA(e);return t.register("authEvent",s=>(ee(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ga,{type:ga},s=>{const i=s?.[0]?.[ga];i!==void 0&&t(!!i),en(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=hA(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Bp()||Op()||Zc()}}const xA=OA;var Qh="@firebase/auth",Jh="1.11.1";class MA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function LA(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function FA(n){Mr(new nr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;ee(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jp(n)},f=new mw(r,s,i,u);return Iw(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Mr(new nr("auth-internal",e=>{const t=el(e.getProvider("auth").getImmediate());return(r=>new MA(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),bn(Qh,Jh,LA(n)),bn(Qh,Jh,"esm2020")}const UA=300,BA=ad("authIdTokenMaxAge")||UA;let Yh=null;const jA=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>BA)return;const s=t?.token;Yh!==s&&(Yh=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function $A(n=dd()){const e=Rc(n,"auth");if(e.isInitialized())return e.getImmediate();const t=vw(n,{popupRedirectResolver:xA,persistence:[Kw,Ow,Qp]}),r=ad("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=jA(i.toString());Nw(t,a,()=>a(t.currentUser)),Dw(t,c=>a(c))}}const s=id("auth");return s&&ww(t,`http://${s}`),t}function qA(){return document.getElementsByTagName("head")?.[0]??document}_w({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const i=Mt("internal-error");i.customData=s,t(i)},r.type="text/javascript",r.charset="UTF-8",qA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});FA("Browser");const HA={apiKey:"AIzaSyANsIQRHs8sk6RIUSCItPC9ydTMRsb41OU",authDomain:"fu-press-start.firebaseapp.com",projectId:"fu-press-start",storageBucket:"fu-press-start.firebasestorage.app",messagingSenderId:"1092765461602",appId:"1:1092765461602:web:3d3842d05bf92a1108753b",measurementId:"G-DV6NTCLN4Q"},ng=fd(HA),zA=xI(ng);$A(ng);const KA=OI(zA,"users");async function GA(){return(await zI(KA)).docs.map(e=>({id:e.id,...e.data()}))}const WA={__name:"loginPop",emits:["login","close"],setup(n,{emit:e}){const t=e,r=En([]);En(null);const s=En(""),i=En("");async function a(){r.value=await GA()}return onMounted(a),(c,u)=>(Qt(),Sr("div",null,[yt("div",null,[u[4]||(u[4]=yt("h2",null,"Login",-1)),Yl(yt("input",{"onUpdate:modelValue":u[0]||(u[0]=f=>s.value=f),placeholder:"Usurio"},null,512),[[Au,s.value]]),Yl(yt("input",{"onUpdate:modelValue":u[1]||(u[1]=f=>i.value=f),type:"password",placeholder:"Senha"},null,512),[[Au,i.value]]),yt("button",{onClick:u[2]||(u[2]=f=>t("login",{username:s.value,password:i.value}))}," Entrar "),yt("button",{onClick:u[3]||(u[3]=f=>t("close"))}," Cancelar ")])]))}},QA={class:"app bg-fabula"},JA={__name:"index",setup(n){const e=En("start");function t(){e.value="login"}function r(s){console.log("Login frontend:",s),alert(`Login enviado!
(Aqui voc conectaria ao backend)`)}return Tc(()=>{console.log(e.value)}),(s,i)=>(Qt(),Sr("div",QA,[e.value=="start"?(Qt(),Ra(ny,{key:0,onStart:t})):$i("",!0),e.value=="login"?(Qt(),Ra(WA,{key:1,onClose:i[0]||(i[0]=a=>e.value="start"),onLogin:r})):$i("",!0)]))}},YA=Ac(JA,[["__scopeId","data-v-939c8399"]]);z_(YA).mount("#app");
