(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function tl(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const Se={},Yr=[],Kt=()=>{},sd=()=>!1,ta=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),nl=n=>n.startsWith("onUpdate:"),et=Object.assign,rl=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},p_=Object.prototype.hasOwnProperty,ve=(n,e)=>p_.call(n,e),ne=Array.isArray,Xr=n=>na(n)==="[object Map]",id=n=>na(n)==="[object Set]",oe=n=>typeof n=="function",xe=n=>typeof n=="string",rr=n=>typeof n=="symbol",Ce=n=>n!==null&&typeof n=="object",od=n=>(Ce(n)||oe(n))&&oe(n.then)&&oe(n.catch),ad=Object.prototype.toString,na=n=>ad.call(n),m_=n=>na(n).slice(8,-1),cd=n=>na(n)==="[object Object]",sl=n=>xe(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,ei=tl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ra=n=>{const e=Object.create(null);return(t=>e[t]||(e[t]=n(t)))},g_=/-\w/g,Gn=ra(n=>n.replace(g_,e=>e.slice(1).toUpperCase())),__=/\B([A-Z])/g,Pr=ra(n=>n.replace(__,"-$1").toLowerCase()),ld=ra(n=>n.charAt(0).toUpperCase()+n.slice(1)),Ka=ra(n=>n?`on${ld(n)}`:""),Bn=(n,e)=>!Object.is(n,e),ho=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},ud=(n,e,t,r=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:r,value:t})},il=n=>{const e=parseFloat(n);return isNaN(e)?n:e},y_=n=>{const e=xe(n)?Number(n):NaN;return isNaN(e)?n:e};let Ku;const sa=()=>Ku||(Ku=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ol(n){if(ne(n)){const e={};for(let t=0;t<n.length;t++){const r=n[t],s=xe(r)?I_(r):ol(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(xe(n)||Ce(n))return n}const E_=/;(?![^(]*\))/g,v_=/:([^]+)/,T_=/\/\*[^]*?\*\//g;function I_(n){const e={};return n.replace(T_,"").split(E_).forEach(t=>{if(t){const r=t.split(v_);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function pi(n){let e="";if(xe(n))e=n;else if(ne(n))for(let t=0;t<n.length;t++){const r=pi(n[t]);r&&(e+=r+" ")}else if(Ce(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const w_="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",A_=tl(w_);function hd(n){return!!n||n===""}const fd=n=>!!(n&&n.__v_isRef===!0),It=n=>xe(n)?n:n==null?"":ne(n)||Ce(n)&&(n.toString===ad||!oe(n.toString))?fd(n)?It(n.value):JSON.stringify(n,dd,2):String(n),dd=(n,e)=>fd(e)?dd(n,e.value):Xr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[r,s],i)=>(t[Ga(r,i)+" =>"]=s,t),{})}:id(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>Ga(t))}:rr(e)?Ga(e):Ce(e)&&!ne(e)&&!cd(e)?String(e):e,Ga=(n,e="")=>{var t;return rr(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};let mt;class S_{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=mt,!e&&mt&&(this.index=(mt.scopes||(mt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=mt;try{return mt=this,e()}finally{mt=t}}}on(){++this._on===1&&(this.prevScope=mt,mt=this)}off(){this._on>0&&--this._on===0&&(mt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(this.effects.length=0,t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function b_(){return mt}let Re;const Qa=new WeakSet;class pd{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,mt&&mt.active&&mt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Qa.has(this)&&(Qa.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||gd(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Gu(this),_d(this);const e=Re,t=xt;Re=this,xt=!0;try{return this.fn()}finally{yd(this),Re=e,xt=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)ll(e);this.deps=this.depsTail=void 0,Gu(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Qa.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){yc(this)&&this.run()}get dirty(){return yc(this)}}let md=0,ti,ni;function gd(n,e=!1){if(n.flags|=8,e){n.next=ni,ni=n;return}n.next=ti,ti=n}function al(){md++}function cl(){if(--md>0)return;if(ni){let e=ni;for(ni=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;ti;){let e=ti;for(ti=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){n||(n=r)}e=t}}if(n)throw n}function _d(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function yd(n){let e,t=n.depsTail,r=t;for(;r;){const s=r.prevDep;r.version===-1?(r===t&&(t=s),ll(r),R_(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}n.deps=e,n.depsTail=t}function yc(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Ed(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function Ed(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===mi)||(n.globalVersion=mi,!n.isSSR&&n.flags&128&&(!n.deps&&!n._dirty||!yc(n))))return;n.flags|=2;const e=n.dep,t=Re,r=xt;Re=n,xt=!0;try{_d(n);const s=n.fn(n._value);(e.version===0||Bn(s,n._value))&&(n.flags|=128,n._value=s,e.version++)}catch(s){throw e.version++,s}finally{Re=t,xt=r,yd(n),n.flags&=-3}}function ll(n,e=!1){const{dep:t,prevSub:r,nextSub:s}=n;if(r&&(r.nextSub=s,n.prevSub=void 0),s&&(s.prevSub=r,n.nextSub=void 0),t.subs===n&&(t.subs=r,!r&&t.computed)){t.computed.flags&=-5;for(let i=t.computed.deps;i;i=i.nextDep)ll(i,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function R_(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let xt=!0;const vd=[];function gn(){vd.push(xt),xt=!1}function _n(){const n=vd.pop();xt=n===void 0?!0:n}function Gu(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=Re;Re=void 0;try{e()}finally{Re=t}}}let mi=0;class C_{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ul{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Re||!xt||Re===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==Re)t=this.activeLink=new C_(Re,this),Re.deps?(t.prevDep=Re.depsTail,Re.depsTail.nextDep=t,Re.depsTail=t):Re.deps=Re.depsTail=t,Td(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const r=t.nextDep;r.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=r),t.prevDep=Re.depsTail,t.nextDep=void 0,Re.depsTail.nextDep=t,Re.depsTail=t,Re.deps===t&&(Re.deps=r)}return t}trigger(e){this.version++,mi++,this.notify(e)}notify(e){al();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{cl()}}}function Td(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Td(r)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const Ec=new WeakMap,Tr=Symbol(""),vc=Symbol(""),gi=Symbol("");function ot(n,e,t){if(xt&&Re){let r=Ec.get(n);r||Ec.set(n,r=new Map);let s=r.get(t);s||(r.set(t,s=new ul),s.map=r,s.key=t),s.track()}}function hn(n,e,t,r,s,i){const a=Ec.get(n);if(!a){mi++;return}const c=l=>{l&&l.trigger()};if(al(),e==="clear")a.forEach(c);else{const l=ne(n),h=l&&sl(t);if(l&&t==="length"){const d=Number(r);a.forEach((p,g)=>{(g==="length"||g===gi||!rr(g)&&g>=d)&&c(p)})}else switch((t!==void 0||a.has(void 0))&&c(a.get(t)),h&&c(a.get(gi)),e){case"add":l?h&&c(a.get("length")):(c(a.get(Tr)),Xr(n)&&c(a.get(vc)));break;case"delete":l||(c(a.get(Tr)),Xr(n)&&c(a.get(vc)));break;case"set":Xr(n)&&c(a.get(Tr));break}}cl()}function jr(n){const e=Ee(n);return e===n?e:(ot(e,"iterate",gi),kt(n)?e:e.map(Ye))}function ia(n){return ot(n=Ee(n),"iterate",gi),n}const P_={__proto__:null,[Symbol.iterator](){return Ja(this,Symbol.iterator,Ye)},concat(...n){return jr(this).concat(...n.map(e=>ne(e)?jr(e):e))},entries(){return Ja(this,"entries",n=>(n[1]=Ye(n[1]),n))},every(n,e){return an(this,"every",n,e,void 0,arguments)},filter(n,e){return an(this,"filter",n,e,t=>t.map(Ye),arguments)},find(n,e){return an(this,"find",n,e,Ye,arguments)},findIndex(n,e){return an(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return an(this,"findLast",n,e,Ye,arguments)},findLastIndex(n,e){return an(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return an(this,"forEach",n,e,void 0,arguments)},includes(...n){return Ya(this,"includes",n)},indexOf(...n){return Ya(this,"indexOf",n)},join(n){return jr(this).join(n)},lastIndexOf(...n){return Ya(this,"lastIndexOf",n)},map(n,e){return an(this,"map",n,e,void 0,arguments)},pop(){return zs(this,"pop")},push(...n){return zs(this,"push",n)},reduce(n,...e){return Qu(this,"reduce",n,e)},reduceRight(n,...e){return Qu(this,"reduceRight",n,e)},shift(){return zs(this,"shift")},some(n,e){return an(this,"some",n,e,void 0,arguments)},splice(...n){return zs(this,"splice",n)},toReversed(){return jr(this).toReversed()},toSorted(n){return jr(this).toSorted(n)},toSpliced(...n){return jr(this).toSpliced(...n)},unshift(...n){return zs(this,"unshift",n)},values(){return Ja(this,"values",Ye)}};function Ja(n,e,t){const r=ia(n),s=r[e]();return r!==n&&!kt(n)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=t(i.value)),i}),s}const k_=Array.prototype;function an(n,e,t,r,s,i){const a=ia(n),c=a!==n&&!kt(n),l=a[e];if(l!==k_[e]){const p=l.apply(n,i);return c?Ye(p):p}let h=t;a!==n&&(c?h=function(p,g){return t.call(this,Ye(p),g,n)}:t.length>2&&(h=function(p,g){return t.call(this,p,g,n)}));const d=l.call(a,h,r);return c&&s?s(d):d}function Qu(n,e,t,r){const s=ia(n);let i=t;return s!==n&&(kt(n)?t.length>3&&(i=function(a,c,l){return t.call(this,a,c,l,n)}):i=function(a,c,l){return t.call(this,a,Ye(c),l,n)}),s[e](i,...r)}function Ya(n,e,t){const r=Ee(n);ot(r,"iterate",gi);const s=r[e](...t);return(s===-1||s===!1)&&pl(t[0])?(t[0]=Ee(t[0]),r[e](...t)):s}function zs(n,e,t=[]){gn(),al();const r=Ee(n)[e].apply(n,t);return cl(),_n(),r}const V_=tl("__proto__,__v_isRef,__isVue"),Id=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(rr));function D_(n){rr(n)||(n=String(n));const e=Ee(this);return ot(e,"has",n),e.hasOwnProperty(n)}class wd{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,r){if(t==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(t==="__v_isReactive")return!s;if(t==="__v_isReadonly")return s;if(t==="__v_isShallow")return i;if(t==="__v_raw")return r===(s?i?j_:Rd:i?bd:Sd).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const a=ne(e);if(!s){let l;if(a&&(l=P_[t]))return l;if(t==="hasOwnProperty")return D_}const c=Reflect.get(e,t,ct(e)?e:r);if((rr(t)?Id.has(t):V_(t))||(s||ot(e,"get",t),i))return c;if(ct(c)){const l=a&&sl(t)?c:c.value;return s&&Ce(l)?Ic(l):l}return Ce(c)?s?Ic(c):fl(c):c}}class Ad extends wd{constructor(e=!1){super(!1,e)}set(e,t,r,s){let i=e[t];if(!this._isShallow){const l=Qn(i);if(!kt(r)&&!Qn(r)&&(i=Ee(i),r=Ee(r)),!ne(e)&&ct(i)&&!ct(r))return l||(i.value=r),!0}const a=ne(e)&&sl(t)?Number(t)<e.length:ve(e,t),c=Reflect.set(e,t,r,ct(e)?e:s);return e===Ee(s)&&(a?Bn(r,i)&&hn(e,"set",t,r):hn(e,"add",t,r)),c}deleteProperty(e,t){const r=ve(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&r&&hn(e,"delete",t,void 0),s}has(e,t){const r=Reflect.has(e,t);return(!rr(t)||!Id.has(t))&&ot(e,"has",t),r}ownKeys(e){return ot(e,"iterate",ne(e)?"length":Tr),Reflect.ownKeys(e)}}class N_ extends wd{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const O_=new Ad,M_=new N_,x_=new Ad(!0);const Tc=n=>n,eo=n=>Reflect.getPrototypeOf(n);function L_(n,e,t){return function(...r){const s=this.__v_raw,i=Ee(s),a=Xr(i),c=n==="entries"||n===Symbol.iterator&&a,l=n==="keys"&&a,h=s[n](...r),d=t?Tc:e?bo:Ye;return!e&&ot(i,"iterate",l?vc:Tr),{next(){const{value:p,done:g}=h.next();return g?{value:p,done:g}:{value:c?[d(p[0]),d(p[1])]:d(p),done:g}},[Symbol.iterator](){return this}}}}function to(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function F_(n,e){const t={get(s){const i=this.__v_raw,a=Ee(i),c=Ee(s);n||(Bn(s,c)&&ot(a,"get",s),ot(a,"get",c));const{has:l}=eo(a),h=e?Tc:n?bo:Ye;if(l.call(a,s))return h(i.get(s));if(l.call(a,c))return h(i.get(c));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!n&&ot(Ee(s),"iterate",Tr),s.size},has(s){const i=this.__v_raw,a=Ee(i),c=Ee(s);return n||(Bn(s,c)&&ot(a,"has",s),ot(a,"has",c)),s===c?i.has(s):i.has(s)||i.has(c)},forEach(s,i){const a=this,c=a.__v_raw,l=Ee(c),h=e?Tc:n?bo:Ye;return!n&&ot(l,"iterate",Tr),c.forEach((d,p)=>s.call(i,h(d),h(p),a))}};return et(t,n?{add:to("add"),set:to("set"),delete:to("delete"),clear:to("clear")}:{add(s){!e&&!kt(s)&&!Qn(s)&&(s=Ee(s));const i=Ee(this);return eo(i).has.call(i,s)||(i.add(s),hn(i,"add",s,s)),this},set(s,i){!e&&!kt(i)&&!Qn(i)&&(i=Ee(i));const a=Ee(this),{has:c,get:l}=eo(a);let h=c.call(a,s);h||(s=Ee(s),h=c.call(a,s));const d=l.call(a,s);return a.set(s,i),h?Bn(i,d)&&hn(a,"set",s,i):hn(a,"add",s,i),this},delete(s){const i=Ee(this),{has:a,get:c}=eo(i);let l=a.call(i,s);l||(s=Ee(s),l=a.call(i,s)),c&&c.call(i,s);const h=i.delete(s);return l&&hn(i,"delete",s,void 0),h},clear(){const s=Ee(this),i=s.size!==0,a=s.clear();return i&&hn(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=L_(s,n,e)}),t}function hl(n,e){const t=F_(n,e);return(r,s,i)=>s==="__v_isReactive"?!n:s==="__v_isReadonly"?n:s==="__v_raw"?r:Reflect.get(ve(t,s)&&s in r?t:r,s,i)}const U_={get:hl(!1,!1)},B_={get:hl(!1,!0)},$_={get:hl(!0,!1)};const Sd=new WeakMap,bd=new WeakMap,Rd=new WeakMap,j_=new WeakMap;function H_(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function q_(n){return n.__v_skip||!Object.isExtensible(n)?0:H_(m_(n))}function fl(n){return Qn(n)?n:dl(n,!1,O_,U_,Sd)}function z_(n){return dl(n,!1,x_,B_,bd)}function Ic(n){return dl(n,!0,M_,$_,Rd)}function dl(n,e,t,r,s){if(!Ce(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const i=q_(n);if(i===0)return n;const a=s.get(n);if(a)return a;const c=new Proxy(n,i===2?r:t);return s.set(n,c),c}function Zr(n){return Qn(n)?Zr(n.__v_raw):!!(n&&n.__v_isReactive)}function Qn(n){return!!(n&&n.__v_isReadonly)}function kt(n){return!!(n&&n.__v_isShallow)}function pl(n){return n?!!n.__v_raw:!1}function Ee(n){const e=n&&n.__v_raw;return e?Ee(e):n}function W_(n){return!ve(n,"__v_skip")&&Object.isExtensible(n)&&ud(n,"__v_skip",!0),n}const Ye=n=>Ce(n)?fl(n):n,bo=n=>Ce(n)?Ic(n):n;function ct(n){return n?n.__v_isRef===!0:!1}function be(n){return K_(n,!1)}function K_(n,e){return ct(n)?n:new G_(n,e)}class G_{constructor(e,t){this.dep=new ul,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:Ee(e),this._value=t?e:Ye(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,r=this.__v_isShallow||kt(e)||Qn(e);e=r?e:Ee(e),Bn(e,t)&&(this._rawValue=e,this._value=r?e:Ye(e),this.dep.trigger())}}function Ks(n){return ct(n)?n.value:n}const Q_={get:(n,e,t)=>e==="__v_raw"?n:Ks(Reflect.get(n,e,t)),set:(n,e,t,r)=>{const s=n[e];return ct(s)&&!ct(t)?(s.value=t,!0):Reflect.set(n,e,t,r)}};function Cd(n){return Zr(n)?n:new Proxy(n,Q_)}class J_{constructor(e,t,r){this.fn=e,this.setter=t,this._value=void 0,this.dep=new ul(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=mi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Re!==this)return gd(this,!0),!0}get value(){const e=this.dep.track();return Ed(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Y_(n,e,t=!1){let r,s;return oe(n)?r=n:(r=n.get,s=n.set),new J_(r,s,t)}const no={},Ro=new WeakMap;let _r;function X_(n,e=!1,t=_r){if(t){let r=Ro.get(t);r||Ro.set(t,r=[]),r.push(n)}}function Z_(n,e,t=Se){const{immediate:r,deep:s,once:i,scheduler:a,augmentJob:c,call:l}=t,h=W=>s?W:kt(W)||s===!1||s===0?fn(W,1):fn(W);let d,p,g,S,k=!1,L=!1;if(ct(n)?(p=()=>n.value,k=kt(n)):Zr(n)?(p=()=>h(n),k=!0):ne(n)?(L=!0,k=n.some(W=>Zr(W)||kt(W)),p=()=>n.map(W=>{if(ct(W))return W.value;if(Zr(W))return h(W);if(oe(W))return l?l(W,2):W()})):oe(n)?e?p=l?()=>l(n,2):n:p=()=>{if(g){gn();try{g()}finally{_n()}}const W=_r;_r=d;try{return l?l(n,3,[S]):n(S)}finally{_r=W}}:p=Kt,e&&s){const W=p,ae=s===!0?1/0:s;p=()=>fn(W(),ae)}const B=b_(),H=()=>{d.stop(),B&&B.active&&rl(B.effects,d)};if(i&&e){const W=e;e=(...ae)=>{W(...ae),H()}}let K=L?new Array(n.length).fill(no):no;const Q=W=>{if(!(!(d.flags&1)||!d.dirty&&!W))if(e){const ae=d.run();if(s||k||(L?ae.some((ue,A)=>Bn(ue,K[A])):Bn(ae,K))){g&&g();const ue=_r;_r=d;try{const A=[ae,K===no?void 0:L&&K[0]===no?[]:K,S];K=ae,l?l(e,3,A):e(...A)}finally{_r=ue}}}else d.run()};return c&&c(Q),d=new pd(p),d.scheduler=a?()=>a(Q,!1):Q,S=W=>X_(W,!1,d),g=d.onStop=()=>{const W=Ro.get(d);if(W){if(l)l(W,4);else for(const ae of W)ae();Ro.delete(d)}},e?r?Q(!0):K=d.run():a?a(Q.bind(null,!0),!0):d.run(),H.pause=d.pause.bind(d),H.resume=d.resume.bind(d),H.stop=H,H}function fn(n,e=1/0,t){if(e<=0||!Ce(n)||n.__v_skip||(t=t||new Map,(t.get(n)||0)>=e))return n;if(t.set(n,e),e--,ct(n))fn(n.value,e,t);else if(ne(n))for(let r=0;r<n.length;r++)fn(n[r],e,t);else if(id(n)||Xr(n))n.forEach(r=>{fn(r,e,t)});else if(cd(n)){for(const r in n)fn(n[r],e,t);for(const r of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,r)&&fn(n[r],e,t)}return n}function Vi(n,e,t,r){try{return r?n(...r):n()}catch(s){oa(s,e,t)}}function Lt(n,e,t,r){if(oe(n)){const s=Vi(n,e,t,r);return s&&od(s)&&s.catch(i=>{oa(i,e,t)}),s}if(ne(n)){const s=[];for(let i=0;i<n.length;i++)s.push(Lt(n[i],e,t,r));return s}}function oa(n,e,t,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||Se;if(e){let c=e.parent;const l=e.proxy,h=`https://vuejs.org/error-reference/#runtime-${t}`;for(;c;){const d=c.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](n,l,h)===!1)return}c=c.parent}if(i){gn(),Vi(i,null,10,[n,l,h]),_n();return}}ey(n,t,s,r,a)}function ey(n,e,t,r=!0,s=!1){if(s)throw n;console.error(n)}const ft=[];let qt=-1;const es=[];let Nn=null,Hr=0;const Pd=Promise.resolve();let Co=null;function ty(n){const e=Co||Pd;return n?e.then(this?n.bind(this):n):e}function ny(n){let e=qt+1,t=ft.length;for(;e<t;){const r=e+t>>>1,s=ft[r],i=_i(s);i<n||i===n&&s.flags&2?e=r+1:t=r}return e}function ml(n){if(!(n.flags&1)){const e=_i(n),t=ft[ft.length-1];!t||!(n.flags&2)&&e>=_i(t)?ft.push(n):ft.splice(ny(e),0,n),n.flags|=1,kd()}}function kd(){Co||(Co=Pd.then(Dd))}function ry(n){ne(n)?es.push(...n):Nn&&n.id===-1?Nn.splice(Hr+1,0,n):n.flags&1||(es.push(n),n.flags|=1),kd()}function Ju(n,e,t=qt+1){for(;t<ft.length;t++){const r=ft[t];if(r&&r.flags&2){if(n&&r.id!==n.uid)continue;ft.splice(t,1),t--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Vd(n){if(es.length){const e=[...new Set(es)].sort((t,r)=>_i(t)-_i(r));if(es.length=0,Nn){Nn.push(...e);return}for(Nn=e,Hr=0;Hr<Nn.length;Hr++){const t=Nn[Hr];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}Nn=null,Hr=0}}const _i=n=>n.id==null?n.flags&2?-1:1/0:n.id;function Dd(n){try{for(qt=0;qt<ft.length;qt++){const e=ft[qt];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Vi(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;qt<ft.length;qt++){const e=ft[qt];e&&(e.flags&=-2)}qt=-1,ft.length=0,Vd(),Co=null,(ft.length||es.length)&&Dd()}}let Pt=null,Nd=null;function Po(n){const e=Pt;return Pt=n,Nd=n&&n.type.__scopeId||null,e}function kr(n,e=Pt,t){if(!e||n._n)return n;const r=(...s)=>{r._d&&Do(-1);const i=Po(e);let a;try{a=n(...s)}finally{Po(i),r._d&&Do(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function ts(n,e){if(Pt===null)return n;const t=ha(Pt),r=n.dirs||(n.dirs=[]);for(let s=0;s<e.length;s++){let[i,a,c,l=Se]=e[s];i&&(oe(i)&&(i={mounted:i,updated:i}),i.deep&&fn(a),r.push({dir:i,instance:t,value:a,oldValue:void 0,arg:c,modifiers:l}))}return n}function dr(n,e,t,r){const s=n.dirs,i=e&&e.dirs;for(let a=0;a<s.length;a++){const c=s[a];i&&(c.oldValue=i[a].value);let l=c.dir[r];l&&(gn(),Lt(l,t,8,[n.el,c,n,e]),_n())}}const sy=Symbol("_vte"),Od=n=>n.__isTeleport,un=Symbol("_leaveCb"),ro=Symbol("_enterCb");function iy(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return sn(()=>{n.isMounted=!0}),jd(()=>{n.isUnmounting=!0}),n}const St=[Function,Array],Md={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:St,onEnter:St,onAfterEnter:St,onEnterCancelled:St,onBeforeLeave:St,onLeave:St,onAfterLeave:St,onLeaveCancelled:St,onBeforeAppear:St,onAppear:St,onAfterAppear:St,onAppearCancelled:St},xd=n=>{const e=n.subTree;return e.component?xd(e.component):e},oy={name:"BaseTransition",props:Md,setup(n,{slots:e}){const t=lp(),r=iy();return()=>{const s=e.default&&Ud(e.default(),!0);if(!s||!s.length)return;const i=Ld(s),a=Ee(n),{mode:c}=a;if(r.isLeaving)return Xa(i);const l=Yu(i);if(!l)return Xa(i);let h=wc(l,a,r,t,p=>h=p);l.type!==dt&&yi(l,h);let d=t.subTree&&Yu(t.subTree);if(d&&d.type!==dt&&!Er(d,l)&&xd(t).type!==dt){let p=wc(d,a,r,t);if(yi(d,p),c==="out-in"&&l.type!==dt)return r.isLeaving=!0,p.afterLeave=()=>{r.isLeaving=!1,t.job.flags&8||t.update(),delete p.afterLeave,d=void 0},Xa(i);c==="in-out"&&l.type!==dt?p.delayLeave=(g,S,k)=>{const L=Fd(r,d);L[String(d.key)]=d,g[un]=()=>{S(),g[un]=void 0,delete h.delayedLeave,d=void 0},h.delayedLeave=()=>{k(),delete h.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return i}}};function Ld(n){let e=n[0];if(n.length>1){for(const t of n)if(t.type!==dt){e=t;break}}return e}const ay=oy;function Fd(n,e){const{leavingVNodes:t}=n;let r=t.get(e.type);return r||(r=Object.create(null),t.set(e.type,r)),r}function wc(n,e,t,r,s){const{appear:i,mode:a,persisted:c=!1,onBeforeEnter:l,onEnter:h,onAfterEnter:d,onEnterCancelled:p,onBeforeLeave:g,onLeave:S,onAfterLeave:k,onLeaveCancelled:L,onBeforeAppear:B,onAppear:H,onAfterAppear:K,onAppearCancelled:Q}=e,W=String(n.key),ae=Fd(t,n),ue=(_,w)=>{_&&Lt(_,r,9,w)},A=(_,w)=>{const I=w[1];ue(_,w),ne(_)?_.every(T=>T.length<=1)&&I():_.length<=1&&I()},E={mode:a,persisted:c,beforeEnter(_){let w=l;if(!t.isMounted)if(i)w=B||l;else return;_[un]&&_[un](!0);const I=ae[W];I&&Er(n,I)&&I.el[un]&&I.el[un](),ue(w,[_])},enter(_){let w=h,I=d,T=p;if(!t.isMounted)if(i)w=H||h,I=K||d,T=Q||p;else return;let y=!1;const _e=_[ro]=Ge=>{y||(y=!0,Ge?ue(T,[_]):ue(I,[_]),E.delayedLeave&&E.delayedLeave(),_[ro]=void 0)};w?A(w,[_,_e]):_e()},leave(_,w){const I=String(n.key);if(_[ro]&&_[ro](!0),t.isUnmounting)return w();ue(g,[_]);let T=!1;const y=_[un]=_e=>{T||(T=!0,w(),_e?ue(L,[_]):ue(k,[_]),_[un]=void 0,ae[I]===n&&delete ae[I])};ae[I]=n,S?A(S,[_,y]):y()},clone(_){const w=wc(_,e,t,r,s);return s&&s(w),w}};return E}function Xa(n){if(aa(n))return n=Jn(n),n.children=null,n}function Yu(n){if(!aa(n))return Od(n.type)&&n.children?Ld(n.children):n;if(n.component)return n.component.subTree;const{shapeFlag:e,children:t}=n;if(t){if(e&16)return t[0];if(e&32&&oe(t.default))return t.default()}}function yi(n,e){n.shapeFlag&6&&n.component?(n.transition=e,yi(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function Ud(n,e=!1,t){let r=[],s=0;for(let i=0;i<n.length;i++){let a=n[i];const c=t==null?a.key:String(t)+String(a.key!=null?a.key:i);a.type===Xe?(a.patchFlag&128&&s++,r=r.concat(Ud(a.children,e,c))):(e||a.type!==dt)&&r.push(c!=null?Jn(a,{key:c}):a)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}function Bd(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}const ko=new WeakMap;function ri(n,e,t,r,s=!1){if(ne(n)){n.forEach((k,L)=>ri(k,e&&(ne(e)?e[L]:e),t,r,s));return}if(si(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&ri(n,e,t,r.component.subTree);return}const i=r.shapeFlag&4?ha(r.component):r.el,a=s?null:i,{i:c,r:l}=n,h=e&&e.r,d=c.refs===Se?c.refs={}:c.refs,p=c.setupState,g=Ee(p),S=p===Se?sd:k=>ve(g,k);if(h!=null&&h!==l){if(Xu(e),xe(h))d[h]=null,S(h)&&(p[h]=null);else if(ct(h)){h.value=null;const k=e;k.k&&(d[k.k]=null)}}if(oe(l))Vi(l,c,12,[a,d]);else{const k=xe(l),L=ct(l);if(k||L){const B=()=>{if(n.f){const H=k?S(l)?p[l]:d[l]:l.value;if(s)ne(H)&&rl(H,i);else if(ne(H))H.includes(i)||H.push(i);else if(k)d[l]=[i],S(l)&&(p[l]=d[l]);else{const K=[i];l.value=K,n.k&&(d[n.k]=K)}}else k?(d[l]=a,S(l)&&(p[l]=a)):L&&(l.value=a,n.k&&(d[n.k]=a))};if(a){const H=()=>{B(),ko.delete(n)};H.id=-1,ko.set(n,H),Tt(H,t)}else Xu(n),B()}}}function Xu(n){const e=ko.get(n);e&&(e.flags|=8,ko.delete(n))}sa().requestIdleCallback;sa().cancelIdleCallback;const si=n=>!!n.type.__asyncLoader,aa=n=>n.type.__isKeepAlive;function cy(n,e){$d(n,"a",e)}function ly(n,e){$d(n,"da",e)}function $d(n,e,t=pt){const r=n.__wdc||(n.__wdc=()=>{let s=t;for(;s;){if(s.isDeactivated)return;s=s.parent}return n()});if(ca(e,r,t),t){let s=t.parent;for(;s&&s.parent;)aa(s.parent.vnode)&&uy(r,e,t,s),s=s.parent}}function uy(n,e,t,r){const s=ca(e,n,r,!0);Hd(()=>{rl(r[e],s)},t)}function ca(n,e,t=pt,r=!1){if(t){const s=t[n]||(t[n]=[]),i=e.__weh||(e.__weh=(...a)=>{gn();const c=Di(t),l=Lt(e,t,n,a);return c(),_n(),l});return r?s.unshift(i):s.push(i),i}}const In=n=>(e,t=pt)=>{(!vi||n==="sp")&&ca(n,(...r)=>e(...r),t)},hy=In("bm"),sn=In("m"),fy=In("bu"),dy=In("u"),jd=In("bum"),Hd=In("um"),py=In("sp"),my=In("rtg"),gy=In("rtc");function _y(n,e=pt){ca("ec",n,e)}const yy=Symbol.for("v-ndc");function Qr(n,e,t,r){let s;const i=t,a=ne(n);if(a||xe(n)){const c=a&&Zr(n);let l=!1,h=!1;c&&(l=!kt(n),h=Qn(n),n=ia(n)),s=new Array(n.length);for(let d=0,p=n.length;d<p;d++)s[d]=e(l?h?bo(Ye(n[d])):Ye(n[d]):n[d],d,void 0,i)}else if(typeof n=="number"){s=new Array(n);for(let c=0;c<n;c++)s[c]=e(c+1,c,void 0,i)}else if(Ce(n))if(n[Symbol.iterator])s=Array.from(n,(c,l)=>e(c,l,void 0,i));else{const c=Object.keys(n);s=new Array(c.length);for(let l=0,h=c.length;l<h;l++){const d=c[l];s[l]=e(n[d],d,l,i)}}else s=[];return s}const Ac=n=>n?up(n)?ha(n):Ac(n.parent):null,ii=et(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Ac(n.parent),$root:n=>Ac(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>zd(n),$forceUpdate:n=>n.f||(n.f=()=>{ml(n.update)}),$nextTick:n=>n.n||(n.n=ty.bind(n.proxy)),$watch:n=>By.bind(n)}),Za=(n,e)=>n!==Se&&!n.__isScriptSetup&&ve(n,e),Ey={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:r,data:s,props:i,accessCache:a,type:c,appContext:l}=n;let h;if(e[0]!=="$"){const S=a[e];if(S!==void 0)switch(S){case 1:return r[e];case 2:return s[e];case 4:return t[e];case 3:return i[e]}else{if(Za(r,e))return a[e]=1,r[e];if(s!==Se&&ve(s,e))return a[e]=2,s[e];if((h=n.propsOptions[0])&&ve(h,e))return a[e]=3,i[e];if(t!==Se&&ve(t,e))return a[e]=4,t[e];Sc&&(a[e]=0)}}const d=ii[e];let p,g;if(d)return e==="$attrs"&&ot(n.attrs,"get",""),d(n);if((p=c.__cssModules)&&(p=p[e]))return p;if(t!==Se&&ve(t,e))return a[e]=4,t[e];if(g=l.config.globalProperties,ve(g,e))return g[e]},set({_:n},e,t){const{data:r,setupState:s,ctx:i}=n;return Za(s,e)?(s[e]=t,!0):r!==Se&&ve(r,e)?(r[e]=t,!0):ve(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(i[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:r,appContext:s,propsOptions:i,type:a}},c){let l,h;return!!(t[c]||n!==Se&&c[0]!=="$"&&ve(n,c)||Za(e,c)||(l=i[0])&&ve(l,c)||ve(r,c)||ve(ii,c)||ve(s.config.globalProperties,c)||(h=a.__cssModules)&&h[c])},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:ve(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function Zu(n){return ne(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let Sc=!0;function vy(n){const e=zd(n),t=n.proxy,r=n.ctx;Sc=!1,e.beforeCreate&&eh(e.beforeCreate,n,"bc");const{data:s,computed:i,methods:a,watch:c,provide:l,inject:h,created:d,beforeMount:p,mounted:g,beforeUpdate:S,updated:k,activated:L,deactivated:B,beforeDestroy:H,beforeUnmount:K,destroyed:Q,unmounted:W,render:ae,renderTracked:ue,renderTriggered:A,errorCaptured:E,serverPrefetch:_,expose:w,inheritAttrs:I,components:T,directives:y,filters:_e}=e;if(h&&Ty(h,r,null),a)for(const Pe in a){const ye=a[Pe];oe(ye)&&(r[Pe]=ye.bind(t))}if(s){const Pe=s.call(t,t);Ce(Pe)&&(n.data=fl(Pe))}if(Sc=!0,i)for(const Pe in i){const ye=i[Pe],At=oe(ye)?ye.bind(t,t):oe(ye.get)?ye.get.bind(t,t):Kt,xr=!oe(ye)&&oe(ye.set)?ye.set.bind(t):Kt,Bt=cE({get:At,set:xr});Object.defineProperty(r,Pe,{enumerable:!0,configurable:!0,get:()=>Bt.value,set:_t=>Bt.value=_t})}if(c)for(const Pe in c)qd(c[Pe],r,t,Pe);if(l){const Pe=oe(l)?l.call(t):l;Reflect.ownKeys(Pe).forEach(ye=>{Ry(ye,Pe[ye])})}d&&eh(d,n,"c");function Le(Pe,ye){ne(ye)?ye.forEach(At=>Pe(At.bind(t))):ye&&Pe(ye.bind(t))}if(Le(hy,p),Le(sn,g),Le(fy,S),Le(dy,k),Le(cy,L),Le(ly,B),Le(_y,E),Le(gy,ue),Le(my,A),Le(jd,K),Le(Hd,W),Le(py,_),ne(w))if(w.length){const Pe=n.exposed||(n.exposed={});w.forEach(ye=>{Object.defineProperty(Pe,ye,{get:()=>t[ye],set:At=>t[ye]=At,enumerable:!0})})}else n.exposed||(n.exposed={});ae&&n.render===Kt&&(n.render=ae),I!=null&&(n.inheritAttrs=I),T&&(n.components=T),y&&(n.directives=y),_&&Bd(n)}function Ty(n,e,t=Kt){ne(n)&&(n=bc(n));for(const r in n){const s=n[r];let i;Ce(s)?"default"in s?i=fo(s.from||r,s.default,!0):i=fo(s.from||r):i=fo(s),ct(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):e[r]=i}}function eh(n,e,t){Lt(ne(n)?n.map(r=>r.bind(e.proxy)):n.bind(e.proxy),e,t)}function qd(n,e,t,r){let s=r.includes(".")?sp(t,r):()=>t[r];if(xe(n)){const i=e[n];oe(i)&&oi(s,i)}else if(oe(n))oi(s,n.bind(t));else if(Ce(n))if(ne(n))n.forEach(i=>qd(i,e,t,r));else{const i=oe(n.handler)?n.handler.bind(t):e[n.handler];oe(i)&&oi(s,i,n)}}function zd(n){const e=n.type,{mixins:t,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=n.appContext,c=i.get(e);let l;return c?l=c:!s.length&&!t&&!r?l=e:(l={},s.length&&s.forEach(h=>Vo(l,h,a,!0)),Vo(l,e,a)),Ce(e)&&i.set(e,l),l}function Vo(n,e,t,r=!1){const{mixins:s,extends:i}=e;i&&Vo(n,i,t,!0),s&&s.forEach(a=>Vo(n,a,t,!0));for(const a in e)if(!(r&&a==="expose")){const c=Iy[a]||t&&t[a];n[a]=c?c(n[a],e[a]):e[a]}return n}const Iy={data:th,props:nh,emits:nh,methods:Gs,computed:Gs,beforeCreate:ht,created:ht,beforeMount:ht,mounted:ht,beforeUpdate:ht,updated:ht,beforeDestroy:ht,beforeUnmount:ht,destroyed:ht,unmounted:ht,activated:ht,deactivated:ht,errorCaptured:ht,serverPrefetch:ht,components:Gs,directives:Gs,watch:Ay,provide:th,inject:wy};function th(n,e){return e?n?function(){return et(oe(n)?n.call(this,this):n,oe(e)?e.call(this,this):e)}:e:n}function wy(n,e){return Gs(bc(n),bc(e))}function bc(n){if(ne(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function ht(n,e){return n?[...new Set([].concat(n,e))]:e}function Gs(n,e){return n?et(Object.create(null),n,e):e}function nh(n,e){return n?ne(n)&&ne(e)?[...new Set([...n,...e])]:et(Object.create(null),Zu(n),Zu(e??{})):e}function Ay(n,e){if(!n)return e;if(!e)return n;const t=et(Object.create(null),n);for(const r in e)t[r]=ht(n[r],e[r]);return t}function Wd(){return{app:null,config:{isNativeTag:sd,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Sy=0;function by(n,e){return function(r,s=null){oe(r)||(r=et({},r)),s!=null&&!Ce(s)&&(s=null);const i=Wd(),a=new WeakSet,c=[];let l=!1;const h=i.app={_uid:Sy++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:uE,get config(){return i.config},set config(d){},use(d,...p){return a.has(d)||(d&&oe(d.install)?(a.add(d),d.install(h,...p)):oe(d)&&(a.add(d),d(h,...p))),h},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),h},component(d,p){return p?(i.components[d]=p,h):i.components[d]},directive(d,p){return p?(i.directives[d]=p,h):i.directives[d]},mount(d,p,g){if(!l){const S=h._ceVNode||Ue(r,s);return S.appContext=i,g===!0?g="svg":g===!1&&(g=void 0),n(S,d,g),l=!0,h._container=d,d.__vue_app__=h,ha(S.component)}},onUnmount(d){c.push(d)},unmount(){l&&(Lt(c,h._instance,16),n(null,h._container),delete h._container.__vue_app__)},provide(d,p){return i.provides[d]=p,h},runWithContext(d){const p=ns;ns=h;try{return d()}finally{ns=p}}};return h}}let ns=null;function Ry(n,e){if(pt){let t=pt.provides;const r=pt.parent&&pt.parent.provides;r===t&&(t=pt.provides=Object.create(r)),t[n]=e}}function fo(n,e,t=!1){const r=lp();if(r||ns){let s=ns?ns._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&n in s)return s[n];if(arguments.length>1)return t&&oe(e)?e.call(r&&r.proxy):e}}const Kd={},Gd=()=>Object.create(Kd),Qd=n=>Object.getPrototypeOf(n)===Kd;function Cy(n,e,t,r=!1){const s={},i=Gd();n.propsDefaults=Object.create(null),Jd(n,e,s,i);for(const a in n.propsOptions[0])a in s||(s[a]=void 0);t?n.props=r?s:z_(s):n.type.props?n.props=s:n.props=i,n.attrs=i}function Py(n,e,t,r){const{props:s,attrs:i,vnode:{patchFlag:a}}=n,c=Ee(s),[l]=n.propsOptions;let h=!1;if((r||a>0)&&!(a&16)){if(a&8){const d=n.vnode.dynamicProps;for(let p=0;p<d.length;p++){let g=d[p];if(la(n.emitsOptions,g))continue;const S=e[g];if(l)if(ve(i,g))S!==i[g]&&(i[g]=S,h=!0);else{const k=Gn(g);s[k]=Rc(l,c,k,S,n,!1)}else S!==i[g]&&(i[g]=S,h=!0)}}}else{Jd(n,e,s,i)&&(h=!0);let d;for(const p in c)(!e||!ve(e,p)&&((d=Pr(p))===p||!ve(e,d)))&&(l?t&&(t[p]!==void 0||t[d]!==void 0)&&(s[p]=Rc(l,c,p,void 0,n,!0)):delete s[p]);if(i!==c)for(const p in i)(!e||!ve(e,p))&&(delete i[p],h=!0)}h&&hn(n.attrs,"set","")}function Jd(n,e,t,r){const[s,i]=n.propsOptions;let a=!1,c;if(e)for(let l in e){if(ei(l))continue;const h=e[l];let d;s&&ve(s,d=Gn(l))?!i||!i.includes(d)?t[d]=h:(c||(c={}))[d]=h:la(n.emitsOptions,l)||(!(l in r)||h!==r[l])&&(r[l]=h,a=!0)}if(i){const l=Ee(t),h=c||Se;for(let d=0;d<i.length;d++){const p=i[d];t[p]=Rc(s,l,p,h[p],n,!ve(h,p))}}return a}function Rc(n,e,t,r,s,i){const a=n[t];if(a!=null){const c=ve(a,"default");if(c&&r===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&oe(l)){const{propsDefaults:h}=s;if(t in h)r=h[t];else{const d=Di(s);r=h[t]=l.call(null,e),d()}}else r=l;s.ce&&s.ce._setProp(t,r)}a[0]&&(i&&!c?r=!1:a[1]&&(r===""||r===Pr(t))&&(r=!0))}return r}const ky=new WeakMap;function Yd(n,e,t=!1){const r=t?ky:e.propsCache,s=r.get(n);if(s)return s;const i=n.props,a={},c=[];let l=!1;if(!oe(n)){const d=p=>{l=!0;const[g,S]=Yd(p,e,!0);et(a,g),S&&c.push(...S)};!t&&e.mixins.length&&e.mixins.forEach(d),n.extends&&d(n.extends),n.mixins&&n.mixins.forEach(d)}if(!i&&!l)return Ce(n)&&r.set(n,Yr),Yr;if(ne(i))for(let d=0;d<i.length;d++){const p=Gn(i[d]);rh(p)&&(a[p]=Se)}else if(i)for(const d in i){const p=Gn(d);if(rh(p)){const g=i[d],S=a[p]=ne(g)||oe(g)?{type:g}:et({},g),k=S.type;let L=!1,B=!0;if(ne(k))for(let H=0;H<k.length;++H){const K=k[H],Q=oe(K)&&K.name;if(Q==="Boolean"){L=!0;break}else Q==="String"&&(B=!1)}else L=oe(k)&&k.name==="Boolean";S[0]=L,S[1]=B,(L||ve(S,"default"))&&c.push(p)}}const h=[a,c];return Ce(n)&&r.set(n,h),h}function rh(n){return n[0]!=="$"&&!ei(n)}const gl=n=>n==="_"||n==="_ctx"||n==="$stable",_l=n=>ne(n)?n.map(Wt):[Wt(n)],Vy=(n,e,t)=>{if(e._n)return e;const r=kr((...s)=>_l(e(...s)),t);return r._c=!1,r},Xd=(n,e,t)=>{const r=n._ctx;for(const s in n){if(gl(s))continue;const i=n[s];if(oe(i))e[s]=Vy(s,i,r);else if(i!=null){const a=_l(i);e[s]=()=>a}}},Zd=(n,e)=>{const t=_l(e);n.slots.default=()=>t},ep=(n,e,t)=>{for(const r in e)(t||!gl(r))&&(n[r]=e[r])},Dy=(n,e,t)=>{const r=n.slots=Gd();if(n.vnode.shapeFlag&32){const s=e._;s?(ep(r,e,t),t&&ud(r,"_",s,!0)):Xd(e,r)}else e&&Zd(n,e)},Ny=(n,e,t)=>{const{vnode:r,slots:s}=n;let i=!0,a=Se;if(r.shapeFlag&32){const c=e._;c?t&&c===1?i=!1:ep(s,e,t):(i=!e.$stable,Xd(e,s)),a=e}else e&&(Zd(n,e),a={default:1});if(i)for(const c in s)!gl(c)&&a[c]==null&&delete s[c]},Tt=Gy;function Oy(n){return My(n)}function My(n,e){const t=sa();t.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:a,createText:c,createComment:l,setText:h,setElementText:d,parentNode:p,nextSibling:g,setScopeId:S=Kt,insertStaticContent:k}=n,L=(v,b,P,U=null,D=null,O=null,j=void 0,F=null,x=!!b.dynamicChildren)=>{if(v===b)return;v&&!Er(v,b)&&(U=An(v),_t(v,D,O,!0),v=null),b.patchFlag===-2&&(x=!1,b.dynamicChildren=null);const{type:M,ref:X,shapeFlag:q}=b;switch(M){case ua:B(v,b,P,U);break;case dt:H(v,b,P,U);break;case tc:v==null&&K(b,P,U,j);break;case Xe:T(v,b,P,U,D,O,j,F,x);break;default:q&1?ae(v,b,P,U,D,O,j,F,x):q&6?y(v,b,P,U,D,O,j,F,x):(q&64||q&128)&&M.process(v,b,P,U,D,O,j,F,x,ar)}X!=null&&D?ri(X,v&&v.ref,O,b||v,!b):X==null&&v&&v.ref!=null&&ri(v.ref,null,O,v,!0)},B=(v,b,P,U)=>{if(v==null)r(b.el=c(b.children),P,U);else{const D=b.el=v.el;b.children!==v.children&&h(D,b.children)}},H=(v,b,P,U)=>{v==null?r(b.el=l(b.children||""),P,U):b.el=v.el},K=(v,b,P,U)=>{[v.el,v.anchor]=k(v.children,b,P,U,v.el,v.anchor)},Q=({el:v,anchor:b},P,U)=>{let D;for(;v&&v!==b;)D=g(v),r(v,P,U),v=D;r(b,P,U)},W=({el:v,anchor:b})=>{let P;for(;v&&v!==b;)P=g(v),s(v),v=P;s(b)},ae=(v,b,P,U,D,O,j,F,x)=>{if(b.type==="svg"?j="svg":b.type==="math"&&(j="mathml"),v==null)ue(b,P,U,D,O,j,F,x);else{const M=v.el&&v.el._isVueCE?v.el:null;try{M&&M._beginPatch(),_(v,b,D,O,j,F,x)}finally{M&&M._endPatch()}}},ue=(v,b,P,U,D,O,j,F)=>{let x,M;const{props:X,shapeFlag:q,transition:J,dirs:Z}=v;if(x=v.el=a(v.type,O,X&&X.is,X),q&8?d(x,v.children):q&16&&E(v.children,x,null,U,D,ec(v,O),j,F),Z&&dr(v,null,U,"created"),A(x,v,v.scopeId,j,U),X){for(const Ie in X)Ie!=="value"&&!ei(Ie)&&i(x,Ie,null,X[Ie],O,U);"value"in X&&i(x,"value",null,X.value,O),(M=X.onVnodeBeforeMount)&&Ht(M,U,v)}Z&&dr(v,null,U,"beforeMount");const he=xy(D,J);he&&J.beforeEnter(x),r(x,b,P),((M=X&&X.onVnodeMounted)||he||Z)&&Tt(()=>{M&&Ht(M,U,v),he&&J.enter(x),Z&&dr(v,null,U,"mounted")},D)},A=(v,b,P,U,D)=>{if(P&&S(v,P),U)for(let O=0;O<U.length;O++)S(v,U[O]);if(D){let O=D.subTree;if(b===O||op(O.type)&&(O.ssContent===b||O.ssFallback===b)){const j=D.vnode;A(v,j,j.scopeId,j.slotScopeIds,D.parent)}}},E=(v,b,P,U,D,O,j,F,x=0)=>{for(let M=x;M<v.length;M++){const X=v[M]=F?On(v[M]):Wt(v[M]);L(null,X,b,P,U,D,O,j,F)}},_=(v,b,P,U,D,O,j)=>{const F=b.el=v.el;let{patchFlag:x,dynamicChildren:M,dirs:X}=b;x|=v.patchFlag&16;const q=v.props||Se,J=b.props||Se;let Z;if(P&&pr(P,!1),(Z=J.onVnodeBeforeUpdate)&&Ht(Z,P,b,v),X&&dr(b,v,P,"beforeUpdate"),P&&pr(P,!0),(q.innerHTML&&J.innerHTML==null||q.textContent&&J.textContent==null)&&d(F,""),M?w(v.dynamicChildren,M,F,P,U,ec(b,D),O):j||ye(v,b,F,null,P,U,ec(b,D),O,!1),x>0){if(x&16)I(F,q,J,P,D);else if(x&2&&q.class!==J.class&&i(F,"class",null,J.class,D),x&4&&i(F,"style",q.style,J.style,D),x&8){const he=b.dynamicProps;for(let Ie=0;Ie<he.length;Ie++){const ge=he[Ie],nt=q[ge],rt=J[ge];(rt!==nt||ge==="value")&&i(F,ge,nt,rt,D,P)}}x&1&&v.children!==b.children&&d(F,b.children)}else!j&&M==null&&I(F,q,J,P,D);((Z=J.onVnodeUpdated)||X)&&Tt(()=>{Z&&Ht(Z,P,b,v),X&&dr(b,v,P,"updated")},U)},w=(v,b,P,U,D,O,j)=>{for(let F=0;F<b.length;F++){const x=v[F],M=b[F],X=x.el&&(x.type===Xe||!Er(x,M)||x.shapeFlag&198)?p(x.el):P;L(x,M,X,null,U,D,O,j,!0)}},I=(v,b,P,U,D)=>{if(b!==P){if(b!==Se)for(const O in b)!ei(O)&&!(O in P)&&i(v,O,b[O],null,D,U);for(const O in P){if(ei(O))continue;const j=P[O],F=b[O];j!==F&&O!=="value"&&i(v,O,F,j,D,U)}"value"in P&&i(v,"value",b.value,P.value,D)}},T=(v,b,P,U,D,O,j,F,x)=>{const M=b.el=v?v.el:c(""),X=b.anchor=v?v.anchor:c("");let{patchFlag:q,dynamicChildren:J,slotScopeIds:Z}=b;Z&&(F=F?F.concat(Z):Z),v==null?(r(M,P,U),r(X,P,U),E(b.children||[],P,X,D,O,j,F,x)):q>0&&q&64&&J&&v.dynamicChildren?(w(v.dynamicChildren,J,P,D,O,j,F),(b.key!=null||D&&b===D.subTree)&&tp(v,b,!0)):ye(v,b,P,X,D,O,j,F,x)},y=(v,b,P,U,D,O,j,F,x)=>{b.slotScopeIds=F,v==null?b.shapeFlag&512?D.ctx.activate(b,P,U,j,x):_e(b,P,U,D,O,j,x):Ge(v,b,x)},_e=(v,b,P,U,D,O,j)=>{const F=v.component=nE(v,U,D);if(aa(v)&&(F.ctx.renderer=ar),rE(F,!1,j),F.asyncDep){if(D&&D.registerDep(F,Le,j),!v.el){const x=F.subTree=Ue(dt);H(null,x,b,P),v.placeholder=x.el}}else Le(F,v,b,P,D,O,j)},Ge=(v,b,P)=>{const U=b.component=v.component;if(Wy(v,b,P))if(U.asyncDep&&!U.asyncResolved){Pe(U,b,P);return}else U.next=b,U.update();else b.el=v.el,U.vnode=b},Le=(v,b,P,U,D,O,j)=>{const F=()=>{if(v.isMounted){let{next:q,bu:J,u:Z,parent:he,vnode:Ie}=v;{const Et=np(v);if(Et){q&&(q.el=Ie.el,Pe(v,q,j)),Et.asyncDep.then(()=>{v.isUnmounted||F()});return}}let ge=q,nt;pr(v,!1),q?(q.el=Ie.el,Pe(v,q,j)):q=Ie,J&&ho(J),(nt=q.props&&q.props.onVnodeBeforeUpdate)&&Ht(nt,he,q,Ie),pr(v,!0);const rt=ih(v),yt=v.subTree;v.subTree=rt,L(yt,rt,p(yt.el),An(yt),v,D,O),q.el=rt.el,ge===null&&Ky(v,rt.el),Z&&Tt(Z,D),(nt=q.props&&q.props.onVnodeUpdated)&&Tt(()=>Ht(nt,he,q,Ie),D)}else{let q;const{el:J,props:Z}=b,{bm:he,m:Ie,parent:ge,root:nt,type:rt}=v,yt=si(b);pr(v,!1),he&&ho(he),!yt&&(q=Z&&Z.onVnodeBeforeMount)&&Ht(q,ge,b),pr(v,!0);{nt.ce&&nt.ce._def.shadowRoot!==!1&&nt.ce._injectChildStyle(rt);const Et=v.subTree=ih(v);L(null,Et,P,U,v,D,O),b.el=Et.el}if(Ie&&Tt(Ie,D),!yt&&(q=Z&&Z.onVnodeMounted)){const Et=b;Tt(()=>Ht(q,ge,Et),D)}(b.shapeFlag&256||ge&&si(ge.vnode)&&ge.vnode.shapeFlag&256)&&v.a&&Tt(v.a,D),v.isMounted=!0,b=P=U=null}};v.scope.on();const x=v.effect=new pd(F);v.scope.off();const M=v.update=x.run.bind(x),X=v.job=x.runIfDirty.bind(x);X.i=v,X.id=v.uid,x.scheduler=()=>ml(X),pr(v,!0),M()},Pe=(v,b,P)=>{b.component=v;const U=v.vnode.props;v.vnode=b,v.next=null,Py(v,b.props,U,P),Ny(v,b.children,P),gn(),Ju(v),_n()},ye=(v,b,P,U,D,O,j,F,x=!1)=>{const M=v&&v.children,X=v?v.shapeFlag:0,q=b.children,{patchFlag:J,shapeFlag:Z}=b;if(J>0){if(J&128){xr(M,q,P,U,D,O,j,F,x);return}else if(J&256){At(M,q,P,U,D,O,j,F,x);return}}Z&8?(X&16&&on(M,D,O),q!==M&&d(P,q)):X&16?Z&16?xr(M,q,P,U,D,O,j,F,x):on(M,D,O,!0):(X&8&&d(P,""),Z&16&&E(q,P,U,D,O,j,F,x))},At=(v,b,P,U,D,O,j,F,x)=>{v=v||Yr,b=b||Yr;const M=v.length,X=b.length,q=Math.min(M,X);let J;for(J=0;J<q;J++){const Z=b[J]=x?On(b[J]):Wt(b[J]);L(v[J],Z,P,null,D,O,j,F,x)}M>X?on(v,D,O,!0,!1,q):E(b,P,U,D,O,j,F,x,q)},xr=(v,b,P,U,D,O,j,F,x)=>{let M=0;const X=b.length;let q=v.length-1,J=X-1;for(;M<=q&&M<=J;){const Z=v[M],he=b[M]=x?On(b[M]):Wt(b[M]);if(Er(Z,he))L(Z,he,P,null,D,O,j,F,x);else break;M++}for(;M<=q&&M<=J;){const Z=v[q],he=b[J]=x?On(b[J]):Wt(b[J]);if(Er(Z,he))L(Z,he,P,null,D,O,j,F,x);else break;q--,J--}if(M>q){if(M<=J){const Z=J+1,he=Z<X?b[Z].el:U;for(;M<=J;)L(null,b[M]=x?On(b[M]):Wt(b[M]),P,he,D,O,j,F,x),M++}}else if(M>J)for(;M<=q;)_t(v[M],D,O,!0),M++;else{const Z=M,he=M,Ie=new Map;for(M=he;M<=J;M++){const Qe=b[M]=x?On(b[M]):Wt(b[M]);Qe.key!=null&&Ie.set(Qe.key,M)}let ge,nt=0;const rt=J-he+1;let yt=!1,Et=0;const Nt=new Array(rt);for(M=0;M<rt;M++)Nt[M]=0;for(M=Z;M<=q;M++){const Qe=v[M];if(nt>=rt){_t(Qe,D,O,!0);continue}let qe;if(Qe.key!=null)qe=Ie.get(Qe.key);else for(ge=he;ge<=J;ge++)if(Nt[ge-he]===0&&Er(Qe,b[ge])){qe=ge;break}qe===void 0?_t(Qe,D,O,!0):(Nt[qe-he]=M+1,qe>=Et?Et=qe:yt=!0,L(Qe,b[qe],P,null,D,O,j,F,x),nt++)}const Fr=yt?Ly(Nt):Yr;for(ge=Fr.length-1,M=rt-1;M>=0;M--){const Qe=he+M,qe=b[Qe],ks=b[Qe+1],cr=Qe+1<X?ks.el||ks.placeholder:U;Nt[M]===0?L(null,qe,P,cr,D,O,j,F,x):yt&&(ge<0||M!==Fr[ge]?Bt(qe,P,cr,2):ge--)}}},Bt=(v,b,P,U,D=null)=>{const{el:O,type:j,transition:F,children:x,shapeFlag:M}=v;if(M&6){Bt(v.component.subTree,b,P,U);return}if(M&128){v.suspense.move(b,P,U);return}if(M&64){j.move(v,b,P,ar);return}if(j===Xe){r(O,b,P);for(let q=0;q<x.length;q++)Bt(x[q],b,P,U);r(v.anchor,b,P);return}if(j===tc){Q(v,b,P);return}if(U!==2&&M&1&&F)if(U===0)F.beforeEnter(O),r(O,b,P),Tt(()=>F.enter(O),D);else{const{leave:q,delayLeave:J,afterLeave:Z}=F,he=()=>{v.ctx.isUnmounted?s(O):r(O,b,P)},Ie=()=>{O._isLeaving&&O[un](!0),q(O,()=>{he(),Z&&Z()})};J?J(O,he,Ie):Ie()}else r(O,b,P)},_t=(v,b,P,U=!1,D=!1)=>{const{type:O,props:j,ref:F,children:x,dynamicChildren:M,shapeFlag:X,patchFlag:q,dirs:J,cacheIndex:Z}=v;if(q===-2&&(D=!1),F!=null&&(gn(),ri(F,null,P,v,!0),_n()),Z!=null&&(b.renderCache[Z]=void 0),X&256){b.ctx.deactivate(v);return}const he=X&1&&J,Ie=!si(v);let ge;if(Ie&&(ge=j&&j.onVnodeBeforeUnmount)&&Ht(ge,b,v),X&6)Cs(v.component,P,U);else{if(X&128){v.suspense.unmount(P,U);return}he&&dr(v,null,b,"beforeUnmount"),X&64?v.type.remove(v,b,P,ar,U):M&&!M.hasOnce&&(O!==Xe||q>0&&q&64)?on(M,b,P,!1,!0):(O===Xe&&q&384||!D&&X&16)&&on(x,b,P),U&&Rs(v)}(Ie&&(ge=j&&j.onVnodeUnmounted)||he)&&Tt(()=>{ge&&Ht(ge,b,v),he&&dr(v,null,b,"unmounted")},P)},Rs=v=>{const{type:b,el:P,anchor:U,transition:D}=v;if(b===Xe){Lr(P,U);return}if(b===tc){W(v);return}const O=()=>{s(P),D&&!D.persisted&&D.afterLeave&&D.afterLeave()};if(v.shapeFlag&1&&D&&!D.persisted){const{leave:j,delayLeave:F}=D,x=()=>j(P,O);F?F(v.el,O,x):x()}else O()},Lr=(v,b)=>{let P;for(;v!==b;)P=g(v),s(v),v=P;s(b)},Cs=(v,b,P)=>{const{bum:U,scope:D,job:O,subTree:j,um:F,m:x,a:M}=v;sh(x),sh(M),U&&ho(U),D.stop(),O&&(O.flags|=8,_t(j,v,b,P)),F&&Tt(F,b),Tt(()=>{v.isUnmounted=!0},b)},on=(v,b,P,U=!1,D=!1,O=0)=>{for(let j=O;j<v.length;j++)_t(v[j],b,P,U,D)},An=v=>{if(v.shapeFlag&6)return An(v.component.subTree);if(v.shapeFlag&128)return v.suspense.next();const b=g(v.anchor||v.el),P=b&&b[sy];return P?g(P):b};let or=!1;const Ps=(v,b,P)=>{v==null?b._vnode&&_t(b._vnode,null,null,!0):L(b._vnode||null,v,b,null,null,null,P),b._vnode=v,or||(or=!0,Ju(),Vd(),or=!1)},ar={p:L,um:_t,m:Bt,r:Rs,mt:_e,mc:E,pc:ye,pbc:w,n:An,o:n};return{render:Ps,hydrate:void 0,createApp:by(Ps)}}function ec({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function pr({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function xy(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function tp(n,e,t=!1){const r=n.children,s=e.children;if(ne(r)&&ne(s))for(let i=0;i<r.length;i++){const a=r[i];let c=s[i];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=s[i]=On(s[i]),c.el=a.el),!t&&c.patchFlag!==-2&&tp(a,c)),c.type===ua&&c.patchFlag!==-1&&(c.el=a.el),c.type===dt&&!c.el&&(c.el=a.el)}}function Ly(n){const e=n.slice(),t=[0];let r,s,i,a,c;const l=n.length;for(r=0;r<l;r++){const h=n[r];if(h!==0){if(s=t[t.length-1],n[s]<h){e[r]=s,t.push(r);continue}for(i=0,a=t.length-1;i<a;)c=i+a>>1,n[t[c]]<h?i=c+1:a=c;h<n[t[i]]&&(i>0&&(e[r]=t[i-1]),t[i]=r)}}for(i=t.length,a=t[i-1];i-- >0;)t[i]=a,a=e[a];return t}function np(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:np(e)}function sh(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const Fy=Symbol.for("v-scx"),Uy=()=>fo(Fy);function oi(n,e,t){return rp(n,e,t)}function rp(n,e,t=Se){const{immediate:r,deep:s,flush:i,once:a}=t,c=et({},t),l=e&&r||!e&&i!=="post";let h;if(vi){if(i==="sync"){const S=Uy();h=S.__watcherHandles||(S.__watcherHandles=[])}else if(!l){const S=()=>{};return S.stop=Kt,S.resume=Kt,S.pause=Kt,S}}const d=pt;c.call=(S,k,L)=>Lt(S,d,k,L);let p=!1;i==="post"?c.scheduler=S=>{Tt(S,d&&d.suspense)}:i!=="sync"&&(p=!0,c.scheduler=(S,k)=>{k?S():ml(S)}),c.augmentJob=S=>{e&&(S.flags|=4),p&&(S.flags|=2,d&&(S.id=d.uid,S.i=d))};const g=Z_(n,e,c);return vi&&(h?h.push(g):l&&g()),g}function By(n,e,t){const r=this.proxy,s=xe(n)?n.includes(".")?sp(r,n):()=>r[n]:n.bind(r,r);let i;oe(e)?i=e:(i=e.handler,t=e);const a=Di(this),c=rp(s,i.bind(r),t);return a(),c}function sp(n,e){const t=e.split(".");return()=>{let r=n;for(let s=0;s<t.length&&r;s++)r=r[t[s]];return r}}const $y=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${Gn(e)}Modifiers`]||n[`${Pr(e)}Modifiers`];function jy(n,e,...t){if(n.isUnmounted)return;const r=n.vnode.props||Se;let s=t;const i=e.startsWith("update:"),a=i&&$y(r,e.slice(7));a&&(a.trim&&(s=t.map(d=>xe(d)?d.trim():d)),a.number&&(s=t.map(il)));let c,l=r[c=Ka(e)]||r[c=Ka(Gn(e))];!l&&i&&(l=r[c=Ka(Pr(e))]),l&&Lt(l,n,6,s);const h=r[c+"Once"];if(h){if(!n.emitted)n.emitted={};else if(n.emitted[c])return;n.emitted[c]=!0,Lt(h,n,6,s)}}const Hy=new WeakMap;function ip(n,e,t=!1){const r=t?Hy:e.emitsCache,s=r.get(n);if(s!==void 0)return s;const i=n.emits;let a={},c=!1;if(!oe(n)){const l=h=>{const d=ip(h,e,!0);d&&(c=!0,et(a,d))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!i&&!c?(Ce(n)&&r.set(n,null),null):(ne(i)?i.forEach(l=>a[l]=null):et(a,i),Ce(n)&&r.set(n,a),a)}function la(n,e){return!n||!ta(e)?!1:(e=e.slice(2).replace(/Once$/,""),ve(n,e[0].toLowerCase()+e.slice(1))||ve(n,Pr(e))||ve(n,e))}function ih(n){const{type:e,vnode:t,proxy:r,withProxy:s,propsOptions:[i],slots:a,attrs:c,emit:l,render:h,renderCache:d,props:p,data:g,setupState:S,ctx:k,inheritAttrs:L}=n,B=Po(n);let H,K;try{if(t.shapeFlag&4){const W=s||r,ae=W;H=Wt(h.call(ae,W,d,p,S,g,k)),K=c}else{const W=e;H=Wt(W.length>1?W(p,{attrs:c,slots:a,emit:l}):W(p,null)),K=e.props?c:qy(c)}}catch(W){ai.length=0,oa(W,n,1),H=Ue(dt)}let Q=H;if(K&&L!==!1){const W=Object.keys(K),{shapeFlag:ae}=Q;W.length&&ae&7&&(i&&W.some(nl)&&(K=zy(K,i)),Q=Jn(Q,K,!1,!0))}return t.dirs&&(Q=Jn(Q,null,!1,!0),Q.dirs=Q.dirs?Q.dirs.concat(t.dirs):t.dirs),t.transition&&yi(Q,t.transition),H=Q,Po(B),H}const qy=n=>{let e;for(const t in n)(t==="class"||t==="style"||ta(t))&&((e||(e={}))[t]=n[t]);return e},zy=(n,e)=>{const t={};for(const r in n)(!nl(r)||!(r.slice(9)in e))&&(t[r]=n[r]);return t};function Wy(n,e,t){const{props:r,children:s,component:i}=n,{props:a,children:c,patchFlag:l}=e,h=i.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return r?oh(r,a,h):!!a;if(l&8){const d=e.dynamicProps;for(let p=0;p<d.length;p++){const g=d[p];if(a[g]!==r[g]&&!la(h,g))return!0}}}else return(s||c)&&(!c||!c.$stable)?!0:r===a?!1:r?a?oh(r,a,h):!0:!!a;return!1}function oh(n,e,t){const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==n[i]&&!la(t,i))return!0}return!1}function Ky({vnode:n,parent:e},t){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===n&&(r.el=n.el),r===n)(n=e.vnode).el=t,e=e.parent;else break}}const op=n=>n.__isSuspense;function Gy(n,e){e&&e.pendingBranch?ne(n)?e.effects.push(...n):e.effects.push(n):ry(n)}const Xe=Symbol.for("v-fgt"),ua=Symbol.for("v-txt"),dt=Symbol.for("v-cmt"),tc=Symbol.for("v-stc"),ai=[];let wt=null;function le(n=!1){ai.push(wt=n?null:[])}function Qy(){ai.pop(),wt=ai[ai.length-1]||null}let Ei=1;function Do(n,e=!1){Ei+=n,n<0&&wt&&e&&(wt.hasOnce=!0)}function ap(n){return n.dynamicChildren=Ei>0?wt||Yr:null,Qy(),Ei>0&&wt&&wt.push(n),n}function we(n,e,t,r,s,i){return ap(re(n,e,t,r,s,i,!0))}function Gt(n,e,t,r,s){return ap(Ue(n,e,t,r,s,!0))}function No(n){return n?n.__v_isVNode===!0:!1}function Er(n,e){return n.type===e.type&&n.key===e.key}const cp=({key:n})=>n??null,po=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?xe(n)||ct(n)||oe(n)?{i:Pt,r:n,k:e,f:!!t}:n:null);function re(n,e=null,t=null,r=0,s=null,i=n===Xe?0:1,a=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&cp(e),ref:e&&po(e),scopeId:Nd,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Pt};return c?(yl(l,t),i&128&&n.normalize(l)):t&&(l.shapeFlag|=xe(t)?8:16),Ei>0&&!a&&wt&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&wt.push(l),l}const Ue=Jy;function Jy(n,e=null,t=null,r=0,s=null,i=!1){if((!n||n===yy)&&(n=dt),No(n)){const c=Jn(n,e,!0);return t&&yl(c,t),Ei>0&&!i&&wt&&(c.shapeFlag&6?wt[wt.indexOf(n)]=c:wt.push(c)),c.patchFlag=-2,c}if(aE(n)&&(n=n.__vccOpts),e){e=Yy(e);let{class:c,style:l}=e;c&&!xe(c)&&(e.class=pi(c)),Ce(l)&&(pl(l)&&!ne(l)&&(l=et({},l)),e.style=ol(l))}const a=xe(n)?1:op(n)?128:Od(n)?64:Ce(n)?4:oe(n)?2:0;return re(n,e,t,r,s,a,i,!0)}function Yy(n){return n?pl(n)||Qd(n)?et({},n):n:null}function Jn(n,e,t=!1,r=!1){const{props:s,ref:i,patchFlag:a,children:c,transition:l}=n,h=e?Zy(s||{},e):s,d={__v_isVNode:!0,__v_skip:!0,type:n.type,props:h,key:h&&cp(h),ref:e&&e.ref?t&&i?ne(i)?i.concat(po(e)):[i,po(e)]:po(e):i,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:c,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Xe?a===-1?16:a|16:a,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Jn(n.ssContent),ssFallback:n.ssFallback&&Jn(n.ssFallback),placeholder:n.placeholder,el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&r&&yi(d,l.clone(d)),d}function Xy(n=" ",e=0){return Ue(ua,null,n,e)}function Vt(n="",e=!1){return e?(le(),Gt(dt,null,n)):Ue(dt,null,n)}function Wt(n){return n==null||typeof n=="boolean"?Ue(dt):ne(n)?Ue(Xe,null,n.slice()):No(n)?On(n):Ue(ua,null,String(n))}function On(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Jn(n)}function yl(n,e){let t=0;const{shapeFlag:r}=n;if(e==null)e=null;else if(ne(e))t=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),yl(n,s()),s._c&&(s._d=!0));return}else{t=32;const s=e._;!s&&!Qd(e)?e._ctx=Pt:s===3&&Pt&&(Pt.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else oe(e)?(e={default:e,_ctx:Pt},t=32):(e=String(e),r&64?(t=16,e=[Xy(e)]):t=8);n.children=e,n.shapeFlag|=t}function Zy(...n){const e={};for(let t=0;t<n.length;t++){const r=n[t];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=pi([e.class,r.class]));else if(s==="style")e.style=ol([e.style,r.style]);else if(ta(s)){const i=e[s],a=r[s];a&&i!==a&&!(ne(i)&&i.includes(a))&&(e[s]=i?[].concat(i,a):a)}else s!==""&&(e[s]=r[s])}return e}function Ht(n,e,t,r=null){Lt(n,e,7,[t,r])}const eE=Wd();let tE=0;function nE(n,e,t){const r=n.type,s=(e?e.appContext:n.appContext)||eE,i={uid:tE++,vnode:n,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new S_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Yd(r,s),emitsOptions:ip(r,s),emit:null,emitted:null,propsDefaults:Se,inheritAttrs:r.inheritAttrs,ctx:Se,data:Se,props:Se,attrs:Se,slots:Se,refs:Se,setupState:Se,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=jy.bind(null,i),n.ce&&n.ce(i),i}let pt=null;const lp=()=>pt||Pt;let Oo,Cc;{const n=sa(),e=(t,r)=>{let s;return(s=n[t])||(s=n[t]=[]),s.push(r),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};Oo=e("__VUE_INSTANCE_SETTERS__",t=>pt=t),Cc=e("__VUE_SSR_SETTERS__",t=>vi=t)}const Di=n=>{const e=pt;return Oo(n),n.scope.on(),()=>{n.scope.off(),Oo(e)}},ah=()=>{pt&&pt.scope.off(),Oo(null)};function up(n){return n.vnode.shapeFlag&4}let vi=!1;function rE(n,e=!1,t=!1){e&&Cc(e);const{props:r,children:s}=n.vnode,i=up(n);Cy(n,r,i,e),Dy(n,s,t||e);const a=i?sE(n,e):void 0;return e&&Cc(!1),a}function sE(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,Ey);const{setup:r}=t;if(r){gn();const s=n.setupContext=r.length>1?oE(n):null,i=Di(n),a=Vi(r,n,0,[n.props,s]),c=od(a);if(_n(),i(),(c||n.sp)&&!si(n)&&Bd(n),c){if(a.then(ah,ah),e)return a.then(l=>{ch(n,l)}).catch(l=>{oa(l,n,0)});n.asyncDep=a}else ch(n,a)}else hp(n)}function ch(n,e,t){oe(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Ce(e)&&(n.setupState=Cd(e)),hp(n)}function hp(n,e,t){const r=n.type;n.render||(n.render=r.render||Kt);{const s=Di(n);gn();try{vy(n)}finally{_n(),s()}}}const iE={get(n,e){return ot(n,"get",""),n[e]}};function oE(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,iE),slots:n.slots,emit:n.emit,expose:e}}function ha(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(Cd(W_(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in ii)return ii[t](n)},has(e,t){return t in e||t in ii}})):n.proxy}function aE(n){return oe(n)&&"__vccOpts"in n}const cE=(n,e)=>Y_(n,e,vi);function lE(n,e,t){try{Do(-1);const r=arguments.length;return r===2?Ce(e)&&!ne(e)?No(e)?Ue(n,null,[e]):Ue(n,e):Ue(n,null,e):(r>3?t=Array.prototype.slice.call(arguments,2):r===3&&No(t)&&(t=[t]),Ue(n,e,t))}finally{Do(1)}}const uE="3.5.24";let Pc;const lh=typeof window<"u"&&window.trustedTypes;if(lh)try{Pc=lh.createPolicy("vue",{createHTML:n=>n})}catch{}const fp=Pc?n=>Pc.createHTML(n):n=>n,hE="http://www.w3.org/2000/svg",fE="http://www.w3.org/1998/Math/MathML",ln=typeof document<"u"?document:null,uh=ln&&ln.createElement("template"),dE={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,r)=>{const s=e==="svg"?ln.createElementNS(hE,n):e==="mathml"?ln.createElementNS(fE,n):t?ln.createElement(n,{is:t}):ln.createElement(n);return n==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:n=>ln.createTextNode(n),createComment:n=>ln.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>ln.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,r,s,i){const a=t?t.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),t),!(s===i||!(s=s.nextSibling)););else{uh.innerHTML=fp(r==="svg"?`<svg>${n}</svg>`:r==="mathml"?`<math>${n}</math>`:n);const c=uh.content;if(r==="svg"||r==="mathml"){const l=c.firstChild;for(;l.firstChild;)c.appendChild(l.firstChild);c.removeChild(l)}e.insertBefore(c,t)}return[a?a.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},Vn="transition",Ws="animation",Ti=Symbol("_vtc"),dp={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},pE=et({},Md,dp),mE=n=>(n.displayName="Transition",n.props=pE,n),Es=mE((n,{slots:e})=>lE(ay,gE(n),e)),mr=(n,e=[])=>{ne(n)?n.forEach(t=>t(...e)):n&&n(...e)},hh=n=>n?ne(n)?n.some(e=>e.length>1):n.length>1:!1;function gE(n){const e={};for(const T in n)T in dp||(e[T]=n[T]);if(n.css===!1)return e;const{name:t="v",type:r,duration:s,enterFromClass:i=`${t}-enter-from`,enterActiveClass:a=`${t}-enter-active`,enterToClass:c=`${t}-enter-to`,appearFromClass:l=i,appearActiveClass:h=a,appearToClass:d=c,leaveFromClass:p=`${t}-leave-from`,leaveActiveClass:g=`${t}-leave-active`,leaveToClass:S=`${t}-leave-to`}=n,k=_E(s),L=k&&k[0],B=k&&k[1],{onBeforeEnter:H,onEnter:K,onEnterCancelled:Q,onLeave:W,onLeaveCancelled:ae,onBeforeAppear:ue=H,onAppear:A=K,onAppearCancelled:E=Q}=e,_=(T,y,_e,Ge)=>{T._enterCancelled=Ge,gr(T,y?d:c),gr(T,y?h:a),_e&&_e()},w=(T,y)=>{T._isLeaving=!1,gr(T,p),gr(T,S),gr(T,g),y&&y()},I=T=>(y,_e)=>{const Ge=T?A:K,Le=()=>_(y,T,_e);mr(Ge,[y,Le]),fh(()=>{gr(y,T?l:i),cn(y,T?d:c),hh(Ge)||dh(y,r,L,Le)})};return et(e,{onBeforeEnter(T){mr(H,[T]),cn(T,i),cn(T,a)},onBeforeAppear(T){mr(ue,[T]),cn(T,l),cn(T,h)},onEnter:I(!1),onAppear:I(!0),onLeave(T,y){T._isLeaving=!0;const _e=()=>w(T,y);cn(T,p),T._enterCancelled?(cn(T,g),gh(T)):(gh(T),cn(T,g)),fh(()=>{T._isLeaving&&(gr(T,p),cn(T,S),hh(W)||dh(T,r,B,_e))}),mr(W,[T,_e])},onEnterCancelled(T){_(T,!1,void 0,!0),mr(Q,[T])},onAppearCancelled(T){_(T,!0,void 0,!0),mr(E,[T])},onLeaveCancelled(T){w(T),mr(ae,[T])}})}function _E(n){if(n==null)return null;if(Ce(n))return[nc(n.enter),nc(n.leave)];{const e=nc(n);return[e,e]}}function nc(n){return y_(n)}function cn(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n[Ti]||(n[Ti]=new Set)).add(e)}function gr(n,e){e.split(/\s+/).forEach(r=>r&&n.classList.remove(r));const t=n[Ti];t&&(t.delete(e),t.size||(n[Ti]=void 0))}function fh(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let yE=0;function dh(n,e,t,r){const s=n._endId=++yE,i=()=>{s===n._endId&&r()};if(t!=null)return setTimeout(i,t);const{type:a,timeout:c,propCount:l}=EE(n,e);if(!a)return r();const h=a+"end";let d=0;const p=()=>{n.removeEventListener(h,g),i()},g=S=>{S.target===n&&++d>=l&&p()};setTimeout(()=>{d<l&&p()},c+1),n.addEventListener(h,g)}function EE(n,e){const t=window.getComputedStyle(n),r=k=>(t[k]||"").split(", "),s=r(`${Vn}Delay`),i=r(`${Vn}Duration`),a=ph(s,i),c=r(`${Ws}Delay`),l=r(`${Ws}Duration`),h=ph(c,l);let d=null,p=0,g=0;e===Vn?a>0&&(d=Vn,p=a,g=i.length):e===Ws?h>0&&(d=Ws,p=h,g=l.length):(p=Math.max(a,h),d=p>0?a>h?Vn:Ws:null,g=d?d===Vn?i.length:l.length:0);const S=d===Vn&&/\b(?:transform|all)(?:,|$)/.test(r(`${Vn}Property`).toString());return{type:d,timeout:p,propCount:g,hasTransform:S}}function ph(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,r)=>mh(t)+mh(n[r])))}function mh(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function gh(n){return(n?n.ownerDocument:document).body.offsetHeight}function vE(n,e,t){const r=n[Ti];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const _h=Symbol("_vod"),TE=Symbol("_vsh"),IE=Symbol(""),wE=/(?:^|;)\s*display\s*:/;function AE(n,e,t){const r=n.style,s=xe(t);let i=!1;if(t&&!s){if(e)if(xe(e))for(const a of e.split(";")){const c=a.slice(0,a.indexOf(":")).trim();t[c]==null&&mo(r,c,"")}else for(const a in e)t[a]==null&&mo(r,a,"");for(const a in t)a==="display"&&(i=!0),mo(r,a,t[a])}else if(s){if(e!==t){const a=r[IE];a&&(t+=";"+a),r.cssText=t,i=wE.test(t)}}else e&&n.removeAttribute("style");_h in n&&(n[_h]=i?r.display:"",n[TE]&&(r.display="none"))}const yh=/\s*!important$/;function mo(n,e,t){if(ne(t))t.forEach(r=>mo(n,e,r));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const r=SE(n,e);yh.test(t)?n.setProperty(Pr(r),t.replace(yh,""),"important"):n[r]=t}}const Eh=["Webkit","Moz","ms"],rc={};function SE(n,e){const t=rc[e];if(t)return t;let r=Gn(e);if(r!=="filter"&&r in n)return rc[e]=r;r=ld(r);for(let s=0;s<Eh.length;s++){const i=Eh[s]+r;if(i in n)return rc[e]=i}return e}const vh="http://www.w3.org/1999/xlink";function Th(n,e,t,r,s,i=A_(e)){r&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(vh,e.slice(6,e.length)):n.setAttributeNS(vh,e,t):t==null||i&&!hd(t)?n.removeAttribute(e):n.setAttribute(e,i?"":rr(t)?String(t):t)}function Ih(n,e,t,r,s){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?fp(t):t);return}const i=n.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const c=i==="OPTION"?n.getAttribute("value")||"":n.value,l=t==null?n.type==="checkbox"?"on":"":String(t);(c!==l||!("_value"in n))&&(n.value=l),t==null&&n.removeAttribute(e),n._value=t;return}let a=!1;if(t===""||t==null){const c=typeof n[e];c==="boolean"?t=hd(t):t==null&&c==="string"?(t="",a=!0):c==="number"&&(t=0,a=!0)}try{n[e]=t}catch{}a&&n.removeAttribute(s||e)}function qr(n,e,t,r){n.addEventListener(e,t,r)}function bE(n,e,t,r){n.removeEventListener(e,t,r)}const wh=Symbol("_vei");function RE(n,e,t,r,s=null){const i=n[wh]||(n[wh]={}),a=i[e];if(r&&a)a.value=r;else{const[c,l]=CE(e);if(r){const h=i[e]=VE(r,s);qr(n,c,h,l)}else a&&(bE(n,c,a,l),i[e]=void 0)}}const Ah=/(?:Once|Passive|Capture)$/;function CE(n){let e;if(Ah.test(n)){e={};let r;for(;r=n.match(Ah);)n=n.slice(0,n.length-r[0].length),e[r[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Pr(n.slice(2)),e]}let sc=0;const PE=Promise.resolve(),kE=()=>sc||(PE.then(()=>sc=0),sc=Date.now());function VE(n,e){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;Lt(DE(r,t.value),e,5,[r])};return t.value=n,t.attached=kE(),t}function DE(n,e){if(ne(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const Sh=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,NE=(n,e,t,r,s,i)=>{const a=s==="svg";e==="class"?vE(n,r,a):e==="style"?AE(n,t,r):ta(e)?nl(e)||RE(n,e,t,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):OE(n,e,r,a))?(Ih(n,e,r),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Th(n,e,r,a,i,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!xe(r))?Ih(n,Gn(e),r,i,e):(e==="true-value"?n._trueValue=r:e==="false-value"&&(n._falseValue=r),Th(n,e,r,a))};function OE(n,e,t,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in n&&Sh(e)&&oe(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&n.tagName==="IFRAME"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=n.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Sh(e)&&xe(t)?!1:e in n}const bh=n=>{const e=n.props["onUpdate:modelValue"]||!1;return ne(e)?t=>ho(e,t):e};function ME(n){n.target.composing=!0}function Rh(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ic=Symbol("_assign");function Ch(n,e,t){return e&&(n=n.trim()),t&&(n=il(n)),n}const rs={created(n,{modifiers:{lazy:e,trim:t,number:r}},s){n[ic]=bh(s);const i=r||s.props&&s.props.type==="number";qr(n,e?"change":"input",a=>{a.target.composing||n[ic](Ch(n.value,t,i))}),(t||i)&&qr(n,"change",()=>{n.value=Ch(n.value,t,i)}),e||(qr(n,"compositionstart",ME),qr(n,"compositionend",Rh),qr(n,"change",Rh))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:r,trim:s,number:i}},a){if(n[ic]=bh(a),n.composing)return;const c=(i||n.type==="number")&&!/^0\d/.test(n.value)?il(n.value):n.value,l=e??"";c!==l&&(document.activeElement===n&&n.type!=="range"&&(r&&e===t||s&&n.value.trim()===l)||(n.value=l))}},xE=["ctrl","shift","alt","meta"],LE={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>xE.some(t=>n[`${t}Key`]&&!e.includes(t))},fa=(n,e)=>{const t=n._withMods||(n._withMods={}),r=e.join(".");return t[r]||(t[r]=((s,...i)=>{for(let a=0;a<e.length;a++){const c=LE[e[a]];if(c&&c(s,e))return}return n(s,...i)}))},FE=et({patchProp:NE},dE);let Ph;function UE(){return Ph||(Ph=Oy(FE))}const BE=((...n)=>{const e=UE().createApp(...n),{mount:t}=e;return e.mount=r=>{const s=jE(r);if(!s)return;const i=e._component;!oe(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=t(s,!1,$E(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},e});function $E(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function jE(n){return xe(n)?document.querySelector(n):n}const HE="/FU-Press-Start/assets/FU-logo-C9Kp3nID.png",Ut=(n,e)=>{const t=n.__vccOpts||n;for(const[r,s]of e)t[r]=s;return t},qE=["disabled"],zE={class:"glow-line"},WE={key:1,class:"line"},kh="Aperte Start",KE={__name:"startButton",setup(n){const e=be("");be(0);const t=be(!0);return sn(()=>{let r=0;const s=setInterval(()=>{e.value+=kh.charAt(r),r++,r>=kh.length&&(clearInterval(s),t.value=!1)},200)}),(r,s)=>(le(),we("button",{onClick:s[0]||(s[0]=i=>r.$emit("start")),class:"primary",disabled:t.value},[re("div",{class:pi([{"fade-border orv-container":!t.value}])},[t.value?Vt("",!0):(le(),we("h1",{key:0,class:pi(["blur",[{"primary-hover":!t.value}]])},It(e.value),3)),re("h1",zE,It(e.value),1),t.value?(le(),we("h1",WE,"_")):Vt("",!0)],2)],8,qE))}},GE=Ut(KE,[["__scopeId","data-v-95ac5c3b"]]),QE={class:"content"},JE={__name:"startScreen",emits:["start"],setup(n,{emit:e}){const t=e;return(r,s)=>(le(),we("div",QE,[s[1]||(s[1]=re("img",{src:HE,alt:"Fbula ltima"},null,-1)),s[2]||(s[2]=re("p",{class:"glow-line"},"Aqui comea a sua histria.",-1)),Ue(GE,{onStart:s[0]||(s[0]=i=>t("start"))})]))}},YE=Ut(JE,[["__scopeId","data-v-7bf4bfe5"]]),XE=()=>{};var Vh={};const pp=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},ZE=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=n[t++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=n[t++],a=n[t++],c=n[t++],l=((s&7)<<18|(i&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=n[t++],a=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},mp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const i=n[s],a=s+1<n.length,c=a?n[s+1]:0,l=s+2<n.length,h=l?n[s+2]:0,d=i>>2,p=(i&3)<<4|c>>4;let g=(c&15)<<2|h>>6,S=h&63;l||(S=64,a||(g=64)),r.push(t[d],t[p],t[g],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(pp(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):ZE(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const i=t[n.charAt(s++)],c=s<n.length?t[n.charAt(s)]:0;++s;const h=s<n.length?t[n.charAt(s)]:64;++s;const p=s<n.length?t[n.charAt(s)]:64;if(++s,i==null||c==null||h==null||p==null)throw new ev;const g=i<<2|c>>4;if(r.push(g),h!==64){const S=c<<4&240|h>>2;if(r.push(S),p!==64){const k=h<<6&192|p;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class ev extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tv=function(n){const e=pp(n);return mp.encodeByteArray(e,!0)},Mo=function(n){return tv(n).replace(/\./g,"")},gp=function(n){try{return mp.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function nv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const rv=()=>nv().__FIREBASE_DEFAULTS__,sv=()=>{if(typeof process>"u"||typeof Vh>"u")return;const n=Vh.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},iv=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&gp(n[1]);return e&&JSON.parse(e)},da=()=>{try{return XE()||rv()||sv()||iv()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},_p=n=>da()?.emulatorHosts?.[n],ov=n=>{const e=_p(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},yp=()=>da()?.config,Ep=n=>da()?.[`_${n}`];class av{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function vs(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function vp(n){return(await fetch(n,{credentials:"include"})).ok}function cv(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,i=n.sub||n.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Mo(JSON.stringify(t)),Mo(JSON.stringify(a)),""].join(".")}const ci={};function lv(){const n={prod:[],emulator:[]};for(const e of Object.keys(ci))ci[e]?n.emulator.push(e):n.prod.push(e);return n}function uv(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Dh=!1;function Tp(n,e){if(typeof window>"u"||typeof document>"u"||!vs(window.location.host)||ci[n]===e||ci[n]||Dh)return;ci[n]=e;function t(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=lv().prod.length>0;function a(){const g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function l(g,S){g.setAttribute("width","24"),g.setAttribute("id",S),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function h(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Dh=!0,a()},g}function d(g,S){g.setAttribute("id",S),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=uv(r),S=t("text"),k=document.getElementById(S)||document.createElement("span"),L=t("learnmore"),B=document.getElementById(L)||document.createElement("a"),H=t("preprendIcon"),K=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const Q=g.element;c(Q),d(B,L);const W=h();l(K,H),Q.append(K,k,B,W),document.body.appendChild(Q)}i?(k.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(lt())}function fv(){const n=da()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dv(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pv(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function mv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gv(){const n=lt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function _v(){return!fv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yv(){try{return typeof indexedDB=="object"}catch{return!1}}function Ev(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}const vv="FirebaseError";class wn extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=vv,Object.setPrototypeOf(this,wn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ni.prototype.create)}}class Ni{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?Tv(i,r):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new wn(s,c,r)}}function Tv(n,e){return n.replace(Iv,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Iv=/\{\$([^}]+)}/g;function wv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function wr(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const i=n[s],a=e[s];if(Nh(i)&&Nh(a)){if(!wr(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function Nh(n){return n!==null&&typeof n=="object"}function Oi(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Qs(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Js(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Av(n,e){const t=new Sv(n,e);return t.subscribe.bind(t)}class Sv{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");bv(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=oc),s.error===void 0&&(s.error=oc),s.complete===void 0&&(s.complete=oc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bv(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function oc(){}function Dt(n){return n&&n._delegate?n._delegate:n}class Ar{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const yr="[DEFAULT]";class Rv{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new av;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Pv(e))try{this.getOrInitializeService({instanceIdentifier:yr})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=yr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=yr){return this.instances.has(e)}getOptions(e=yr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[i,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&a.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Cv(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=yr){return this.component?this.component.multipleInstances?e:yr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Cv(n){return n===yr?void 0:n}function Pv(n){return n.instantiationMode==="EAGER"}class kv{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Rv(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var fe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(fe||(fe={}));const Vv={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},Dv=fe.INFO,Nv={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},Ov=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=Nv[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class El{constructor(e){this.name=e,this._logLevel=Dv,this._logHandler=Ov,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Vv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}}const Mv=(n,e)=>e.some(t=>n instanceof t);let Oh,Mh;function xv(){return Oh||(Oh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Lv(){return Mh||(Mh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ip=new WeakMap,kc=new WeakMap,wp=new WeakMap,ac=new WeakMap,vl=new WeakMap;function Fv(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",i),n.removeEventListener("error",a)},i=()=>{t($n(n.result)),s()},a=()=>{r(n.error),s()};n.addEventListener("success",i),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&Ip.set(t,n)}).catch(()=>{}),vl.set(e,n),e}function Uv(n){if(kc.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",a),n.removeEventListener("abort",a)},i=()=>{t(),s()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",i),n.addEventListener("error",a),n.addEventListener("abort",a)});kc.set(n,e)}let Vc={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return kc.get(n);if(e==="objectStoreNames")return n.objectStoreNames||wp.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return $n(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Bv(n){Vc=n(Vc)}function $v(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(cc(this),e,...t);return wp.set(r,e.sort?e.sort():[e]),$n(r)}:Lv().includes(n)?function(...e){return n.apply(cc(this),e),$n(Ip.get(this))}:function(...e){return $n(n.apply(cc(this),e))}}function jv(n){return typeof n=="function"?$v(n):(n instanceof IDBTransaction&&Uv(n),Mv(n,xv())?new Proxy(n,Vc):n)}function $n(n){if(n instanceof IDBRequest)return Fv(n);if(ac.has(n))return ac.get(n);const e=jv(n);return e!==n&&(ac.set(n,e),vl.set(e,n)),e}const cc=n=>vl.get(n);function Hv(n,e,{blocked:t,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(n,e),c=$n(a);return r&&a.addEventListener("upgradeneeded",l=>{r($n(a.result),l.oldVersion,l.newVersion,$n(a.transaction),l)}),t&&a.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const qv=["get","getKey","getAll","getAllKeys","count"],zv=["put","add","delete","clear"],lc=new Map;function xh(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(lc.get(e))return lc.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=zv.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||qv.includes(t)))return;const i=async function(a,...c){const l=this.transaction(a,s?"readwrite":"readonly");let h=l.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[t](...c),s&&l.done]))[0]};return lc.set(e,i),i}Bv(n=>({...n,get:(e,t,r)=>xh(e,t)||n.get(e,t,r),has:(e,t)=>!!xh(e,t)||n.has(e,t)}));class Wv{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Kv(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Kv(n){return n.getComponent()?.type==="VERSION"}const Dc="@firebase/app",Lh="0.14.6";const yn=new El("@firebase/app"),Gv="@firebase/app-compat",Qv="@firebase/analytics-compat",Jv="@firebase/analytics",Yv="@firebase/app-check-compat",Xv="@firebase/app-check",Zv="@firebase/auth",eT="@firebase/auth-compat",tT="@firebase/database",nT="@firebase/data-connect",rT="@firebase/database-compat",sT="@firebase/functions",iT="@firebase/functions-compat",oT="@firebase/installations",aT="@firebase/installations-compat",cT="@firebase/messaging",lT="@firebase/messaging-compat",uT="@firebase/performance",hT="@firebase/performance-compat",fT="@firebase/remote-config",dT="@firebase/remote-config-compat",pT="@firebase/storage",mT="@firebase/storage-compat",gT="@firebase/firestore",_T="@firebase/ai",yT="@firebase/firestore-compat",ET="firebase",vT="12.6.0";const Nc="[DEFAULT]",TT={[Dc]:"fire-core",[Gv]:"fire-core-compat",[Jv]:"fire-analytics",[Qv]:"fire-analytics-compat",[Xv]:"fire-app-check",[Yv]:"fire-app-check-compat",[Zv]:"fire-auth",[eT]:"fire-auth-compat",[tT]:"fire-rtdb",[nT]:"fire-data-connect",[rT]:"fire-rtdb-compat",[sT]:"fire-fn",[iT]:"fire-fn-compat",[oT]:"fire-iid",[aT]:"fire-iid-compat",[cT]:"fire-fcm",[lT]:"fire-fcm-compat",[uT]:"fire-perf",[hT]:"fire-perf-compat",[fT]:"fire-rc",[dT]:"fire-rc-compat",[pT]:"fire-gcs",[mT]:"fire-gcs-compat",[gT]:"fire-fst",[yT]:"fire-fst-compat",[_T]:"fire-vertex","fire-js":"fire-js",[ET]:"fire-js-all"};const xo=new Map,IT=new Map,Oc=new Map;function Fh(n,e){try{n.container.addComponent(e)}catch(t){yn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function hs(n){const e=n.name;if(Oc.has(e))return yn.debug(`There were multiple attempts to register component ${e}.`),!1;Oc.set(e,n);for(const t of xo.values())Fh(t,n);for(const t of IT.values())Fh(t,n);return!0}function Tl(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function bt(n){return n==null?!1:n.settings!==void 0}const wT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jn=new Ni("app","Firebase",wT);class AT{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ar("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jn.create("app-deleted",{appName:this._name})}}const Ts=vT;function Ap(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Nc,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw jn.create("bad-app-name",{appName:String(s)});if(t||(t=yp()),!t)throw jn.create("no-options");const i=xo.get(s);if(i){if(wr(t,i.options)&&wr(r,i.config))return i;throw jn.create("duplicate-app",{appName:s})}const a=new kv(s);for(const l of Oc.values())a.addComponent(l);const c=new AT(t,r,a);return xo.set(s,c),c}function Sp(n=Nc){const e=xo.get(n);if(!e&&n===Nc&&yp())return Ap();if(!e)throw jn.create("no-app",{appName:n});return e}function Hn(n,e,t){let r=TT[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yn.warn(a.join(" "));return}hs(new Ar(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const ST="firebase-heartbeat-database",bT=1,Ii="firebase-heartbeat-store";let uc=null;function bp(){return uc||(uc=Hv(ST,bT,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ii)}catch(t){console.warn(t)}}}}).catch(n=>{throw jn.create("idb-open",{originalErrorMessage:n.message})})),uc}async function RT(n){try{const t=(await bp()).transaction(Ii),r=await t.objectStore(Ii).get(Rp(n));return await t.done,r}catch(e){if(e instanceof wn)yn.warn(e.message);else{const t=jn.create("idb-get",{originalErrorMessage:e?.message});yn.warn(t.message)}}}async function Uh(n,e){try{const r=(await bp()).transaction(Ii,"readwrite");await r.objectStore(Ii).put(e,Rp(n)),await r.done}catch(t){if(t instanceof wn)yn.warn(t.message);else{const r=jn.create("idb-set",{originalErrorMessage:t?.message});yn.warn(r.message)}}}function Rp(n){return`${n.name}!${n.options.appId}`}const CT=1024,PT=30;class kT{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new DT(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Bh();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>PT){const s=NT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){yn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Bh(),{heartbeatsToSend:t,unsentEntries:r}=VT(this._heartbeatsCache.heartbeats),s=Mo(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return yn.warn(e),""}}}function Bh(){return new Date().toISOString().substring(0,10)}function VT(n,e=CT){const t=[];let r=n.slice();for(const s of n){const i=t.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),$h(t)>e){i.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),$h(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class DT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yv()?Ev().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await RT(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Uh(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Uh(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function $h(n){return Mo(JSON.stringify({version:2,heartbeats:n})).length}function NT(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function OT(n){hs(new Ar("platform-logger",e=>new Wv(e),"PRIVATE")),hs(new Ar("heartbeat",e=>new kT(e),"PRIVATE")),Hn(Dc,Lh,n),Hn(Dc,Lh,"esm2020"),Hn("fire-js","")}OT("");var MT="firebase",xT="12.6.0";Hn(MT,xT,"app");var jh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var qn,Cp;(function(){var n;function e(A,E){function _(){}_.prototype=E.prototype,A.F=E.prototype,A.prototype=new _,A.prototype.constructor=A,A.D=function(w,I,T){for(var y=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)y[_e-2]=arguments[_e];return E.prototype[I].apply(w,y)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,E,_){_||(_=0);const w=Array(16);if(typeof E=="string")for(var I=0;I<16;++I)w[I]=E.charCodeAt(_++)|E.charCodeAt(_++)<<8|E.charCodeAt(_++)<<16|E.charCodeAt(_++)<<24;else for(I=0;I<16;++I)w[I]=E[_++]|E[_++]<<8|E[_++]<<16|E[_++]<<24;E=A.g[0],_=A.g[1],I=A.g[2];let T=A.g[3],y;y=E+(T^_&(I^T))+w[0]+3614090360&4294967295,E=_+(y<<7&4294967295|y>>>25),y=T+(I^E&(_^I))+w[1]+3905402710&4294967295,T=E+(y<<12&4294967295|y>>>20),y=I+(_^T&(E^_))+w[2]+606105819&4294967295,I=T+(y<<17&4294967295|y>>>15),y=_+(E^I&(T^E))+w[3]+3250441966&4294967295,_=I+(y<<22&4294967295|y>>>10),y=E+(T^_&(I^T))+w[4]+4118548399&4294967295,E=_+(y<<7&4294967295|y>>>25),y=T+(I^E&(_^I))+w[5]+1200080426&4294967295,T=E+(y<<12&4294967295|y>>>20),y=I+(_^T&(E^_))+w[6]+2821735955&4294967295,I=T+(y<<17&4294967295|y>>>15),y=_+(E^I&(T^E))+w[7]+4249261313&4294967295,_=I+(y<<22&4294967295|y>>>10),y=E+(T^_&(I^T))+w[8]+1770035416&4294967295,E=_+(y<<7&4294967295|y>>>25),y=T+(I^E&(_^I))+w[9]+2336552879&4294967295,T=E+(y<<12&4294967295|y>>>20),y=I+(_^T&(E^_))+w[10]+4294925233&4294967295,I=T+(y<<17&4294967295|y>>>15),y=_+(E^I&(T^E))+w[11]+2304563134&4294967295,_=I+(y<<22&4294967295|y>>>10),y=E+(T^_&(I^T))+w[12]+1804603682&4294967295,E=_+(y<<7&4294967295|y>>>25),y=T+(I^E&(_^I))+w[13]+4254626195&4294967295,T=E+(y<<12&4294967295|y>>>20),y=I+(_^T&(E^_))+w[14]+2792965006&4294967295,I=T+(y<<17&4294967295|y>>>15),y=_+(E^I&(T^E))+w[15]+1236535329&4294967295,_=I+(y<<22&4294967295|y>>>10),y=E+(I^T&(_^I))+w[1]+4129170786&4294967295,E=_+(y<<5&4294967295|y>>>27),y=T+(_^I&(E^_))+w[6]+3225465664&4294967295,T=E+(y<<9&4294967295|y>>>23),y=I+(E^_&(T^E))+w[11]+643717713&4294967295,I=T+(y<<14&4294967295|y>>>18),y=_+(T^E&(I^T))+w[0]+3921069994&4294967295,_=I+(y<<20&4294967295|y>>>12),y=E+(I^T&(_^I))+w[5]+3593408605&4294967295,E=_+(y<<5&4294967295|y>>>27),y=T+(_^I&(E^_))+w[10]+38016083&4294967295,T=E+(y<<9&4294967295|y>>>23),y=I+(E^_&(T^E))+w[15]+3634488961&4294967295,I=T+(y<<14&4294967295|y>>>18),y=_+(T^E&(I^T))+w[4]+3889429448&4294967295,_=I+(y<<20&4294967295|y>>>12),y=E+(I^T&(_^I))+w[9]+568446438&4294967295,E=_+(y<<5&4294967295|y>>>27),y=T+(_^I&(E^_))+w[14]+3275163606&4294967295,T=E+(y<<9&4294967295|y>>>23),y=I+(E^_&(T^E))+w[3]+4107603335&4294967295,I=T+(y<<14&4294967295|y>>>18),y=_+(T^E&(I^T))+w[8]+1163531501&4294967295,_=I+(y<<20&4294967295|y>>>12),y=E+(I^T&(_^I))+w[13]+2850285829&4294967295,E=_+(y<<5&4294967295|y>>>27),y=T+(_^I&(E^_))+w[2]+4243563512&4294967295,T=E+(y<<9&4294967295|y>>>23),y=I+(E^_&(T^E))+w[7]+1735328473&4294967295,I=T+(y<<14&4294967295|y>>>18),y=_+(T^E&(I^T))+w[12]+2368359562&4294967295,_=I+(y<<20&4294967295|y>>>12),y=E+(_^I^T)+w[5]+4294588738&4294967295,E=_+(y<<4&4294967295|y>>>28),y=T+(E^_^I)+w[8]+2272392833&4294967295,T=E+(y<<11&4294967295|y>>>21),y=I+(T^E^_)+w[11]+1839030562&4294967295,I=T+(y<<16&4294967295|y>>>16),y=_+(I^T^E)+w[14]+4259657740&4294967295,_=I+(y<<23&4294967295|y>>>9),y=E+(_^I^T)+w[1]+2763975236&4294967295,E=_+(y<<4&4294967295|y>>>28),y=T+(E^_^I)+w[4]+1272893353&4294967295,T=E+(y<<11&4294967295|y>>>21),y=I+(T^E^_)+w[7]+4139469664&4294967295,I=T+(y<<16&4294967295|y>>>16),y=_+(I^T^E)+w[10]+3200236656&4294967295,_=I+(y<<23&4294967295|y>>>9),y=E+(_^I^T)+w[13]+681279174&4294967295,E=_+(y<<4&4294967295|y>>>28),y=T+(E^_^I)+w[0]+3936430074&4294967295,T=E+(y<<11&4294967295|y>>>21),y=I+(T^E^_)+w[3]+3572445317&4294967295,I=T+(y<<16&4294967295|y>>>16),y=_+(I^T^E)+w[6]+76029189&4294967295,_=I+(y<<23&4294967295|y>>>9),y=E+(_^I^T)+w[9]+3654602809&4294967295,E=_+(y<<4&4294967295|y>>>28),y=T+(E^_^I)+w[12]+3873151461&4294967295,T=E+(y<<11&4294967295|y>>>21),y=I+(T^E^_)+w[15]+530742520&4294967295,I=T+(y<<16&4294967295|y>>>16),y=_+(I^T^E)+w[2]+3299628645&4294967295,_=I+(y<<23&4294967295|y>>>9),y=E+(I^(_|~T))+w[0]+4096336452&4294967295,E=_+(y<<6&4294967295|y>>>26),y=T+(_^(E|~I))+w[7]+1126891415&4294967295,T=E+(y<<10&4294967295|y>>>22),y=I+(E^(T|~_))+w[14]+2878612391&4294967295,I=T+(y<<15&4294967295|y>>>17),y=_+(T^(I|~E))+w[5]+4237533241&4294967295,_=I+(y<<21&4294967295|y>>>11),y=E+(I^(_|~T))+w[12]+1700485571&4294967295,E=_+(y<<6&4294967295|y>>>26),y=T+(_^(E|~I))+w[3]+2399980690&4294967295,T=E+(y<<10&4294967295|y>>>22),y=I+(E^(T|~_))+w[10]+4293915773&4294967295,I=T+(y<<15&4294967295|y>>>17),y=_+(T^(I|~E))+w[1]+2240044497&4294967295,_=I+(y<<21&4294967295|y>>>11),y=E+(I^(_|~T))+w[8]+1873313359&4294967295,E=_+(y<<6&4294967295|y>>>26),y=T+(_^(E|~I))+w[15]+4264355552&4294967295,T=E+(y<<10&4294967295|y>>>22),y=I+(E^(T|~_))+w[6]+2734768916&4294967295,I=T+(y<<15&4294967295|y>>>17),y=_+(T^(I|~E))+w[13]+1309151649&4294967295,_=I+(y<<21&4294967295|y>>>11),y=E+(I^(_|~T))+w[4]+4149444226&4294967295,E=_+(y<<6&4294967295|y>>>26),y=T+(_^(E|~I))+w[11]+3174756917&4294967295,T=E+(y<<10&4294967295|y>>>22),y=I+(E^(T|~_))+w[2]+718787259&4294967295,I=T+(y<<15&4294967295|y>>>17),y=_+(T^(I|~E))+w[9]+3951481745&4294967295,A.g[0]=A.g[0]+E&4294967295,A.g[1]=A.g[1]+(I+(y<<21&4294967295|y>>>11))&4294967295,A.g[2]=A.g[2]+I&4294967295,A.g[3]=A.g[3]+T&4294967295}r.prototype.v=function(A,E){E===void 0&&(E=A.length);const _=E-this.blockSize,w=this.C;let I=this.h,T=0;for(;T<E;){if(I==0)for(;T<=_;)s(this,A,T),T+=this.blockSize;if(typeof A=="string"){for(;T<E;)if(w[I++]=A.charCodeAt(T++),I==this.blockSize){s(this,w),I=0;break}}else for(;T<E;)if(w[I++]=A[T++],I==this.blockSize){s(this,w),I=0;break}}this.h=I,this.o+=E},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var E=1;E<A.length-8;++E)A[E]=0;E=this.o*8;for(var _=A.length-8;_<A.length;++_)A[_]=E&255,E/=256;for(this.v(A),A=Array(16),E=0,_=0;_<4;++_)for(let w=0;w<32;w+=8)A[E++]=this.g[_]>>>w&255;return A};function i(A,E){var _=c;return Object.prototype.hasOwnProperty.call(_,A)?_[A]:_[A]=E(A)}function a(A,E){this.h=E;const _=[];let w=!0;for(let I=A.length-1;I>=0;I--){const T=A[I]|0;w&&T==E||(_[I]=T,w=!1)}this.g=_}var c={};function l(A){return-128<=A&&A<128?i(A,function(E){return new a([E|0],E<0?-1:0)}):new a([A|0],A<0?-1:0)}function h(A){if(isNaN(A)||!isFinite(A))return p;if(A<0)return B(h(-A));const E=[];let _=1;for(let w=0;A>=_;w++)E[w]=A/_|0,_*=4294967296;return new a(E,0)}function d(A,E){if(A.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(A.charAt(0)=="-")return B(d(A.substring(1),E));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const _=h(Math.pow(E,8));let w=p;for(let T=0;T<A.length;T+=8){var I=Math.min(8,A.length-T);const y=parseInt(A.substring(T,T+I),E);I<8?(I=h(Math.pow(E,I)),w=w.j(I).add(h(y))):(w=w.j(_),w=w.add(h(y)))}return w}var p=l(0),g=l(1),S=l(16777216);n=a.prototype,n.m=function(){if(L(this))return-B(this).m();let A=0,E=1;for(let _=0;_<this.g.length;_++){const w=this.i(_);A+=(w>=0?w:4294967296+w)*E,E*=4294967296}return A},n.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(k(this))return"0";if(L(this))return"-"+B(this).toString(A);const E=h(Math.pow(A,6));var _=this;let w="";for(;;){const I=W(_,E).g;_=H(_,I.j(E));let T=((_.g.length>0?_.g[0]:_.h)>>>0).toString(A);if(_=I,k(_))return T+w;for(;T.length<6;)T="0"+T;w=T+w}},n.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function k(A){if(A.h!=0)return!1;for(let E=0;E<A.g.length;E++)if(A.g[E]!=0)return!1;return!0}function L(A){return A.h==-1}n.l=function(A){return A=H(this,A),L(A)?-1:k(A)?0:1};function B(A){const E=A.g.length,_=[];for(let w=0;w<E;w++)_[w]=~A.g[w];return new a(_,~A.h).add(g)}n.abs=function(){return L(this)?B(this):this},n.add=function(A){const E=Math.max(this.g.length,A.g.length),_=[];let w=0;for(let I=0;I<=E;I++){let T=w+(this.i(I)&65535)+(A.i(I)&65535),y=(T>>>16)+(this.i(I)>>>16)+(A.i(I)>>>16);w=y>>>16,T&=65535,y&=65535,_[I]=y<<16|T}return new a(_,_[_.length-1]&-2147483648?-1:0)};function H(A,E){return A.add(B(E))}n.j=function(A){if(k(this)||k(A))return p;if(L(this))return L(A)?B(this).j(B(A)):B(B(this).j(A));if(L(A))return B(this.j(B(A)));if(this.l(S)<0&&A.l(S)<0)return h(this.m()*A.m());const E=this.g.length+A.g.length,_=[];for(var w=0;w<2*E;w++)_[w]=0;for(w=0;w<this.g.length;w++)for(let I=0;I<A.g.length;I++){const T=this.i(w)>>>16,y=this.i(w)&65535,_e=A.i(I)>>>16,Ge=A.i(I)&65535;_[2*w+2*I]+=y*Ge,K(_,2*w+2*I),_[2*w+2*I+1]+=T*Ge,K(_,2*w+2*I+1),_[2*w+2*I+1]+=y*_e,K(_,2*w+2*I+1),_[2*w+2*I+2]+=T*_e,K(_,2*w+2*I+2)}for(A=0;A<E;A++)_[A]=_[2*A+1]<<16|_[2*A];for(A=E;A<2*E;A++)_[A]=0;return new a(_,0)};function K(A,E){for(;(A[E]&65535)!=A[E];)A[E+1]+=A[E]>>>16,A[E]&=65535,E++}function Q(A,E){this.g=A,this.h=E}function W(A,E){if(k(E))throw Error("division by zero");if(k(A))return new Q(p,p);if(L(A))return E=W(B(A),E),new Q(B(E.g),B(E.h));if(L(E))return E=W(A,B(E)),new Q(B(E.g),E.h);if(A.g.length>30){if(L(A)||L(E))throw Error("slowDivide_ only works with positive integers.");for(var _=g,w=E;w.l(A)<=0;)_=ae(_),w=ae(w);var I=ue(_,1),T=ue(w,1);for(w=ue(w,2),_=ue(_,2);!k(w);){var y=T.add(w);y.l(A)<=0&&(I=I.add(_),T=y),w=ue(w,1),_=ue(_,1)}return E=H(A,I.j(E)),new Q(I,E)}for(I=p;A.l(E)>=0;){for(_=Math.max(1,Math.floor(A.m()/E.m())),w=Math.ceil(Math.log(_)/Math.LN2),w=w<=48?1:Math.pow(2,w-48),T=h(_),y=T.j(E);L(y)||y.l(A)>0;)_-=w,T=h(_),y=T.j(E);k(T)&&(T=g),I=I.add(T),A=H(A,y)}return new Q(I,A)}n.B=function(A){return W(this,A).h},n.and=function(A){const E=Math.max(this.g.length,A.g.length),_=[];for(let w=0;w<E;w++)_[w]=this.i(w)&A.i(w);return new a(_,this.h&A.h)},n.or=function(A){const E=Math.max(this.g.length,A.g.length),_=[];for(let w=0;w<E;w++)_[w]=this.i(w)|A.i(w);return new a(_,this.h|A.h)},n.xor=function(A){const E=Math.max(this.g.length,A.g.length),_=[];for(let w=0;w<E;w++)_[w]=this.i(w)^A.i(w);return new a(_,this.h^A.h)};function ae(A){const E=A.g.length+1,_=[];for(let w=0;w<E;w++)_[w]=A.i(w)<<1|A.i(w-1)>>>31;return new a(_,A.h)}function ue(A,E){const _=E>>5;E%=32;const w=A.g.length-_,I=[];for(let T=0;T<w;T++)I[T]=E>0?A.i(T+_)>>>E|A.i(T+_+1)<<32-E:A.i(T+_);return new a(I,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Cp=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,qn=a}).apply(typeof jh<"u"?jh:typeof self<"u"?self:typeof window<"u"?window:{});var so=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Pp,Ys,kp,go,Mc,Vp,Dp,Np;(function(){var n,e=Object.defineProperty;function t(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof so=="object"&&so];for(var u=0;u<o.length;++u){var f=o[u];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function s(o,u){if(u)e:{var f=r;o=o.split(".");for(var m=0;m<o.length-1;m++){var R=o[m];if(!(R in f))break e;f=f[R]}o=o[o.length-1],m=f[o],u=u(m),u!=m&&u!=null&&e(f,o,{configurable:!0,writable:!0,value:u})}}s("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(o){return o||function(u){var f=[],m;for(m in u)Object.prototype.hasOwnProperty.call(u,m)&&f.push([m,u[m]]);return f}});var i=i||{},a=this||self;function c(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function l(o,u,f){return o.call.apply(o.bind,arguments)}function h(o,u,f){return h=l,h.apply(null,arguments)}function d(o,u){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),o.apply(this,m)}}function p(o,u){function f(){}f.prototype=u.prototype,o.Z=u.prototype,o.prototype=new f,o.prototype.constructor=o,o.Ob=function(m,R,C){for(var $=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)$[ce-2]=arguments[ce];return u.prototype[R].apply(m,$)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function S(o){const u=o.length;if(u>0){const f=Array(u);for(let m=0;m<u;m++)f[m]=o[m];return f}return[]}function k(o,u){for(let m=1;m<arguments.length;m++){const R=arguments[m];var f=typeof R;if(f=f!="object"?f:R?Array.isArray(R)?"array":f:"null",f=="array"||f=="object"&&typeof R.length=="number"){f=o.length||0;const C=R.length||0;o.length=f+C;for(let $=0;$<C;$++)o[f+$]=R[$]}else o.push(R)}}class L{constructor(u,f){this.i=u,this.j=f,this.h=0,this.g=null}get(){let u;return this.h>0?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function B(o){a.setTimeout(()=>{throw o},0)}function H(){var o=A;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class K{constructor(){this.h=this.g=null}add(u,f){const m=Q.get();m.set(u,f),this.h?this.h.next=m:this.g=m,this.h=m}}var Q=new L(()=>new W,o=>o.reset());class W{constructor(){this.next=this.g=this.h=null}set(u,f){this.h=u,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,ue=!1,A=new K,E=()=>{const o=Promise.resolve(void 0);ae=()=>{o.then(_)}};function _(){for(var o;o=H();){try{o.h.call(o.g)}catch(f){B(f)}var u=Q;u.j(o),u.h<100&&(u.h++,o.next=u.g,u.g=o)}ue=!1}function w(){this.u=this.u,this.C=this.C}w.prototype.u=!1,w.prototype.dispose=function(){this.u||(this.u=!0,this.N())},w.prototype[Symbol.dispose]=function(){this.dispose()},w.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var T=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};a.addEventListener("test",f,u),a.removeEventListener("test",f,u)}catch{}return o})();function y(o){return/^[\s\xa0]*$/.test(o)}function _e(o,u){I.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,u)}p(_e,I),_e.prototype.init=function(o,u){const f=this.type=o.type,m=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget,u||(f=="mouseover"?u=o.fromElement:f=="mouseout"&&(u=o.toElement)),this.relatedTarget=u,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&_e.Z.h.call(this)},_e.prototype.h=function(){_e.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Ge="closure_listenable_"+(Math.random()*1e6|0),Le=0;function Pe(o,u,f,m,R){this.listener=o,this.proxy=null,this.src=u,this.type=f,this.capture=!!m,this.ha=R,this.key=++Le,this.da=this.fa=!1}function ye(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function At(o,u,f){for(const m in o)u.call(f,o[m],m,o)}function xr(o,u){for(const f in o)u.call(void 0,o[f],f,o)}function Bt(o){const u={};for(const f in o)u[f]=o[f];return u}const _t="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Rs(o,u){let f,m;for(let R=1;R<arguments.length;R++){m=arguments[R];for(f in m)o[f]=m[f];for(let C=0;C<_t.length;C++)f=_t[C],Object.prototype.hasOwnProperty.call(m,f)&&(o[f]=m[f])}}function Lr(o){this.src=o,this.g={},this.h=0}Lr.prototype.add=function(o,u,f,m,R){const C=o.toString();o=this.g[C],o||(o=this.g[C]=[],this.h++);const $=on(o,u,m,R);return $>-1?(u=o[$],f||(u.fa=!1)):(u=new Pe(u,this.src,C,!!m,R),u.fa=f,o.push(u)),u};function Cs(o,u){const f=u.type;if(f in o.g){var m=o.g[f],R=Array.prototype.indexOf.call(m,u,void 0),C;(C=R>=0)&&Array.prototype.splice.call(m,R,1),C&&(ye(u),o.g[f].length==0&&(delete o.g[f],o.h--))}}function on(o,u,f,m){for(let R=0;R<o.length;++R){const C=o[R];if(!C.da&&C.listener==u&&C.capture==!!f&&C.ha==m)return R}return-1}var An="closure_lm_"+(Math.random()*1e6|0),or={};function Ps(o,u,f,m,R){if(Array.isArray(u)){for(let C=0;C<u.length;C++)Ps(o,u[C],f,m,R);return null}return f=j(f),o&&o[Ge]?o.J(u,f,c(m)?!!m.capture:!1,R):ar(o,u,f,!1,m,R)}function ar(o,u,f,m,R,C){if(!u)throw Error("Invalid event type");const $=c(R)?!!R.capture:!!R;let ce=D(o);if(ce||(o[An]=ce=new Lr(o)),f=ce.add(u,f,m,$,C),f.proxy)return f;if(m=su(),f.proxy=m,m.src=o,m.listener=f,o.addEventListener)T||(R=$),R===void 0&&(R=!1),o.addEventListener(u.toString(),m,R);else if(o.attachEvent)o.attachEvent(P(u.toString()),m);else if(o.addListener&&o.removeListener)o.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function su(){function o(f){return u.call(o.src,o.listener,f)}const u=U;return o}function v(o,u,f,m,R){if(Array.isArray(u))for(var C=0;C<u.length;C++)v(o,u[C],f,m,R);else m=c(m)?!!m.capture:!!m,f=j(f),o&&o[Ge]?(o=o.i,C=String(u).toString(),C in o.g&&(u=o.g[C],f=on(u,f,m,R),f>-1&&(ye(u[f]),Array.prototype.splice.call(u,f,1),u.length==0&&(delete o.g[C],o.h--)))):o&&(o=D(o))&&(u=o.g[u.toString()],o=-1,u&&(o=on(u,f,m,R)),(f=o>-1?u[o]:null)&&b(f))}function b(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[Ge])Cs(u.i,o);else{var f=o.type,m=o.proxy;u.removeEventListener?u.removeEventListener(f,m,o.capture):u.detachEvent?u.detachEvent(P(f),m):u.addListener&&u.removeListener&&u.removeListener(m),(f=D(u))?(Cs(f,o),f.h==0&&(f.src=null,u[An]=null)):ye(o)}}}function P(o){return o in or?or[o]:or[o]="on"+o}function U(o,u){if(o.da)o=!0;else{u=new _e(u,this);const f=o.listener,m=o.ha||o.src;o.fa&&b(o),o=f.call(m,u)}return o}function D(o){return o=o[An],o instanceof Lr?o:null}var O="__closure_events_fn_"+(Math.random()*1e9>>>0);function j(o){return typeof o=="function"?o:(o[O]||(o[O]=function(u){return o.handleEvent(u)}),o[O])}function F(){w.call(this),this.i=new Lr(this),this.M=this,this.G=null}p(F,w),F.prototype[Ge]=!0,F.prototype.removeEventListener=function(o,u,f,m){v(this,o,u,f,m)};function x(o,u){var f,m=o.G;if(m)for(f=[];m;m=m.G)f.push(m);if(o=o.M,m=u.type||u,typeof u=="string")u=new I(u,o);else if(u instanceof I)u.target=u.target||o;else{var R=u;u=new I(m,o),Rs(u,R)}R=!0;let C,$;if(f)for($=f.length-1;$>=0;$--)C=u.g=f[$],R=M(C,m,!0,u)&&R;if(C=u.g=o,R=M(C,m,!0,u)&&R,R=M(C,m,!1,u)&&R,f)for($=0;$<f.length;$++)C=u.g=f[$],R=M(C,m,!1,u)&&R}F.prototype.N=function(){if(F.Z.N.call(this),this.i){var o=this.i;for(const u in o.g){const f=o.g[u];for(let m=0;m<f.length;m++)ye(f[m]);delete o.g[u],o.h--}}this.G=null},F.prototype.J=function(o,u,f,m){return this.i.add(String(o),u,!1,f,m)},F.prototype.K=function(o,u,f,m){return this.i.add(String(o),u,!0,f,m)};function M(o,u,f,m){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();let R=!0;for(let C=0;C<u.length;++C){const $=u[C];if($&&!$.da&&$.capture==f){const ce=$.listener,$e=$.ha||$.src;$.fa&&Cs(o.i,$),R=ce.call($e,m)!==!1&&R}}return R&&!m.defaultPrevented}function X(o,u){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=h(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(u)>2147483647?-1:a.setTimeout(o,u||0)}function q(o){o.g=X(()=>{o.g=null,o.i&&(o.i=!1,q(o))},o.l);const u=o.h;o.h=null,o.m.apply(null,u)}class J extends w{constructor(u,f){super(),this.m=u,this.l=f,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:q(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Z(o){w.call(this),this.h=o,this.g={}}p(Z,w);var he=[];function Ie(o){At(o.g,function(u,f){this.g.hasOwnProperty(f)&&b(u)},o),o.g={}}Z.prototype.N=function(){Z.Z.N.call(this),Ie(this)},Z.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ge=a.JSON.stringify,nt=a.JSON.parse,rt=class{stringify(o){return a.JSON.stringify(o,void 0)}parse(o){return a.JSON.parse(o,void 0)}};function yt(){}function Et(){}var Nt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Fr(){I.call(this,"d")}p(Fr,I);function Qe(){I.call(this,"c")}p(Qe,I);var qe={},ks=null;function cr(){return ks=ks||new F}qe.Ia="serverreachability";function iu(o){I.call(this,qe.Ia,o)}p(iu,I);function Vs(o){const u=cr();x(u,new iu(u))}qe.STAT_EVENT="statevent";function ou(o,u){I.call(this,qe.STAT_EVENT,o),this.stat=u}p(ou,I);function ut(o){const u=cr();x(u,new ou(u,o))}qe.Ja="timingevent";function au(o,u){I.call(this,qe.Ja,o),this.size=u}p(au,I);function Ds(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){o()},u)}function Ns(){this.g=!0}Ns.prototype.ua=function(){this.g=!1};function Wg(o,u,f,m,R,C){o.info(function(){if(o.g)if(C){var $="",ce=C.split("&");for(let Ae=0;Ae<ce.length;Ae++){var $e=ce[Ae].split("=");if($e.length>1){const ze=$e[0];$e=$e[1];const jt=ze.split("_");$=jt.length>=2&&jt[1]=="type"?$+(ze+"="+$e+"&"):$+(ze+"=redacted&")}}}else $=null;else $=C;return"XMLHTTP REQ ("+m+") [attempt "+R+"]: "+u+`
`+f+`
`+$})}function Kg(o,u,f,m,R,C,$){o.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+R+"]: "+u+`
`+f+`
`+C+" "+$})}function Ur(o,u,f,m){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+Qg(o,f)+(m?" "+m:"")})}function Gg(o,u){o.info(function(){return"TIMEOUT: "+u})}Ns.prototype.info=function(){};function Qg(o,u){if(!o.g)return u;if(!u)return null;try{const C=JSON.parse(u);if(C){for(o=0;o<C.length;o++)if(Array.isArray(C[o])){var f=C[o];if(!(f.length<2)){var m=f[1];if(Array.isArray(m)&&!(m.length<1)){var R=m[0];if(R!="noop"&&R!="stop"&&R!="close")for(let $=1;$<m.length;$++)m[$]=""}}}}return ge(C)}catch{return u}}var qi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},cu={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},lu;function Na(){}p(Na,yt),Na.prototype.g=function(){return new XMLHttpRequest},lu=new Na;function Os(o){return encodeURIComponent(String(o))}function Jg(o){var u=1;o=o.split(":");const f=[];for(;u>0&&o.length;)f.push(o.shift()),u--;return o.length&&f.push(o.join(":")),f}function Sn(o,u,f,m){this.j=o,this.i=u,this.l=f,this.S=m||1,this.V=new Z(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new uu}function uu(){this.i=null,this.g="",this.h=!1}var hu={},Oa={};function Ma(o,u,f){o.M=1,o.A=Wi($t(u)),o.u=f,o.R=!0,fu(o,null)}function fu(o,u){o.F=Date.now(),zi(o),o.B=$t(o.A);var f=o.B,m=o.S;Array.isArray(m)||(m=[String(m)]),Su(f.i,"t",m),o.C=0,f=o.j.L,o.h=new uu,o.g=Hu(o.j,f?u:null,!o.u),o.P>0&&(o.O=new J(h(o.Y,o,o.g),o.P)),u=o.V,f=o.g,m=o.ba;var R="readystatechange";Array.isArray(R)||(R&&(he[0]=R.toString()),R=he);for(let C=0;C<R.length;C++){const $=Ps(f,R[C],m||u.handleEvent,!1,u.h||u);if(!$)break;u.g[$.key]=$}u=o.J?Bt(o.J):{},o.u?(o.v||(o.v="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,u)):(o.v="GET",o.g.ea(o.B,o.v,null,u)),Vs(),Wg(o.i,o.v,o.B,o.l,o.S,o.u)}Sn.prototype.ba=function(o){o=o.target;const u=this.O;u&&Cn(o)==3?u.j():this.Y(o)},Sn.prototype.Y=function(o){try{if(o==this.g)e:{const ce=Cn(this.g),$e=this.g.ya(),Ae=this.g.ca();if(!(ce<3)&&(ce!=3||this.g&&(this.h.h||this.g.la()||Du(this.g)))){this.K||ce!=4||$e==7||($e==8||Ae<=0?Vs(3):Vs(2)),xa(this);var u=this.g.ca();this.X=u;var f=Yg(this);if(this.o=u==200,Kg(this.i,this.v,this.B,this.l,this.S,ce,u),this.o){if(this.U&&!this.L){t:{if(this.g){var m,R=this.g;if((m=R.g?R.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(m)){var C=m;break t}}C=null}if(o=C)Ur(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,La(this,o);else{this.o=!1,this.m=3,ut(12),lr(this),Ms(this);break e}}if(this.R){o=!0;let ze;for(;!this.K&&this.C<f.length;)if(ze=Xg(this,f),ze==Oa){ce==4&&(this.m=4,ut(14),o=!1),Ur(this.i,this.l,null,"[Incomplete Response]");break}else if(ze==hu){this.m=4,ut(15),Ur(this.i,this.l,f,"[Invalid Chunk]"),o=!1;break}else Ur(this.i,this.l,ze,null),La(this,ze);if(du(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ce!=4||f.length!=0||this.h.h||(this.m=1,ut(16),o=!1),this.o=this.o&&o,!o)Ur(this.i,this.l,f,"[Invalid Chunked Response]"),lr(this),Ms(this);else if(f.length>0&&!this.W){this.W=!0;var $=this.j;$.g==this&&$.aa&&!$.P&&($.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),za($),$.P=!0,ut(11))}}else Ur(this.i,this.l,f,null),La(this,f);ce==4&&lr(this),this.o&&!this.K&&(ce==4?Uu(this.j,this):(this.o=!1,zi(this)))}else f_(this.g),u==400&&f.indexOf("Unknown SID")>0?(this.m=3,ut(12)):(this.m=0,ut(13)),lr(this),Ms(this)}}}catch{}finally{}};function Yg(o){if(!du(o))return o.g.la();const u=Du(o.g);if(u==="")return"";let f="";const m=u.length,R=Cn(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return lr(o),Ms(o),"";o.h.i=new a.TextDecoder}for(let C=0;C<m;C++)o.h.h=!0,f+=o.h.i.decode(u[C],{stream:!(R&&C==m-1)});return u.length=0,o.h.g+=f,o.C=0,o.h.g}function du(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function Xg(o,u){var f=o.C,m=u.indexOf(`
`,f);return m==-1?Oa:(f=Number(u.substring(f,m)),isNaN(f)?hu:(m+=1,m+f>u.length?Oa:(u=u.slice(m,m+f),o.C=m+f,u)))}Sn.prototype.cancel=function(){this.K=!0,lr(this)};function zi(o){o.T=Date.now()+o.H,pu(o,o.H)}function pu(o,u){if(o.D!=null)throw Error("WatchDog timer not null");o.D=Ds(h(o.aa,o),u)}function xa(o){o.D&&(a.clearTimeout(o.D),o.D=null)}Sn.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(Gg(this.i,this.B),this.M!=2&&(Vs(),ut(17)),lr(this),this.m=2,Ms(this)):pu(this,this.T-o)};function Ms(o){o.j.I==0||o.K||Uu(o.j,o)}function lr(o){xa(o);var u=o.O;u&&typeof u.dispose=="function"&&u.dispose(),o.O=null,Ie(o.V),o.g&&(u=o.g,o.g=null,u.abort(),u.dispose())}function La(o,u){try{var f=o.j;if(f.I!=0&&(f.g==o||Fa(f.h,o))){if(!o.L&&Fa(f.h,o)&&f.I==3){try{var m=f.Ba.g.parse(u)}catch{m=null}if(Array.isArray(m)&&m.length==3){var R=m;if(R[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<o.F)Yi(f),Qi(f);else break e;qa(f),ut(18)}}else f.xa=R[1],0<f.xa-f.K&&R[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=Ds(h(f.Va,f),6e3));_u(f.h)<=1&&f.ta&&(f.ta=void 0)}else hr(f,11)}else if((o.L||f.g==o)&&Yi(f),!y(u))for(R=f.Ba.g.parse(u),u=0;u<R.length;u++){let Ae=R[u];const ze=Ae[0];if(!(ze<=f.K))if(f.K=ze,Ae=Ae[1],f.I==2)if(Ae[0]=="c"){f.M=Ae[1],f.ba=Ae[2];const jt=Ae[3];jt!=null&&(f.ka=jt,f.j.info("VER="+f.ka));const fr=Ae[4];fr!=null&&(f.za=fr,f.j.info("SVER="+f.za));const Pn=Ae[5];Pn!=null&&typeof Pn=="number"&&Pn>0&&(m=1.5*Pn,f.O=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;const kn=o.g;if(kn){const Zi=kn.g?kn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zi){var C=m.h;C.g||Zi.indexOf("spdy")==-1&&Zi.indexOf("quic")==-1&&Zi.indexOf("h2")==-1||(C.j=C.l,C.g=new Set,C.h&&(Ua(C,C.h),C.h=null))}if(m.G){const Wa=kn.g?kn.g.getResponseHeader("X-HTTP-Session-Id"):null;Wa&&(m.wa=Wa,ke(m.J,m.G,Wa))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-o.F,f.j.info("Handshake RTT: "+f.T+"ms")),m=f;var $=o;if(m.na=ju(m,m.L?m.ba:null,m.W),$.L){yu(m.h,$);var ce=$,$e=m.O;$e&&(ce.H=$e),ce.D&&(xa(ce),zi(ce)),m.g=$}else Lu(m);f.i.length>0&&Ji(f)}else Ae[0]!="stop"&&Ae[0]!="close"||hr(f,7);else f.I==3&&(Ae[0]=="stop"||Ae[0]=="close"?Ae[0]=="stop"?hr(f,7):Ha(f):Ae[0]!="noop"&&f.l&&f.l.qa(Ae),f.A=0)}}Vs(4)}catch{}}var Zg=class{constructor(o,u){this.g=o,this.map=u}};function mu(o){this.l=o||10,a.PerformanceNavigationTiming?(o=a.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function gu(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function _u(o){return o.h?1:o.g?o.g.size:0}function Fa(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function Ua(o,u){o.g?o.g.add(u):o.h=u}function yu(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}mu.prototype.cancel=function(){if(this.i=Eu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Eu(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let u=o.i;for(const f of o.g.values())u=u.concat(f.G);return u}return S(o.i)}var vu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function e_(o,u){if(o){o=o.split("&");for(let f=0;f<o.length;f++){const m=o[f].indexOf("=");let R,C=null;m>=0?(R=o[f].substring(0,m),C=o[f].substring(m+1)):R=o[f],u(R,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function bn(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let u;o instanceof bn?(this.l=o.l,xs(this,o.j),this.o=o.o,this.g=o.g,Ls(this,o.u),this.h=o.h,Ba(this,bu(o.i)),this.m=o.m):o&&(u=String(o).match(vu))?(this.l=!1,xs(this,u[1]||"",!0),this.o=Fs(u[2]||""),this.g=Fs(u[3]||"",!0),Ls(this,u[4]),this.h=Fs(u[5]||"",!0),Ba(this,u[6]||"",!0),this.m=Fs(u[7]||"")):(this.l=!1,this.i=new Bs(null,this.l))}bn.prototype.toString=function(){const o=[];var u=this.j;u&&o.push(Us(u,Tu,!0),":");var f=this.g;return(f||u=="file")&&(o.push("//"),(u=this.o)&&o.push(Us(u,Tu,!0),"@"),o.push(Os(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&o.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(Us(f,f.charAt(0)=="/"?r_:n_,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",Us(f,i_)),o.join("")},bn.prototype.resolve=function(o){const u=$t(this);let f=!!o.j;f?xs(u,o.j):f=!!o.o,f?u.o=o.o:f=!!o.g,f?u.g=o.g:f=o.u!=null;var m=o.h;if(f)Ls(u,o.u);else if(f=!!o.h){if(m.charAt(0)!="/")if(this.g&&!this.h)m="/"+m;else{var R=u.h.lastIndexOf("/");R!=-1&&(m=u.h.slice(0,R+1)+m)}if(R=m,R==".."||R==".")m="";else if(R.indexOf("./")!=-1||R.indexOf("/.")!=-1){m=R.lastIndexOf("/",0)==0,R=R.split("/");const C=[];for(let $=0;$<R.length;){const ce=R[$++];ce=="."?m&&$==R.length&&C.push(""):ce==".."?((C.length>1||C.length==1&&C[0]!="")&&C.pop(),m&&$==R.length&&C.push("")):(C.push(ce),m=!0)}m=C.join("/")}else m=R}return f?u.h=m:f=o.i.toString()!=="",f?Ba(u,bu(o.i)):f=!!o.m,f&&(u.m=o.m),u};function $t(o){return new bn(o)}function xs(o,u,f){o.j=f?Fs(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function Ls(o,u){if(u){if(u=Number(u),isNaN(u)||u<0)throw Error("Bad port number "+u);o.u=u}else o.u=null}function Ba(o,u,f){u instanceof Bs?(o.i=u,o_(o.i,o.l)):(f||(u=Us(u,s_)),o.i=new Bs(u,o.l))}function ke(o,u,f){o.i.set(u,f)}function Wi(o){return ke(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function Fs(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Us(o,u,f){return typeof o=="string"?(o=encodeURI(o).replace(u,t_),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function t_(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Tu=/[#\/\?@]/g,n_=/[#\?:]/g,r_=/[#\?]/g,s_=/[#\?@]/g,i_=/#/g;function Bs(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function ur(o){o.g||(o.g=new Map,o.h=0,o.i&&e_(o.i,function(u,f){o.add(decodeURIComponent(u.replace(/\+/g," ")),f)}))}n=Bs.prototype,n.add=function(o,u){ur(this),this.i=null,o=Br(this,o);let f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(u),this.h+=1,this};function Iu(o,u){ur(o),u=Br(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function wu(o,u){return ur(o),u=Br(o,u),o.g.has(u)}n.forEach=function(o,u){ur(this),this.g.forEach(function(f,m){f.forEach(function(R){o.call(u,R,m,this)},this)},this)};function Au(o,u){ur(o);let f=[];if(typeof u=="string")wu(o,u)&&(f=f.concat(o.g.get(Br(o,u))));else for(o=Array.from(o.g.values()),u=0;u<o.length;u++)f=f.concat(o[u]);return f}n.set=function(o,u){return ur(this),this.i=null,o=Br(this,o),wu(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},n.get=function(o,u){return o?(o=Au(this,o),o.length>0?String(o[0]):u):u};function Su(o,u,f){Iu(o,u),f.length>0&&(o.i=null,o.g.set(Br(o,u),S(f)),o.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],u=Array.from(this.g.keys());for(let m=0;m<u.length;m++){var f=u[m];const R=Os(f);f=Au(this,f);for(let C=0;C<f.length;C++){let $=R;f[C]!==""&&($+="="+Os(f[C])),o.push($)}}return this.i=o.join("&")};function bu(o){const u=new Bs;return u.i=o.i,o.g&&(u.g=new Map(o.g),u.h=o.h),u}function Br(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function o_(o,u){u&&!o.j&&(ur(o),o.i=null,o.g.forEach(function(f,m){const R=m.toLowerCase();m!=R&&(Iu(this,m),Su(this,R,f))},o)),o.j=u}function a_(o,u){const f=new Ns;if(a.Image){const m=new Image;m.onload=d(Rn,f,"TestLoadImage: loaded",!0,u,m),m.onerror=d(Rn,f,"TestLoadImage: error",!1,u,m),m.onabort=d(Rn,f,"TestLoadImage: abort",!1,u,m),m.ontimeout=d(Rn,f,"TestLoadImage: timeout",!1,u,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=o}else u(!1)}function c_(o,u){const f=new Ns,m=new AbortController,R=setTimeout(()=>{m.abort(),Rn(f,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:m.signal}).then(C=>{clearTimeout(R),C.ok?Rn(f,"TestPingServer: ok",!0,u):Rn(f,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(R),Rn(f,"TestPingServer: error",!1,u)})}function Rn(o,u,f,m,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),m(f)}catch{}}function l_(){this.g=new rt}function $a(o){this.i=o.Sb||null,this.h=o.ab||!1}p($a,yt),$a.prototype.g=function(){return new Ki(this.i,this.h)};function Ki(o,u){F.call(this),this.H=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Ki,F),n=Ki.prototype,n.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=u,this.readyState=1,js(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const u={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(u.body=o),(this.H||a).fetch(new Request(this.D,u)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,$s(this)),this.readyState=0},n.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,js(this)),this.g&&(this.readyState=3,js(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ru(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ru(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}n.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.B.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?$s(this):js(this),this.readyState==3&&Ru(this)}},n.Oa=function(o){this.g&&(this.response=this.responseText=o,$s(this))},n.Na=function(o){this.g&&(this.response=o,$s(this))},n.ga=function(){this.g&&$s(this)};function $s(o){o.readyState=4,o.l=null,o.j=null,o.B=null,js(o)}n.setRequestHeader=function(o,u){this.A.append(o,u)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],u=this.h.entries();for(var f=u.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=u.next();return o.join(`\r
`)};function js(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Cu(o){let u="";return At(o,function(f,m){u+=m,u+=":",u+=f,u+=`\r
`}),u}function ja(o,u,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=Cu(f),typeof o=="string"?f!=null&&Os(f):ke(o,u,f))}function Oe(o){F.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Oe,F);var u_=/^https?$/i,h_=["POST","PUT"];n=Oe.prototype,n.Fa=function(o){this.H=o},n.ea=function(o,u,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():lu.g(),this.g.onreadystatechange=g(h(this.Ca,this));try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(C){Pu(this,C);return}if(o=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var R in m)f.set(R,m[R]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const C of m.keys())f.set(C,m.get(C));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(C=>C.toLowerCase()=="content-type"),R=a.FormData&&o instanceof a.FormData,!(Array.prototype.indexOf.call(h_,u,void 0)>=0)||m||R||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[C,$]of f)this.g.setRequestHeader(C,$);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(C){Pu(this,C)}};function Pu(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.o=5,ku(o),Gi(o)}function ku(o){o.A||(o.A=!0,x(o,"complete"),x(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,x(this,"complete"),x(this,"abort"),Gi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gi(this,!0)),Oe.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Vu(this):this.Xa())},n.Xa=function(){Vu(this)};function Vu(o){if(o.h&&typeof i<"u"){if(o.v&&Cn(o)==4)setTimeout(o.Ca.bind(o),0);else if(x(o,"readystatechange"),Cn(o)==4){o.h=!1;try{const C=o.ca();e:switch(C){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var f;if(!(f=u)){var m;if(m=C===0){let $=String(o.D).match(vu)[1]||null;!$&&a.self&&a.self.location&&($=a.self.location.protocol.slice(0,-1)),m=!u_.test($?$.toLowerCase():"")}f=m}if(f)x(o,"complete"),x(o,"success");else{o.o=6;try{var R=Cn(o)>2?o.g.statusText:""}catch{R=""}o.l=R+" ["+o.ca()+"]",ku(o)}}finally{Gi(o)}}}}function Gi(o,u){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const f=o.g;o.g=null,u||x(o,"ready");try{f.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Cn(o){return o.g?o.g.readyState:0}n.ca=function(){try{return Cn(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),nt(u)}};function Du(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function f_(o){const u={};o=(o.g&&Cn(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<o.length;m++){if(y(o[m]))continue;var f=Jg(o[m]);const R=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const C=u[R]||[];u[R]=C,C.push(f)}xr(u,function(m){return m.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hs(o,u,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||u}function Nu(o){this.za=0,this.i=[],this.j=new Ns,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Hs("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Hs("baseRetryDelayMs",5e3,o),this.Za=Hs("retryDelaySeedMs",1e4,o),this.Ta=Hs("forwardChannelMaxRetries",2,o),this.va=Hs("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new mu(o&&o.concurrentRequestLimit),this.Ba=new l_,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Nu.prototype,n.ka=8,n.I=1,n.connect=function(o,u,f,m){ut(0),this.W=o,this.H=u||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.J=ju(this,null,this.W),Ji(this)};function Ha(o){if(Ou(o),o.I==3){var u=o.V++,f=$t(o.J);if(ke(f,"SID",o.M),ke(f,"RID",u),ke(f,"TYPE","terminate"),qs(o,f),u=new Sn(o,o.j,u),u.M=2,u.A=Wi($t(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(u.A.toString(),"")}catch{}!f&&a.Image&&(new Image().src=u.A,f=!0),f||(u.g=Hu(u.j,null),u.g.ea(u.A)),u.F=Date.now(),zi(u)}$u(o)}function Qi(o){o.g&&(za(o),o.g.cancel(),o.g=null)}function Ou(o){Qi(o),o.v&&(a.clearTimeout(o.v),o.v=null),Yi(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&a.clearTimeout(o.m),o.m=null)}function Ji(o){if(!gu(o.h)&&!o.m){o.m=!0;var u=o.Ea;ae||E(),ue||(ae(),ue=!0),A.add(u,o),o.D=0}}function d_(o,u){return _u(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=u.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=Ds(h(o.Ea,o,u),Bu(o,o.D)),o.D++,!0)}n.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const R=new Sn(this,this.j,o);let C=this.o;if(this.U&&(C?(C=Bt(C),Rs(C,this.U)):C=this.U),this.u!==null||this.R||(R.J=C,C=null),this.S)e:{for(var u=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(u+=m,u>4096){u=f;break e}if(u===4096||f===this.i.length-1){u=f+1;break e}}u=1e3}else u=1e3;u=xu(this,R,u),f=$t(this.J),ke(f,"RID",o),ke(f,"CVER",22),this.G&&ke(f,"X-HTTP-Session-Id",this.G),qs(this,f),C&&(this.R?u="headers="+Os(Cu(C))+"&"+u:this.u&&ja(f,this.u,C)),Ua(this.h,R),this.Ra&&ke(f,"TYPE","init"),this.S?(ke(f,"$req",u),ke(f,"SID","null"),R.U=!0,Ma(R,f,null)):Ma(R,f,u),this.I=2}}else this.I==3&&(o?Mu(this,o):this.i.length==0||gu(this.h)||Mu(this))};function Mu(o,u){var f;u?f=u.l:f=o.V++;const m=$t(o.J);ke(m,"SID",o.M),ke(m,"RID",f),ke(m,"AID",o.K),qs(o,m),o.u&&o.o&&ja(m,o.u,o.o),f=new Sn(o,o.j,f,o.D+1),o.u===null&&(f.J=o.o),u&&(o.i=u.G.concat(o.i)),u=xu(o,f,1e3),f.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),Ua(o.h,f),Ma(f,m,u)}function qs(o,u){o.H&&At(o.H,function(f,m){ke(u,m,f)}),o.l&&At({},function(f,m){ke(u,m,f)})}function xu(o,u,f){f=Math.min(o.i.length,f);const m=o.l?h(o.l.Ka,o.l,o):null;e:{var R=o.i;let ce=-1;for(;;){const $e=["count="+f];ce==-1?f>0?(ce=R[0].g,$e.push("ofs="+ce)):ce=0:$e.push("ofs="+ce);let Ae=!0;for(let ze=0;ze<f;ze++){var C=R[ze].g;const jt=R[ze].map;if(C-=ce,C<0)ce=Math.max(0,R[ze].g-100),Ae=!1;else try{C="req"+C+"_"||"";try{var $=jt instanceof Map?jt:Object.entries(jt);for(const[fr,Pn]of $){let kn=Pn;c(Pn)&&(kn=ge(Pn)),$e.push(C+fr+"="+encodeURIComponent(kn))}}catch(fr){throw $e.push(C+"type="+encodeURIComponent("_badmap")),fr}}catch{m&&m(jt)}}if(Ae){$=$e.join("&");break e}}$=void 0}return o=o.i.splice(0,f),u.G=o,$}function Lu(o){if(!o.g&&!o.v){o.Y=1;var u=o.Da;ae||E(),ue||(ae(),ue=!0),A.add(u,o),o.A=0}}function qa(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=Ds(h(o.Da,o),Bu(o,o.A)),o.A++,!0)}n.Da=function(){if(this.v=null,Fu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=Ds(h(this.Wa,this),o)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ut(10),Qi(this),Fu(this))};function za(o){o.B!=null&&(a.clearTimeout(o.B),o.B=null)}function Fu(o){o.g=new Sn(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var u=$t(o.na);ke(u,"RID","rpc"),ke(u,"SID",o.M),ke(u,"AID",o.K),ke(u,"CI",o.F?"0":"1"),!o.F&&o.ia&&ke(u,"TO",o.ia),ke(u,"TYPE","xmlhttp"),qs(o,u),o.u&&o.o&&ja(u,o.u,o.o),o.O&&(o.g.H=o.O);var f=o.g;o=o.ba,f.M=1,f.A=Wi($t(u)),f.u=null,f.R=!0,fu(f,o)}n.Va=function(){this.C!=null&&(this.C=null,Qi(this),qa(this),ut(19))};function Yi(o){o.C!=null&&(a.clearTimeout(o.C),o.C=null)}function Uu(o,u){var f=null;if(o.g==u){Yi(o),za(o),o.g=null;var m=2}else if(Fa(o.h,u))f=u.G,yu(o.h,u),m=1;else return;if(o.I!=0){if(u.o)if(m==1){f=u.u?u.u.length:0,u=Date.now()-u.F;var R=o.D;m=cr(),x(m,new au(m,f)),Ji(o)}else Lu(o);else if(R=u.m,R==3||R==0&&u.X>0||!(m==1&&d_(o,u)||m==2&&qa(o)))switch(f&&f.length>0&&(u=o.h,u.i=u.i.concat(f)),R){case 1:hr(o,5);break;case 4:hr(o,10);break;case 3:hr(o,6);break;default:hr(o,2)}}}function Bu(o,u){let f=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(f*=2),f*u}function hr(o,u){if(o.j.info("Error code "+u),u==2){var f=h(o.bb,o),m=o.Ua;const R=!m;m=new bn(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||xs(m,"https"),Wi(m),R?a_(m.toString(),f):c_(m.toString(),f)}else ut(2);o.I=0,o.l&&o.l.pa(u),$u(o),Ou(o)}n.bb=function(o){o?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function $u(o){if(o.I=0,o.ja=[],o.l){const u=Eu(o.h);(u.length!=0||o.i.length!=0)&&(k(o.ja,u),k(o.ja,o.i),o.h.i.length=0,S(o.i),o.i.length=0),o.l.oa()}}function ju(o,u,f){var m=f instanceof bn?$t(f):new bn(f);if(m.g!="")u&&(m.g=u+"."+m.g),Ls(m,m.u);else{var R=a.location;m=R.protocol,u=u?u+"."+R.hostname:R.hostname,R=+R.port;const C=new bn(null);m&&xs(C,m),u&&(C.g=u),R&&Ls(C,R),f&&(C.h=f),m=C}return f=o.G,u=o.wa,f&&u&&ke(m,f,u),ke(m,"VER",o.ka),qs(o,m),m}function Hu(o,u,f){if(u&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Aa&&!o.ma?new Oe(new $a({ab:f})):new Oe(o.ma),u.Fa(o.L),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function qu(){}n=qu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Xi(){}Xi.prototype.g=function(o,u){return new vt(o,u)};function vt(o,u){F.call(this),this.g=new Nu(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.sa&&(o?o["X-WebChannel-Client-Profile"]=u.sa:o={"X-WebChannel-Client-Profile":u.sa}),this.g.U=o,(o=u&&u.Qb)&&!y(o)&&(this.g.u=o),this.A=u&&u.supportsCrossDomainXhr||!1,this.v=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!y(u)&&(this.g.G=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new $r(this)}p(vt,F),vt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},vt.prototype.close=function(){Ha(this.g)},vt.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.v&&(f={},f.__data__=ge(o),o=f);u.i.push(new Zg(u.Ya++,o)),u.I==3&&Ji(u)},vt.prototype.N=function(){this.g.l=null,delete this.j,Ha(this.g),delete this.g,vt.Z.N.call(this)};function zu(o){Fr.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){e:{for(const f in u){o=f;break e}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}p(zu,Fr);function Wu(){Qe.call(this),this.status=1}p(Wu,Qe);function $r(o){this.g=o}p($r,qu),$r.prototype.ra=function(){x(this.g,"a")},$r.prototype.qa=function(o){x(this.g,new zu(o))},$r.prototype.pa=function(o){x(this.g,new Wu)},$r.prototype.oa=function(){x(this.g,"b")},Xi.prototype.createWebChannel=Xi.prototype.g,vt.prototype.send=vt.prototype.o,vt.prototype.open=vt.prototype.m,vt.prototype.close=vt.prototype.close,Np=function(){return new Xi},Dp=function(){return cr()},Vp=qe,Mc={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},qi.NO_ERROR=0,qi.TIMEOUT=8,qi.HTTP_ERROR=6,go=qi,cu.COMPLETE="complete",kp=cu,Et.EventType=Nt,Nt.OPEN="a",Nt.CLOSE="b",Nt.ERROR="c",Nt.MESSAGE="d",F.prototype.listen=F.prototype.J,Ys=Et,Oe.prototype.listenOnce=Oe.prototype.K,Oe.prototype.getLastError=Oe.prototype.Ha,Oe.prototype.getLastErrorCode=Oe.prototype.ya,Oe.prototype.getStatus=Oe.prototype.ca,Oe.prototype.getResponseJson=Oe.prototype.La,Oe.prototype.getResponseText=Oe.prototype.la,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Fa,Pp=Oe}).apply(typeof so<"u"?so:typeof self<"u"?self:typeof window<"u"?window:{});const Hh="@firebase/firestore",qh="4.9.2";class it{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}it.UNAUTHENTICATED=new it(null),it.GOOGLE_CREDENTIALS=new it("google-credentials-uid"),it.FIRST_PARTY=new it("first-party-uid"),it.MOCK_USER=new it("mock-user");let Is="12.3.0";const Sr=new El("@firebase/firestore");function zr(){return Sr.logLevel}function z(n,...e){if(Sr.logLevel<=fe.DEBUG){const t=e.map(Il);Sr.debug(`Firestore (${Is}): ${n}`,...t)}}function En(n,...e){if(Sr.logLevel<=fe.ERROR){const t=e.map(Il);Sr.error(`Firestore (${Is}): ${n}`,...t)}}function fs(n,...e){if(Sr.logLevel<=fe.WARN){const t=e.map(Il);Sr.warn(`Firestore (${Is}): ${n}`,...t)}}function Il(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function te(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Op(n,r,t)}function Op(n,e,t){let r=`FIRESTORE (${Is}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw En(r),new Error(r)}function Te(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||Op(e,s,r)}function ie(n,e){return n}const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends wn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class zn{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Mp{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(it.UNAUTHENTICATED)))}shutdown(){}}class FT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class UT{constructor(e){this.t=e,this.currentUser=it.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Te(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let i=new zn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new zn,e.enqueueRetryable((()=>s(this.currentUser)))};const a=()=>{const l=i;e.enqueueRetryable((async()=>{await l.promise,await s(this.currentUser)}))},c=l=>{z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((l=>c(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(z("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new zn)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Te(typeof r.accessToken=="string",31837,{l:r}),new Mp(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string",2055,{h:e}),new it(e)}}class BT{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=it.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class $T{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new BT(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(it.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class zh{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jT{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Te(this.o===void 0,3512);const r=i=>{i.error!=null&&z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,z("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new zh(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Te(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new zh(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function HT(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class wl{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=HT(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<t&&(r+=e.charAt(s[i]%62))}return r}}function de(n,e){return n<e?-1:n>e?1:0}function xc(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),i=e.charAt(r);if(s!==i)return hc(s)===hc(i)?de(s,i):hc(s)?1:-1}return de(n.length,e.length)}const qT=55296,zT=57343;function hc(n){const e=n.charCodeAt(0);return e>=qT&&e<=zT}function ds(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}const Wh="__name__";class zt{constructor(e,t,r){t===void 0?t=0:t>e.length&&te(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&te(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return zt.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zt?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const i=zt.compareSegments(e.get(s),t.get(s));if(i!==0)return i}return de(e.length,t.length)}static compareSegments(e,t){const r=zt.isNumericId(e),s=zt.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?zt.extractNumericId(e).compare(zt.extractNumericId(t)):xc(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return qn.fromString(e.substring(4,e.length-2))}}class Ve extends zt{construct(e,t,r){return new Ve(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new Ve(t)}static emptyPath(){return new Ve([])}}const WT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ze extends zt{construct(e,t,r){return new Ze(e,t,r)}static isValidIdentifier(e){return WT.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ze.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Wh}static keyField(){return new Ze([Wh])}static fromServerFormat(e){const t=[];let r="",s=0;const i=()=>{if(r.length===0)throw new G(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new G(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(r+=c,s++):(i(),s++)}if(i(),a)throw new G(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ze(t)}static emptyPath(){return new Ze([])}}class Y{constructor(e){this.path=e}static fromPath(e){return new Y(Ve.fromString(e))}static fromName(e){return new Y(Ve.fromString(e).popFirst(5))}static empty(){return new Y(Ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ve.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new Ve(e.slice()))}}function xp(n,e,t){if(!t)throw new G(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function KT(n,e,t,r){if(e===!0&&r===!0)throw new G(N.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Kh(n){if(!Y.isDocumentKey(n))throw new G(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Gh(n){if(Y.isDocumentKey(n))throw new G(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Lp(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Al(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":te(12329,{type:typeof n})}function ps(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new G(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Al(n);throw new G(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Be(n,e){const t={typeString:n};return e&&(t.value=e),t}function Mi(n,e){if(!Lp(n))throw new G(N.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const a=n[r];if(s&&typeof a!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){t=`Expected '${r}' field to equal '${i.value}'`;break}}if(t)throw new G(N.INVALID_ARGUMENT,t);return!0}const Qh=-62135596800,Jh=1e6;class De{static now(){return De.fromMillis(Date.now())}static fromDate(e){return De.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Jh);return new De(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new G(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new G(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Qh)throw new G(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Jh}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:De._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Mi(e,De._jsonSchema))return new De(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Qh;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}De._jsonSchemaVersion="firestore/timestamp/1.0",De._jsonSchema={type:Be("string",De._jsonSchemaVersion),seconds:Be("number"),nanoseconds:Be("number")};class se{static fromTimestamp(e){return new se(e)}static min(){return new se(new De(0,0))}static max(){return new se(new De(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const wi=-1;function GT(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=se.fromTimestamp(r===1e9?new De(t+1,0):new De(t,r));return new Yn(s,Y.empty(),e)}function QT(n){return new Yn(n.readTime,n.key,wi)}class Yn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Yn(se.min(),Y.empty(),wi)}static max(){return new Yn(se.max(),Y.empty(),wi)}}function JT(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Y.comparator(n.documentKey,e.documentKey),t!==0?t:de(n.largestBatchId,e.largestBatchId))}const YT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class XT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ws(n){if(n.code!==N.FAILED_PRECONDITION||n.message!==YT)throw n;z("LocalStore","Unexpectedly lost primary lease")}class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new V(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(t,i).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof V?t:V.resolve(t)}catch(t){return V.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):V.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):V.reject(t)}static resolve(e){return new V(((t,r)=>{t(e)}))}static reject(e){return new V(((t,r)=>{r(e)}))}static waitFor(e){return new V(((t,r)=>{let s=0,i=0,a=!1;e.forEach((c=>{++s,c.next((()=>{++i,a&&i===s&&t()}),(l=>r(l)))})),a=!0,i===s&&t()}))}static or(e){let t=V.resolve(!1);for(const r of e)t=t.next((s=>s?V.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,i)=>{r.push(t.call(this,s,i))})),this.waitFor(r)}static mapArray(e,t){return new V(((r,s)=>{const i=e.length,a=new Array(i);let c=0;for(let l=0;l<i;l++){const h=l;t(e[h]).next((d=>{a[h]=d,++c,c===i&&r(a)}),(d=>s(d)))}}))}static doWhile(e,t){return new V(((r,s)=>{const i=()=>{e()===!0?t().next((()=>{i()}),s):r()};i()}))}}function ZT(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function As(n){return n.name==="IndexedDbTransactionError"}class pa{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}pa.ce=-1;const Sl=-1;function ma(n){return n==null}function Lo(n){return n===0&&1/n==-1/0}function eI(n){return typeof n=="number"&&Number.isInteger(n)&&!Lo(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Fp="";function tI(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Yh(e)),e=nI(n.get(t),e);return Yh(e)}function nI(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const i=n.charAt(s);switch(i){case"\0":t+="";break;case Fp:t+="";break;default:t+=i}}return t}function Yh(n){return n+Fp+""}function Xh(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Vr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Up(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Ne{constructor(e,t){this.comparator=e,this.root=t||Je.EMPTY}insert(e,t){return new Ne(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Je.BLACK,null,null))}remove(e){return new Ne(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Je.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new io(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new io(this.root,e,this.comparator,!1)}getReverseIterator(){return new io(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new io(this.root,e,this.comparator,!0)}}class io{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Je{constructor(e,t,r,s,i){this.key=e,this.value=t,this.color=r??Je.RED,this.left=s??Je.EMPTY,this.right=i??Je.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,i){return new Je(e??this.key,t??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,t,r),null):i===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Je.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Je.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Je.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw te(27949);return e+(this.isRed()?0:1)}}Je.EMPTY=null,Je.RED=!0,Je.BLACK=!1;Je.EMPTY=new class{constructor(){this.size=0}get key(){throw te(57766)}get value(){throw te(16141)}get color(){throw te(16727)}get left(){throw te(29726)}get right(){throw te(36894)}copy(e,t,r,s,i){return this}insert(e,t,r){return new Je(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class He{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Zh(this.data.getIterator())}getIteratorFrom(e){return new Zh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof He)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new He(this.comparator);return t.data=e,t}}class Zh{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ot{constructor(e){this.fields=e,e.sort(Ze.comparator)}static empty(){return new Ot([])}unionWith(e){let t=new He(Ze.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ot(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ds(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class Bp extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class tt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Bp("Invalid base64 string: "+i):i}})(e);return new tt(t)}static fromUint8Array(e){const t=(function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i})(e);return new tt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tt.EMPTY_BYTE_STRING=new tt("");const rI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xn(n){if(Te(!!n,39018),typeof n=="string"){let e=0;const t=rI.exec(n);if(Te(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Me(n.seconds),nanos:Me(n.nanos)}}function Me(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Zn(n){return typeof n=="string"?tt.fromBase64String(n):tt.fromUint8Array(n)}const $p="server_timestamp",jp="__type__",Hp="__previous_value__",qp="__local_write_time__";function bl(n){return(n?.mapValue?.fields||{})[jp]?.stringValue===$p}function ga(n){const e=n.mapValue.fields[Hp];return bl(e)?ga(e):e}function Ai(n){const e=Xn(n.mapValue.fields[qp].timestampValue);return new De(e.seconds,e.nanos)}class sI{constructor(e,t,r,s,i,a,c,l,h,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=h,this.isUsingEmulator=d}}const Fo="(default)";class Si{constructor(e,t){this.projectId=e,this.database=t||Fo}static empty(){return new Si("","")}get isDefaultDatabase(){return this.database===Fo}isEqual(e){return e instanceof Si&&e.projectId===this.projectId&&e.database===this.database}}const zp="__type__",iI="__max__",oo={mapValue:{}},Wp="__vector__",Uo="value";function er(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?bl(n)?4:aI(n)?9007199254740991:oI(n)?10:11:te(28295,{value:n})}function nn(n,e){if(n===e)return!0;const t=er(n);if(t!==er(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ai(n).isEqual(Ai(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Xn(s.timestampValue),c=Xn(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,i){return Zn(s.bytesValue).isEqual(Zn(i.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,i){return Me(s.geoPointValue.latitude)===Me(i.geoPointValue.latitude)&&Me(s.geoPointValue.longitude)===Me(i.geoPointValue.longitude)})(n,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return Me(s.integerValue)===Me(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Me(s.doubleValue),c=Me(i.doubleValue);return a===c?Lo(a)===Lo(c):isNaN(a)&&isNaN(c)}return!1})(n,e);case 9:return ds(n.arrayValue.values||[],e.arrayValue.values||[],nn);case 10:case 11:return(function(s,i){const a=s.mapValue.fields||{},c=i.mapValue.fields||{};if(Xh(a)!==Xh(c))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(c[l]===void 0||!nn(a[l],c[l])))return!1;return!0})(n,e);default:return te(52216,{left:n})}}function bi(n,e){return(n.values||[]).find((t=>nn(t,e)))!==void 0}function ms(n,e){if(n===e)return 0;const t=er(n),r=er(e);if(t!==r)return de(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return de(n.booleanValue,e.booleanValue);case 2:return(function(i,a){const c=Me(i.integerValue||i.doubleValue),l=Me(a.integerValue||a.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1})(n,e);case 3:return ef(n.timestampValue,e.timestampValue);case 4:return ef(Ai(n),Ai(e));case 5:return xc(n.stringValue,e.stringValue);case 6:return(function(i,a){const c=Zn(i),l=Zn(a);return c.compareTo(l)})(n.bytesValue,e.bytesValue);case 7:return(function(i,a){const c=i.split("/"),l=a.split("/");for(let h=0;h<c.length&&h<l.length;h++){const d=de(c[h],l[h]);if(d!==0)return d}return de(c.length,l.length)})(n.referenceValue,e.referenceValue);case 8:return(function(i,a){const c=de(Me(i.latitude),Me(a.latitude));return c!==0?c:de(Me(i.longitude),Me(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return tf(n.arrayValue,e.arrayValue);case 10:return(function(i,a){const c=i.fields||{},l=a.fields||{},h=c[Uo]?.arrayValue,d=l[Uo]?.arrayValue,p=de(h?.values?.length||0,d?.values?.length||0);return p!==0?p:tf(h,d)})(n.mapValue,e.mapValue);case 11:return(function(i,a){if(i===oo.mapValue&&a===oo.mapValue)return 0;if(i===oo.mapValue)return 1;if(a===oo.mapValue)return-1;const c=i.fields||{},l=Object.keys(c),h=a.fields||{},d=Object.keys(h);l.sort(),d.sort();for(let p=0;p<l.length&&p<d.length;++p){const g=xc(l[p],d[p]);if(g!==0)return g;const S=ms(c[l[p]],h[d[p]]);if(S!==0)return S}return de(l.length,d.length)})(n.mapValue,e.mapValue);default:throw te(23264,{he:t})}}function ef(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return de(n,e);const t=Xn(n),r=Xn(e),s=de(t.seconds,r.seconds);return s!==0?s:de(t.nanos,r.nanos)}function tf(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const i=ms(t[s],r[s]);if(i)return i}return de(t.length,r.length)}function gs(n){return Lc(n)}function Lc(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Xn(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Zn(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Y.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const i of t.values||[])s?s=!1:r+=",",r+=Lc(i);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Lc(t.fields[a])}`;return s+"}"})(n.mapValue):te(61005,{value:n})}function _o(n){switch(er(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ga(n);return e?16+_o(e):16;case 5:return 2*n.stringValue.length;case 6:return Zn(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+_o(i)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return Vr(r.fields,((i,a)=>{s+=i.length+_o(a)})),s})(n.mapValue);default:throw te(13486,{value:n})}}function Fc(n){return!!n&&"integerValue"in n}function Rl(n){return!!n&&"arrayValue"in n}function nf(n){return!!n&&"nullValue"in n}function rf(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function yo(n){return!!n&&"mapValue"in n}function oI(n){return(n?.mapValue?.fields||{})[zp]?.stringValue===Wp}function li(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Vr(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=li(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=li(n.arrayValue.values[t]);return e}return{...n}}function aI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===iI}class Rt{constructor(e){this.value=e}static empty(){return new Rt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!yo(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=li(t)}setAll(e){let t=Ze.emptyPath(),r={},s=[];e.forEach(((a,c)=>{if(!t.isImmediateParentOf(c)){const l=this.getFieldsMap(t);this.applyChanges(l,r,s),r={},s=[],t=c.popLast()}a?r[c.lastSegment()]=li(a):s.push(c.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,r,s)}delete(e){const t=this.field(e.popLast());yo(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return nn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];yo(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Vr(t,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new Rt(li(this.value))}}function Kp(n){const e=[];return Vr(n.fields,((t,r)=>{const s=new Ze([t]);if(yo(r)){const i=Kp(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)})),new Ot(e)}class at{constructor(e,t,r,s,i,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new at(e,0,se.min(),se.min(),se.min(),Rt.empty(),0)}static newFoundDocument(e,t,r,s){return new at(e,1,t,se.min(),r,s,0)}static newNoDocument(e,t){return new at(e,2,t,se.min(),se.min(),Rt.empty(),0)}static newUnknownDocument(e,t){return new at(e,3,t,se.min(),se.min(),Rt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof at&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new at(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Bo{constructor(e,t){this.position=e,this.inclusive=t}}function sf(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const i=e[s],a=n.position[s];if(i.field.isKeyField()?r=Y.comparator(Y.fromName(a.referenceValue),t.key):r=ms(a,t.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function of(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!nn(n.position[t],e.position[t]))return!1;return!0}class $o{constructor(e,t="asc"){this.field=e,this.dir=t}}function cI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Gp{}class je extends Gp{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new uI(e,t,r):t==="array-contains"?new dI(e,r):t==="in"?new pI(e,r):t==="not-in"?new mI(e,r):t==="array-contains-any"?new gI(e,r):new je(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new hI(e,r):new fI(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ms(t,this.value)):t!==null&&er(this.value)===er(t)&&this.matchesComparison(ms(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rn extends Gp{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new rn(e,t)}matches(e){return Qp(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Qp(n){return n.op==="and"}function Jp(n){return lI(n)&&Qp(n)}function lI(n){for(const e of n.filters)if(e instanceof rn)return!1;return!0}function Uc(n){if(n instanceof je)return n.field.canonicalString()+n.op.toString()+gs(n.value);if(Jp(n))return n.filters.map((e=>Uc(e))).join(",");{const e=n.filters.map((t=>Uc(t))).join(",");return`${n.op}(${e})`}}function Yp(n,e){return n instanceof je?(function(r,s){return s instanceof je&&r.op===s.op&&r.field.isEqual(s.field)&&nn(r.value,s.value)})(n,e):n instanceof rn?(function(r,s){return s instanceof rn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,a,c)=>i&&Yp(a,s.filters[c])),!0):!1})(n,e):void te(19439)}function Xp(n){return n instanceof je?(function(t){return`${t.field.canonicalString()} ${t.op} ${gs(t.value)}`})(n):n instanceof rn?(function(t){return t.op.toString()+" {"+t.getFilters().map(Xp).join(" ,")+"}"})(n):"Filter"}class uI extends je{constructor(e,t,r){super(e,t,r),this.key=Y.fromName(r.referenceValue)}matches(e){const t=Y.comparator(e.key,this.key);return this.matchesComparison(t)}}class hI extends je{constructor(e,t){super(e,"in",t),this.keys=Zp("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class fI extends je{constructor(e,t){super(e,"not-in",t),this.keys=Zp("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Zp(n,e){return(e.arrayValue?.values||[]).map((t=>Y.fromName(t.referenceValue)))}class dI extends je{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Rl(t)&&bi(t.arrayValue,this.value)}}class pI extends je{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&bi(this.value.arrayValue,t)}}class mI extends je{constructor(e,t){super(e,"not-in",t)}matches(e){if(bi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!bi(this.value.arrayValue,t)}}class gI extends je{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Rl(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>bi(this.value.arrayValue,r)))}}class _I{constructor(e,t=null,r=[],s=[],i=null,a=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=c,this.Te=null}}function af(n,e=null,t=[],r=[],s=null,i=null,a=null){return new _I(n,e,t,r,s,i,a)}function Cl(n){const e=ie(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Uc(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),ma(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>gs(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>gs(r))).join(",")),e.Te=t}return e.Te}function Pl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!cI(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Yp(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!of(n.startAt,e.startAt)&&of(n.endAt,e.endAt)}function Bc(n){return Y.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class _a{constructor(e,t=null,r=[],s=[],i=null,a="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=c,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function yI(n,e,t,r,s,i,a,c){return new _a(n,e,t,r,s,i,a,c)}function em(n){return new _a(n)}function cf(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function EI(n){return n.collectionGroup!==null}function ui(n){const e=ie(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),t.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new He(Ze.comparator);return a.filters.forEach((l=>{l.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new $o(i,r))})),t.has(Ze.keyField().canonicalString())||e.Ie.push(new $o(Ze.keyField(),r))}return e.Ie}function Qt(n){const e=ie(n);return e.Ee||(e.Ee=vI(e,ui(n))),e.Ee}function vI(n,e){if(n.limitType==="F")return af(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new $o(s.field,i)}));const t=n.endAt?new Bo(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Bo(n.startAt.position,n.startAt.inclusive):null;return af(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function $c(n,e,t){return new _a(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ya(n,e){return Pl(Qt(n),Qt(e))&&n.limitType===e.limitType}function tm(n){return`${Cl(Qt(n))}|lt:${n.limitType}`}function Wr(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>Xp(s))).join(", ")}]`),ma(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>gs(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>gs(s))).join(",")),`Target(${r})`})(Qt(n))}; limitType=${n.limitType})`}function Ea(n,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Y.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(n,e)&&(function(r,s){for(const i of ui(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(a,c,l){const h=sf(a,c,l);return a.inclusive?h<=0:h<0})(r.startAt,ui(r),s)||r.endAt&&!(function(a,c,l){const h=sf(a,c,l);return a.inclusive?h>=0:h>0})(r.endAt,ui(r),s))})(n,e)}function TI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function nm(n){return(e,t)=>{let r=!1;for(const s of ui(n)){const i=II(s,e,t);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function II(n,e,t){const r=n.field.isKeyField()?Y.comparator(e.key,t.key):(function(i,a,c){const l=a.data.field(i),h=c.data.field(i);return l!==null&&h!==null?ms(l,h):te(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return te(19790,{direction:n.dir})}}class Dr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Vr(this.inner,((t,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return Up(this.inner)}size(){return this.innerSize}}const wI=new Ne(Y.comparator);function vn(){return wI}const rm=new Ne(Y.comparator);function Xs(...n){let e=rm;for(const t of n)e=e.insert(t.key,t);return e}function sm(n){let e=rm;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function vr(){return hi()}function im(){return hi()}function hi(){return new Dr((n=>n.toString()),((n,e)=>n.isEqual(e)))}const AI=new Ne(Y.comparator),SI=new He(Y.comparator);function pe(...n){let e=SI;for(const t of n)e=e.add(t);return e}const bI=new He(de);function RI(){return bI}function kl(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lo(e)?"-0":e}}function om(n){return{integerValue:""+n}}function CI(n,e){return eI(e)?om(e):kl(n,e)}class va{constructor(){this._=void 0}}function PI(n,e,t){return n instanceof jo?(function(s,i){const a={fields:{[jp]:{stringValue:$p},[qp]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&bl(i)&&(i=ga(i)),i&&(a.fields[Hp]=i),{mapValue:a}})(t,e):n instanceof Ri?cm(n,e):n instanceof Ci?lm(n,e):(function(s,i){const a=am(s,i),c=lf(a)+lf(s.Ae);return Fc(a)&&Fc(s.Ae)?om(c):kl(s.serializer,c)})(n,e)}function kI(n,e,t){return n instanceof Ri?cm(n,e):n instanceof Ci?lm(n,e):t}function am(n,e){return n instanceof Ho?(function(r){return Fc(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class jo extends va{}class Ri extends va{constructor(e){super(),this.elements=e}}function cm(n,e){const t=um(e);for(const r of n.elements)t.some((s=>nn(s,r)))||t.push(r);return{arrayValue:{values:t}}}class Ci extends va{constructor(e){super(),this.elements=e}}function lm(n,e){let t=um(e);for(const r of n.elements)t=t.filter((s=>!nn(s,r)));return{arrayValue:{values:t}}}class Ho extends va{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function lf(n){return Me(n.integerValue||n.doubleValue)}function um(n){return Rl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function VI(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof Ri&&s instanceof Ri||r instanceof Ci&&s instanceof Ci?ds(r.elements,s.elements,nn):r instanceof Ho&&s instanceof Ho?nn(r.Ae,s.Ae):r instanceof jo&&s instanceof jo})(n.transform,e.transform)}class DI{constructor(e,t){this.version=e,this.transformResults=t}}class Jt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Jt}static exists(e){return new Jt(void 0,e)}static updateTime(e){return new Jt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Eo(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ta{}function hm(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new dm(n.key,Jt.none()):new xi(n.key,n.data,Jt.none());{const t=n.data,r=Rt.empty();let s=new He(Ze.comparator);for(let i of e.fields)if(!s.has(i)){let a=t.field(i);a===null&&i.length>1&&(i=i.popLast(),a=t.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Nr(n.key,r,new Ot(s.toArray()),Jt.none())}}function NI(n,e,t){n instanceof xi?(function(s,i,a){const c=s.value.clone(),l=hf(s.fieldTransforms,i,a.transformResults);c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()})(n,e,t):n instanceof Nr?(function(s,i,a){if(!Eo(s.precondition,i))return void i.convertToUnknownDocument(a.version);const c=hf(s.fieldTransforms,i,a.transformResults),l=i.data;l.setAll(fm(s)),l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(n,e,t):(function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function fi(n,e,t,r){return n instanceof xi?(function(i,a,c,l){if(!Eo(i.precondition,a))return c;const h=i.value.clone(),d=ff(i.fieldTransforms,l,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null})(n,e,t,r):n instanceof Nr?(function(i,a,c,l){if(!Eo(i.precondition,a))return c;const h=ff(i.fieldTransforms,l,a),d=a.data;return d.setAll(fm(i)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((p=>p.field)))})(n,e,t,r):(function(i,a,c){return Eo(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c})(n,e,t)}function OI(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),i=am(r.transform,s||null);i!=null&&(t===null&&(t=Rt.empty()),t.set(r.field,i))}return t||null}function uf(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ds(r,s,((i,a)=>VI(i,a)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class xi extends Ta{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Nr extends Ta{constructor(e,t,r,s,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function fm(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function hf(n,e,t){const r=new Map;Te(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const i=n[s],a=i.transform,c=e.data.field(i.field);r.set(i.field,kI(a,c,t[s]))}return r}function ff(n,e,t){const r=new Map;for(const s of n){const i=s.transform,a=t.data.field(s.field);r.set(s.field,PI(i,a,e))}return r}class dm extends Ta{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class MI extends Ta{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class xI{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&NI(i,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=fi(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=fi(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=im();return this.mutations.forEach((s=>{const i=e.get(s.key),a=i.overlayedDocument;let c=this.applyToLocalView(a,i.mutatedFields);c=t.has(s.key)?null:c;const l=hm(a,c);l!==null&&r.set(s.key,l),a.isValidDocument()||a.convertToNoDocument(se.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),pe())}isEqual(e){return this.batchId===e.batchId&&ds(this.mutations,e.mutations,((t,r)=>uf(t,r)))&&ds(this.baseMutations,e.baseMutations,((t,r)=>uf(t,r)))}}class Vl{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Te(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return AI})();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Vl(e,t,r,s)}}class LI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class FI{constructor(e,t){this.count=e,this.unchangedNames=t}}var Fe,me;function UI(n){switch(n){case N.OK:return te(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return te(15467,{code:n})}}function pm(n){if(n===void 0)return En("GRPC error has no .code"),N.UNKNOWN;switch(n){case Fe.OK:return N.OK;case Fe.CANCELLED:return N.CANCELLED;case Fe.UNKNOWN:return N.UNKNOWN;case Fe.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case Fe.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case Fe.INTERNAL:return N.INTERNAL;case Fe.UNAVAILABLE:return N.UNAVAILABLE;case Fe.UNAUTHENTICATED:return N.UNAUTHENTICATED;case Fe.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case Fe.NOT_FOUND:return N.NOT_FOUND;case Fe.ALREADY_EXISTS:return N.ALREADY_EXISTS;case Fe.PERMISSION_DENIED:return N.PERMISSION_DENIED;case Fe.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case Fe.ABORTED:return N.ABORTED;case Fe.OUT_OF_RANGE:return N.OUT_OF_RANGE;case Fe.UNIMPLEMENTED:return N.UNIMPLEMENTED;case Fe.DATA_LOSS:return N.DATA_LOSS;default:return te(39323,{code:n})}}(me=Fe||(Fe={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";function BI(){return new TextEncoder}const $I=new qn([4294967295,4294967295],0);function df(n){const e=BI().encode(n),t=new Cp;return t.update(e),new Uint8Array(t.digest())}function pf(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new qn([t,r],0),new qn([s,i],0)]}class Dl{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Zs(`Invalid padding: ${t}`);if(r<0)throw new Zs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zs(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Zs(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=qn.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(qn.fromNumber(r)));return s.compare($I)===1&&(s=new qn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=df(e),[r,s]=pf(t);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Dl(i,s,t);return r.forEach((c=>a.insert(c))),a}insert(e){if(this.ge===0)return;const t=df(e),[r,s]=pf(t);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Zs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ia{constructor(e,t,r,s,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Li.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Ia(se.min(),s,new Ne(de),vn(),pe())}}class Li{constructor(e,t,r,s,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Li(r,t,pe(),pe(),pe())}}class vo{constructor(e,t,r,s){this.be=e,this.removedTargetIds=t,this.key=r,this.De=s}}class mm{constructor(e,t){this.targetId=e,this.Ce=t}}class gm{constructor(e,t,r=tt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class mf{constructor(){this.ve=0,this.Fe=gf(),this.Me=tt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=pe(),t=pe(),r=pe();return this.Fe.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:te(38017,{changeType:i})}})),new Li(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=gf()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Te(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class jI{constructor(e){this.Ge=e,this.ze=new Map,this.je=vn(),this.Je=ao(),this.He=ao(),this.Ye=new Ne(de)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:te(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const i=s.target;if(Bc(i))if(r===0){const a=new Y(i.path);this.et(t,a,at.newNoDocument(a,se.min()))}else Te(r===1,20013,{expectedCount:r});else{const a=this._t(t);if(a!==r){const c=this.ut(e),l=c?this.ct(c,e,a):1;if(l!==0){this.it(t);const h=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=t;let a,c;try{a=Zn(r).toUint8Array()}catch(l){if(l instanceof Bp)return fs("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new Dl(a,s,i)}catch(l){return fs(l instanceof Zs?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((i=>{const a=this.Ge.ht(),c=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(t,i,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((i,a)=>{const c=this.ot(a);if(c){if(i.current&&Bc(c.target)){const l=new Y(c.target.path);this.It(l).has(a)||this.Et(a,l)||this.et(a,l,at.newNoDocument(l,e))}i.Be&&(t.set(a,i.ke()),i.qe())}}));let r=pe();this.He.forEach(((i,a)=>{let c=!0;a.forEachWhile((l=>{const h=this.ot(l);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(i))})),this.je.forEach(((i,a)=>a.setReadTime(e)));const s=new Ia(e,t,this.Ye,this.je,r);return this.je=vn(),this.Je=ao(),this.He=ao(),this.Ye=new Ne(de),s}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new mf,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new He(de),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new He(de),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||z("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new mf),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ao(){return new Ne(Y.comparator)}function gf(){return new Ne(Y.comparator)}const HI={asc:"ASCENDING",desc:"DESCENDING"},qI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zI={and:"AND",or:"OR"};class WI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function jc(n,e){return n.useProto3Json||ma(e)?e:{value:e}}function qo(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _m(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function KI(n,e){return qo(n,e.toTimestamp())}function Yt(n){return Te(!!n,49232),se.fromTimestamp((function(t){const r=Xn(t);return new De(r.seconds,r.nanos)})(n))}function Nl(n,e){return Hc(n,e).canonicalString()}function Hc(n,e){const t=(function(s){return new Ve(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function ym(n){const e=Ve.fromString(n);return Te(wm(e),10190,{key:e.toString()}),e}function qc(n,e){return Nl(n.databaseId,e.path)}function fc(n,e){const t=ym(e);if(t.get(1)!==n.databaseId.projectId)throw new G(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new G(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Y(vm(t))}function Em(n,e){return Nl(n.databaseId,e)}function GI(n){const e=ym(n);return e.length===4?Ve.emptyPath():vm(e)}function zc(n){return new Ve(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function vm(n){return Te(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function _f(n,e,t){return{name:qc(n,e),fields:t.value.mapValue.fields}}function QI(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:te(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(h,d){return h.useProto3Json?(Te(d===void 0||typeof d=="string",58123),tt.fromBase64String(d||"")):(Te(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),tt.fromUint8Array(d||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&(function(h){const d=h.code===void 0?N.UNKNOWN:pm(h.code);return new G(d,h.message||"")})(a);t=new gm(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=fc(n,r.document.name),i=Yt(r.document.updateTime),a=r.document.createTime?Yt(r.document.createTime):se.min(),c=new Rt({mapValue:{fields:r.document.fields}}),l=at.newFoundDocument(s,i,a,c),h=r.targetIds||[],d=r.removedTargetIds||[];t=new vo(h,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=fc(n,r.document),i=r.readTime?Yt(r.readTime):se.min(),a=at.newNoDocument(s,i),c=r.removedTargetIds||[];t=new vo([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=fc(n,r.document),i=r.removedTargetIds||[];t=new vo([],i,s,null)}else{if(!("filter"in e))return te(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new FI(s,i),c=r.targetId;t=new mm(c,a)}}return t}function JI(n,e){let t;if(e instanceof xi)t={update:_f(n,e.key,e.value)};else if(e instanceof dm)t={delete:qc(n,e.key)};else if(e instanceof Nr)t={update:_f(n,e.key,e.data),updateMask:iw(e.fieldMask)};else{if(!(e instanceof MI))return te(16599,{Vt:e.type});t={verify:qc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(i,a){const c=a.transform;if(c instanceof jo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ri)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ci)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ho)return{fieldPath:a.field.canonicalString(),increment:c.Ae};throw te(20930,{transform:a.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:KI(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:te(27497)})(n,e.precondition)),t}function YI(n,e){return n&&n.length>0?(Te(e!==void 0,14353),n.map((t=>(function(s,i){let a=s.updateTime?Yt(s.updateTime):Yt(i);return a.isEqual(se.min())&&(a=Yt(i)),new DI(a,s.transformResults||[])})(t,e)))):[]}function XI(n,e){return{documents:[Em(n,e.path)]}}function ZI(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Em(n,s);const i=(function(h){if(h.length!==0)return Im(rn.create(h,"and"))})(e.filters);i&&(t.structuredQuery.where=i);const a=(function(h){if(h.length!==0)return h.map((d=>(function(g){return{field:Kr(g.field),direction:nw(g.dir)}})(d)))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=jc(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:s}}function ew(n){let e=GI(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Te(r===1,65062);const d=t.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];t.where&&(i=(function(p){const g=Tm(p);return g instanceof rn&&Jp(g)?g.getFilters():[g]})(t.where));let a=[];t.orderBy&&(a=(function(p){return p.map((g=>(function(k){return new $o(Gr(k.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(g)))})(t.orderBy));let c=null;t.limit&&(c=(function(p){let g;return g=typeof p=="object"?p.value:p,ma(g)?null:g})(t.limit));let l=null;t.startAt&&(l=(function(p){const g=!!p.before,S=p.values||[];return new Bo(S,g)})(t.startAt));let h=null;return t.endAt&&(h=(function(p){const g=!p.before,S=p.values||[];return new Bo(S,g)})(t.endAt)),yI(e,s,a,i,c,"F",l,h)}function tw(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Tm(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Gr(t.unaryFilter.field);return je.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Gr(t.unaryFilter.field);return je.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Gr(t.unaryFilter.field);return je.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Gr(t.unaryFilter.field);return je.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return te(61313);default:return te(60726)}})(n):n.fieldFilter!==void 0?(function(t){return je.create(Gr(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return te(58110);default:return te(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return rn.create(t.compositeFilter.filters.map((r=>Tm(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return te(1026)}})(t.compositeFilter.op))})(n):te(30097,{filter:n})}function nw(n){return HI[n]}function rw(n){return qI[n]}function sw(n){return zI[n]}function Kr(n){return{fieldPath:n.canonicalString()}}function Gr(n){return Ze.fromServerFormat(n.fieldPath)}function Im(n){return n instanceof je?(function(t){if(t.op==="=="){if(rf(t.value))return{unaryFilter:{field:Kr(t.field),op:"IS_NAN"}};if(nf(t.value))return{unaryFilter:{field:Kr(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(rf(t.value))return{unaryFilter:{field:Kr(t.field),op:"IS_NOT_NAN"}};if(nf(t.value))return{unaryFilter:{field:Kr(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kr(t.field),op:rw(t.op),value:t.value}}})(n):n instanceof rn?(function(t){const r=t.getFilters().map((s=>Im(s)));return r.length===1?r[0]:{compositeFilter:{op:sw(t.op),filters:r}}})(n):te(54877,{filter:n})}function iw(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function wm(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Un{constructor(e,t,r,s,i=se.min(),a=se.min(),c=tt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new Un(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Un(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Un(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Un(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ow{constructor(e){this.yt=e}}function aw(n){const e=ew({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?$c(e,e.limit,"L"):e}class cw{constructor(){this.Cn=new lw}addToCollectionParentIndex(e,t){return this.Cn.add(t),V.resolve()}getCollectionParents(e,t){return V.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return V.resolve()}deleteFieldIndex(e,t){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,t){return V.resolve()}getDocumentsMatchingTarget(e,t){return V.resolve(null)}getIndexType(e,t){return V.resolve(0)}getFieldIndexes(e,t){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,t){return V.resolve(Yn.min())}getMinOffsetFromCollectionGroup(e,t){return V.resolve(Yn.min())}updateCollectionGroup(e,t,r){return V.resolve()}updateIndexEntries(e,t){return V.resolve()}}class lw{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new He(Ve.comparator),i=!s.has(r);return this.index[t]=s.add(r),i}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new He(Ve.comparator)).toArray()}}const yf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Am=41943040;class gt{static withCacheSize(e){return new gt(e,gt.DEFAULT_COLLECTION_PERCENTILE,gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}gt.DEFAULT_COLLECTION_PERCENTILE=10,gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gt.DEFAULT=new gt(Am,gt.DEFAULT_COLLECTION_PERCENTILE,gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gt.DISABLED=new gt(-1,0,0);class _s{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new _s(0)}static cr(){return new _s(-1)}}const Ef="LruGarbageCollector",uw=1048576;function vf([n,e],[t,r]){const s=de(n,t);return s===0?de(e,r):s}class hw{constructor(e){this.Ir=e,this.buffer=new He(vf),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();vf(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class fw{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){z(Ef,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){As(t)?z(Ef,"Ignoring IndexedDB error during garbage collection: ",t):await ws(t)}await this.Vr(3e5)}))}}class dw{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return V.resolve(pa.ce);const r=new hw(t);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(z("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(yf)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(z("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yf):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,s,i,a,c,l,h;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,a=Date.now(),this.nthSequenceNumber(e,s)))).next((p=>(r=p,c=Date.now(),this.removeTargets(e,r,t)))).next((p=>(i=p,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((p=>(h=Date.now(),zr()<=fe.DEBUG&&z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(c-a)+`ms
	Removed ${i} targets in `+(l-c)+`ms
	Removed ${p} documents in `+(h-l)+`ms
Total Duration: ${h-d}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p}))))}}function pw(n,e){return new dw(n,e)}class mw{constructor(){this.changes=new Dr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,at.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?V.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class gw{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class _w{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&fi(r.mutation,s,Ot.empty(),De.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,pe()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=pe()){const s=vr();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((i=>{let a=Xs();return i.forEach(((c,l)=>{a=a.insert(c,l.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){const r=vr();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,pe())))}populateOverlays(e,t,r){const s=[];return r.forEach((i=>{t.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((a,c)=>{t.set(a,c)}))}))}computeViews(e,t,r,s){let i=vn();const a=hi(),c=(function(){return hi()})();return t.forEach(((l,h)=>{const d=r.get(h.key);s.has(h.key)&&(d===void 0||d.mutation instanceof Nr)?i=i.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),fi(d.mutation,h,d.mutation.getFieldMask(),De.now())):a.set(h.key,Ot.empty())})),this.recalculateAndSaveOverlays(e,i).next((l=>(l.forEach(((h,d)=>a.set(h,d))),t.forEach(((h,d)=>c.set(h,new gw(d,a.get(h)??null)))),c)))}recalculateAndSaveOverlays(e,t){const r=hi();let s=new Ne(((a,c)=>a-c)),i=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(const c of a)c.keys().forEach((l=>{const h=t.get(l);if(h===null)return;let d=r.get(l)||Ot.empty();d=c.applyToLocalView(h,d),r.set(l,d);const p=(s.get(c.batchId)||pe()).add(l);s=s.insert(c.batchId,p)}))})).next((()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const l=c.getNext(),h=l.key,d=l.value,p=im();d.forEach((g=>{if(!i.has(g)){const S=hm(t.get(g),r.get(g));S!==null&&p.set(g,S),i=i.add(g)}})),a.push(this.documentOverlayCache.saveOverlays(e,h,p))}return V.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return(function(a){return Y.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):EI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-i.size):V.resolve(vr());let c=wi,l=i;return a.next((h=>V.forEach(h,((d,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),i.get(d)?V.resolve():this.remoteDocumentCache.getEntry(e,d).next((g=>{l=l.insert(d,g)}))))).next((()=>this.populateOverlays(e,h,i))).next((()=>this.computeViews(e,l,h,pe()))).next((d=>({batchId:c,changes:sm(d)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Y(t)).next((r=>{let s=Xs();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const i=t.collectionGroup;let a=Xs();return this.indexManager.getCollectionParents(e,i).next((c=>V.forEach(c,(l=>{const h=(function(p,g){return new _a(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next((d=>{d.forEach(((p,g)=>{a=a.insert(p,g)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i,s)))).next((a=>{i.forEach(((l,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,at.newInvalidDocument(d)))}));let c=Xs();return a.forEach(((l,h)=>{const d=i.get(l);d!==void 0&&fi(d.mutation,h,Ot.empty(),De.now()),Ea(t,h)&&(c=c.insert(l,h))})),c}))}}class yw{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return V.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Yt(s.createTime)}})(t)),V.resolve()}getNamedQuery(e,t){return V.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:aw(s.bundledQuery),readTime:Yt(s.readTime)}})(t)),V.resolve()}}class Ew{constructor(){this.overlays=new Ne(Y.comparator),this.qr=new Map}getOverlay(e,t){return V.resolve(this.overlays.get(t))}getOverlays(e,t){const r=vr();return V.forEach(t,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,i)=>{this.St(e,t,i)})),V.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),V.resolve()}getOverlaysForCollection(e,t,r){const s=vr(),i=t.length+1,a=new Y(t.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const l=c.getNext().value,h=l.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return V.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let i=new Ne(((h,d)=>h-d));const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let d=i.get(h.largestBatchId);d===null&&(d=vr(),i=i.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const c=vr(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((h,d)=>c.set(h,d))),!(c.size()>=s)););return V.resolve(c)}St(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new LI(t,r));let i=this.qr.get(t);i===void 0&&(i=pe(),this.qr.set(t,i)),this.qr.set(t,i.add(r.key))}}class vw{constructor(){this.sessionToken=tt.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,V.resolve()}}class Ol{constructor(){this.Qr=new He(We.$r),this.Ur=new He(We.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new We(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new We(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Y(new Ve([])),r=new We(t,e),s=new We(t,e+1),i=[];return this.Ur.forEachInRange([r,s],(a=>{this.Gr(a),i.push(a.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Y(new Ve([])),r=new We(t,e),s=new We(t,e+1);let i=pe();return this.Ur.forEachInRange([r,s],(a=>{i=i.add(a.key)})),i}containsKey(e){const t=new We(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class We{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Y.comparator(e.key,t.key)||de(e.Yr,t.Yr)}static Kr(e,t){return de(e.Yr,t.Yr)||Y.comparator(e.key,t.key)}}class Tw{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new He(We.$r)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new xI(i,t,r,s);this.mutationQueue.push(a);for(const c of s)this.Zr=this.Zr.add(new We(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return V.resolve(a)}lookupMutationBatch(e,t){return V.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.ei(r),i=s<0?0:s;return V.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?Sl:this.tr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new We(t,0),s=new We(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],(a=>{const c=this.Xr(a.Yr);i.push(c)})),V.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new He(de);return t.forEach((s=>{const i=new We(s,0),a=new We(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],(c=>{r=r.add(c.Yr)}))})),V.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let i=r;Y.isDocumentKey(i)||(i=i.child(""));const a=new We(new Y(i),0);let c=new He(de);return this.Zr.forEachWhile((l=>{const h=l.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(c=c.add(l.Yr)),!0)}),a),V.resolve(this.ti(c))}ti(e){const t=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Te(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return V.forEach(t.mutations,(s=>{const i=new We(s.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new We(t,0),s=this.Zr.firstAfterOrEqual(r);return V.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Iw{constructor(e){this.ri=e,this.docs=(function(){return new Ne(Y.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return V.resolve(r?r.document.mutableCopy():at.newInvalidDocument(t))}getEntries(e,t){let r=vn();return t.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():at.newInvalidDocument(s))})),V.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let i=vn();const a=t.path,c=new Y(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){const{key:h,value:{document:d}}=l.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||JT(QT(d),r)<=0||(s.has(d.key)||Ea(t,d))&&(i=i.insert(d.key,d.mutableCopy()))}return V.resolve(i)}getAllFromCollectionGroup(e,t,r,s){te(9500)}ii(e,t){return V.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new ww(this)}getSize(e){return V.resolve(this.size)}}class ww extends mw{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),V.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class Aw{constructor(e){this.persistence=e,this.si=new Dr((t=>Cl(t)),Pl),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.oi=0,this._i=new Ol,this.targetCount=0,this.ai=_s.ur()}forEachTarget(e,t){return this.si.forEach(((r,s)=>t(s))),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),V.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new _s(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,V.resolve()}updateTargetData(e,t){return this.Pr(t),V.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,t,r){let s=0;const i=[];return this.si.forEach(((a,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),V.waitFor(i).next((()=>s))}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return V.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),V.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const s=this.persistence.referenceDelegate,i=[];return s&&t.forEach((a=>{i.push(s.markPotentiallyOrphaned(e,a))})),V.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),V.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return V.resolve(r)}containsKey(e,t){return V.resolve(this._i.containsKey(t))}}class Sm{constructor(e,t){this.ui={},this.overlays={},this.ci=new pa(0),this.li=!1,this.li=!0,this.hi=new vw,this.referenceDelegate=e(this),this.Pi=new Aw(this),this.indexManager=new cw,this.remoteDocumentCache=(function(s){return new Iw(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new ow(t),this.Ii=new yw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ew,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new Tw(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){z("MemoryPersistence","Starting transaction:",e);const s=new Sw(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ai(e,t){return V.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class Sw extends XT{constructor(e){super(),this.currentSequenceNumber=e}}class Ml{constructor(e){this.persistence=e,this.Ri=new Ol,this.Vi=null}static mi(e){return new Ml(e)}get fi(){if(this.Vi)return this.Vi;throw te(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),V.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),V.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.fi,(r=>{const s=Y.fromPath(r);return this.gi(e,s).next((i=>{i||t.removeEntry(s,se.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return V.or([()=>V.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class zo{constructor(e,t){this.persistence=e,this.pi=new Dr((r=>tI(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=pw(this,t)}static mi(e,t){return new zo(e,t)}Ei(){}di(e){return V.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return V.forEach(this.pi,((r,s)=>this.br(e,r,s).next((i=>i?V.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,(a=>this.br(e,a,t).next((c=>{c||(r++,i.removeEntry(a,se.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),V.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),V.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),V.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=_o(e.data.value)),t}br(e,t,r){return V.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return V.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class xl{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=s}static As(e,t){let r=pe(),s=pe();for(const i of t.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new xl(e,t.fromCache,r,s)}}class bw{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Rw{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return _v()?8:ZT(lt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const i={result:null};return this.ys(e,t).next((a=>{i.result=a})).next((()=>{if(!i.result)return this.ws(e,t,s,r).next((a=>{i.result=a}))})).next((()=>{if(i.result)return;const a=new bw;return this.Ss(e,t,a).next((c=>{if(i.result=c,this.Vs)return this.bs(e,t,a,c.size)}))})).next((()=>i.result))}bs(e,t,r,s){return r.documentReadCount<this.fs?(zr()<=fe.DEBUG&&z("QueryEngine","SDK will not create cache indexes for query:",Wr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),V.resolve()):(zr()<=fe.DEBUG&&z("QueryEngine","Query:",Wr(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(zr()<=fe.DEBUG&&z("QueryEngine","The SDK decides to create cache indexes for query:",Wr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qt(t))):V.resolve())}ys(e,t){if(cf(t))return V.resolve(null);let r=Qt(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=$c(t,null,"F"),r=Qt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const a=pe(...i);return this.ps.getDocuments(e,a).next((c=>this.indexManager.getMinOffset(e,r).next((l=>{const h=this.Ds(t,c);return this.Cs(t,h,a,l.readTime)?this.ys(e,$c(t,null,"F")):this.vs(e,h,t,l)}))))})))))}ws(e,t,r,s){return cf(t)||s.isEqual(se.min())?V.resolve(null):this.ps.getDocuments(e,r).next((i=>{const a=this.Ds(t,i);return this.Cs(t,a,r,s)?V.resolve(null):(zr()<=fe.DEBUG&&z("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Wr(t)),this.vs(e,a,t,GT(s,wi)).next((c=>c)))}))}Ds(e,t){let r=new He(nm(e));return t.forEach(((s,i)=>{Ea(e,i)&&(r=r.add(i))})),r}Cs(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,t,r){return zr()<=fe.DEBUG&&z("QueryEngine","Using full collection scan to execute query:",Wr(t)),this.ps.getDocumentsMatchingQuery(e,t,Yn.min(),r)}vs(e,t,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((i=>(t.forEach((a=>{i=i.insert(a.key,a)})),i)))}}const Ll="LocalStore",Cw=3e8;class Pw{constructor(e,t,r,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new Ne(de),this.xs=new Dr((i=>Cl(i)),Pl),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _w(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function kw(n,e,t,r){return new Pw(n,e,t,r)}async function bm(n,e){const t=ie(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((i=>{const a=[],c=[];let l=pe();for(const h of s){a.push(h.batchId);for(const d of h.mutations)l=l.add(d.key)}for(const h of i){c.push(h.batchId);for(const d of h.mutations)l=l.add(d.key)}return t.localDocuments.getDocuments(r,l).next((h=>({Ls:h,removedBatchIds:a,addedBatchIds:c})))}))}))}function Vw(n,e){const t=ie(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,l,h,d){const p=h.batch,g=p.keys();let S=V.resolve();return g.forEach((k=>{S=S.next((()=>d.getEntry(l,k))).next((L=>{const B=h.docVersions.get(k);Te(B!==null,48541),L.version.compareTo(B)<0&&(p.applyToRemoteDocument(L,h),L.isValidDocument()&&(L.setReadTime(h.commitVersion),d.addEntry(L)))}))})),S.next((()=>c.mutationQueue.removeMutationBatch(l,p)))})(t,r,e,i).next((()=>i.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let l=pe();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(l=l.add(c.batch.mutations[h].key));return l})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function Rm(n){const e=ie(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Dw(n,e){const t=ie(n),r=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const a=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const c=[];e.targetChanges.forEach(((d,p)=>{const g=s.get(p);if(!g)return;c.push(t.Pi.removeMatchingKeys(i,d.removedDocuments,p).next((()=>t.Pi.addMatchingKeys(i,d.addedDocuments,p))));let S=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?S=S.withResumeToken(tt.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):d.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(d.resumeToken,r)),s=s.insert(p,S),(function(L,B,H){return L.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=Cw?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(g,S,d)&&c.push(t.Pi.updateTargetData(i,S))}));let l=vn(),h=pe();if(e.documentUpdates.forEach((d=>{e.resolvedLimboDocuments.has(d)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(i,d))})),c.push(Nw(i,a,e.documentUpdates).next((d=>{l=d.ks,h=d.qs}))),!r.isEqual(se.min())){const d=t.Pi.getLastRemoteSnapshotVersion(i).next((p=>t.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r)));c.push(d)}return V.waitFor(c).next((()=>a.apply(i))).next((()=>t.localDocuments.getLocalViewOfDocuments(i,l,h))).next((()=>l))})).then((i=>(t.Ms=s,i)))}function Nw(n,e,t){let r=pe(),s=pe();return t.forEach((i=>r=r.add(i))),e.getEntries(n,r).next((i=>{let a=vn();return t.forEach(((c,l)=>{const h=i.get(c);l.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),l.isNoDocument()&&l.version.isEqual(se.min())?(e.removeEntry(c,l.readTime),a=a.insert(c,l)):!h.isValidDocument()||l.version.compareTo(h.version)>0||l.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(l),a=a.insert(c,l)):z(Ll,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",l.version)})),{ks:a,qs:s}}))}function Ow(n,e){const t=ie(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Sl),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Mw(n,e){const t=ie(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.Pi.getTargetData(r,e).next((i=>i?(s=i,V.resolve(s)):t.Pi.allocateTargetId(r).next((a=>(s=new Un(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Wc(n,e,t){const r=ie(n),s=r.Ms.get(e),i=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",i,(a=>r.persistence.referenceDelegate.removeTarget(a,s)))}catch(a){if(!As(a))throw a;z(Ll,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Tf(n,e,t){const r=ie(n);let s=se.min(),i=pe();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(l,h,d){const p=ie(l),g=p.xs.get(d);return g!==void 0?V.resolve(p.Ms.get(g)):p.Pi.getTargetData(h,d)})(r,a,Qt(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,c.targetId).next((l=>{i=l}))})).next((()=>r.Fs.getDocumentsMatchingQuery(a,e,t?s:se.min(),t?i:pe()))).next((c=>(xw(r,TI(e),c),{documents:c,Qs:i})))))}function xw(n,e,t){let r=n.Os.get(e)||se.min();t.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),n.Os.set(e,r)}class If{constructor(){this.activeTargetIds=RI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Lw{constructor(){this.Mo=new If,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new If,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Fw{Oo(e){}shutdown(){}}const wf="ConnectivityMonitor";class Af{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){z(wf,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){z(wf,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let co=null;function Kc(){return co===null?co=(function(){return 268435456+Math.round(2147483648*Math.random())})():co++,"0x"+co.toString(16)}const dc="RestConnection",Uw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Bw{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Fo?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,t,r,s,i){const a=Kc(),c=this.zo(e,t.toUriEncodedString());z(dc,`Sending RPC '${e}' ${a}:`,c,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:h}=new URL(c),d=vs(h);return this.Jo(e,c,l,r,d).then((p=>(z(dc,`Received RPC '${e}' ${a}: `,p),p)),(p=>{throw fs(dc,`RPC '${e}' ${a} failed with error: `,p,"url: ",c,"request:",r),p}))}Ho(e,t,r,s,i,a){return this.Go(e,t,r,s,i)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Is})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,i)=>e[i]=s)),r&&r.headers.forEach(((s,i)=>e[i]=s))}zo(e,t){const r=Uw[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class $w{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const st="WebChannelConnection";class jw extends Bw{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,s,i){const a=Kc();return new Promise(((c,l)=>{const h=new Pp;h.setWithCredentials(!0),h.listenOnce(kp.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case go.NO_ERROR:const p=h.getResponseJson();z(st,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(p)),c(p);break;case go.TIMEOUT:z(st,`RPC '${e}' ${a} timed out`),l(new G(N.DEADLINE_EXCEEDED,"Request time out"));break;case go.HTTP_ERROR:const g=h.getStatus();if(z(st,`RPC '${e}' ${a} failed with status:`,g,"response text:",h.getResponseText()),g>0){let S=h.getResponseJson();Array.isArray(S)&&(S=S[0]);const k=S?.error;if(k&&k.status&&k.message){const L=(function(H){const K=H.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(K)>=0?K:N.UNKNOWN})(k.status);l(new G(L,k.message))}else l(new G(N.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new G(N.UNAVAILABLE,"Connection failed."));break;default:te(9055,{l_:e,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{z(st,`RPC '${e}' ${a} completed.`)}}));const d=JSON.stringify(s);z(st,`RPC '${e}' ${a} sending request:`,s),h.send(t,"POST",d,r,15)}))}T_(e,t,r){const s=Kc(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Np(),c=Dp(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(l.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const d=i.join("");z(st,`Creating RPC '${e}' stream ${s}: ${d}`,l);const p=a.createWebChannel(d,l);this.I_(p);let g=!1,S=!1;const k=new $w({Yo:B=>{S?z(st,`Not sending because RPC '${e}' stream ${s} is closed:`,B):(g||(z(st,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),z(st,`RPC '${e}' stream ${s} sending:`,B),p.send(B))},Zo:()=>p.close()}),L=(B,H,K)=>{B.listen(H,(Q=>{try{K(Q)}catch(W){setTimeout((()=>{throw W}),0)}}))};return L(p,Ys.EventType.OPEN,(()=>{S||(z(st,`RPC '${e}' stream ${s} transport opened.`),k.o_())})),L(p,Ys.EventType.CLOSE,(()=>{S||(S=!0,z(st,`RPC '${e}' stream ${s} transport closed`),k.a_(),this.E_(p))})),L(p,Ys.EventType.ERROR,(B=>{S||(S=!0,fs(st,`RPC '${e}' stream ${s} transport errored. Name:`,B.name,"Message:",B.message),k.a_(new G(N.UNAVAILABLE,"The operation could not be completed")))})),L(p,Ys.EventType.MESSAGE,(B=>{if(!S){const H=B.data[0];Te(!!H,16349);const K=H,Q=K?.error||K[0]?.error;if(Q){z(st,`RPC '${e}' stream ${s} received error:`,Q);const W=Q.status;let ae=(function(E){const _=Fe[E];if(_!==void 0)return pm(_)})(W),ue=Q.message;ae===void 0&&(ae=N.INTERNAL,ue="Unknown error status: "+W+" with message "+Q.message),S=!0,k.a_(new G(ae,ue)),p.close()}else z(st,`RPC '${e}' stream ${s} received:`,H),k.u_(H)}})),L(c,Vp.STAT_EVENT,(B=>{B.stat===Mc.PROXY?z(st,`RPC '${e}' stream ${s} detected buffering proxy`):B.stat===Mc.NOPROXY&&z(st,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function pc(){return typeof document<"u"?document:null}function wa(n){return new WI(n,!0)}class Cm{constructor(e,t,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&z("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Sf="PersistentStream";class Pm{constructor(e,t,r,s,i,a,c,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Cm(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(En(t.toString()),En("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new G(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return z(Sf,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(z(Sf,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Hw extends Pm{constructor(e,t,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,a),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=QI(this.serializer,e),r=(function(i){if(!("targetChange"in i))return se.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?se.min():a.readTime?Yt(a.readTime):se.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=zc(this.serializer),t.addTarget=(function(i,a){let c;const l=a.target;if(c=Bc(l)?{documents:XI(i,l)}:{query:ZI(i,l).ft},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=_m(i,a.resumeToken);const h=jc(i,a.expectedCount);h!==null&&(c.expectedCount=h)}else if(a.snapshotVersion.compareTo(se.min())>0){c.readTime=qo(i,a.snapshotVersion.toTimestamp());const h=jc(i,a.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const r=tw(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=zc(this.serializer),t.removeTarget=e,this.q_(t)}}class qw extends Pm{constructor(e,t,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Te(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Te(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=YI(e.writeResults,e.commitTime),r=Yt(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=zc(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>JI(this.serializer,r)))};this.q_(t)}}class zw{}class Ww extends zw{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new G(N.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Go(e,Hc(t,r),s,i,a))).catch((i=>{throw i.name==="FirebaseError"?(i.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(N.UNKNOWN,i.toString())}))}Ho(e,t,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Ho(e,Hc(t,r),s,a,c,i))).catch((a=>{throw a.name==="FirebaseError"?(a.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new G(N.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Kw{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(En(t),this.aa=!1):z("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const br="RemoteStore";class Gw{constructor(e,t,r,s,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((a=>{r.enqueueAndForget((async()=>{Or(this)&&(z(br,"Restarting streams for network reachability change."),await(async function(l){const h=ie(l);h.Ea.add(4),await Fi(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Aa(h)})(this))}))})),this.Ra=new Kw(r,s)}}async function Aa(n){if(Or(n))for(const e of n.da)await e(!0)}async function Fi(n){for(const e of n.da)await e(!1)}function km(n,e){const t=ie(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),$l(t)?Bl(t):Ss(t).O_()&&Ul(t,e))}function Fl(n,e){const t=ie(n),r=Ss(t);t.Ia.delete(e),r.O_()&&Vm(t,e),t.Ia.size===0&&(r.O_()?r.L_():Or(t)&&t.Ra.set("Unknown"))}function Ul(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ss(n).Y_(e)}function Vm(n,e){n.Va.Ue(e),Ss(n).Z_(e)}function Bl(n){n.Va=new jI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ss(n).start(),n.Ra.ua()}function $l(n){return Or(n)&&!Ss(n).x_()&&n.Ia.size>0}function Or(n){return ie(n).Ea.size===0}function Dm(n){n.Va=void 0}async function Qw(n){n.Ra.set("Online")}async function Jw(n){n.Ia.forEach(((e,t)=>{Ul(n,e)}))}async function Yw(n,e){Dm(n),$l(n)?(n.Ra.ha(e),Bl(n)):n.Ra.set("Unknown")}async function Xw(n,e,t){if(n.Ra.set("Online"),e instanceof gm&&e.state===2&&e.cause)try{await(async function(s,i){const a=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s.Ia.delete(c),s.Va.removeTarget(c))})(n,e)}catch(r){z(br,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wo(n,r)}else if(e instanceof vo?n.Va.Ze(e):e instanceof mm?n.Va.st(e):n.Va.tt(e),!t.isEqual(se.min()))try{const r=await Rm(n.localStore);t.compareTo(r)>=0&&await(function(i,a){const c=i.Va.Tt(a);return c.targetChanges.forEach(((l,h)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.Ia.get(h);d&&i.Ia.set(h,d.withResumeToken(l.resumeToken,a))}})),c.targetMismatches.forEach(((l,h)=>{const d=i.Ia.get(l);if(!d)return;i.Ia.set(l,d.withResumeToken(tt.EMPTY_BYTE_STRING,d.snapshotVersion)),Vm(i,l);const p=new Un(d.target,l,h,d.sequenceNumber);Ul(i,p)})),i.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(r){z(br,"Failed to raise snapshot:",r),await Wo(n,r)}}async function Wo(n,e,t){if(!As(e))throw e;n.Ea.add(1),await Fi(n),n.Ra.set("Offline"),t||(t=()=>Rm(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{z(br,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Aa(n)}))}function Nm(n,e){return e().catch((t=>Wo(n,t,e)))}async function Sa(n){const e=ie(n),t=tr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Sl;for(;Zw(e);)try{const s=await Ow(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,eA(e,s)}catch(s){await Wo(e,s)}Om(e)&&Mm(e)}function Zw(n){return Or(n)&&n.Ta.length<10}function eA(n,e){n.Ta.push(e);const t=tr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Om(n){return Or(n)&&!tr(n).x_()&&n.Ta.length>0}function Mm(n){tr(n).start()}async function tA(n){tr(n).ra()}async function nA(n){const e=tr(n);for(const t of n.Ta)e.ea(t.mutations)}async function rA(n,e,t){const r=n.Ta.shift(),s=Vl.from(r,e,t);await Nm(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Sa(n)}async function sA(n,e){e&&tr(n).X_&&await(async function(r,s){if((function(a){return UI(a)&&a!==N.ABORTED})(s.code)){const i=r.Ta.shift();tr(r).B_(),await Nm(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await Sa(r)}})(n,e),Om(n)&&Mm(n)}async function bf(n,e){const t=ie(n);t.asyncQueue.verifyOperationInProgress(),z(br,"RemoteStore received new credentials");const r=Or(t);t.Ea.add(3),await Fi(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Aa(t)}async function iA(n,e){const t=ie(n);e?(t.Ea.delete(2),await Aa(t)):e||(t.Ea.add(2),await Fi(t),t.Ra.set("Unknown"))}function Ss(n){return n.ma||(n.ma=(function(t,r,s){const i=ie(t);return i.sa(),new Hw(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(n.datastore,n.asyncQueue,{Xo:Qw.bind(null,n),t_:Jw.bind(null,n),r_:Yw.bind(null,n),H_:Xw.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),$l(n)?Bl(n):n.Ra.set("Unknown")):(await n.ma.stop(),Dm(n))}))),n.ma}function tr(n){return n.fa||(n.fa=(function(t,r,s){const i=ie(t);return i.sa(),new qw(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:tA.bind(null,n),r_:sA.bind(null,n),ta:nA.bind(null,n),na:rA.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Sa(n)):(await n.fa.stop(),n.Ta.length>0&&(z(br,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class jl{constructor(e,t,r,s,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,i){const a=Date.now()+r,c=new jl(e,t,a,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hl(n,e){if(En("AsyncQueue",`${e}: ${n}`),As(n))return new G(N.UNAVAILABLE,`${e}: ${n}`);throw n}class ss{static emptySet(e){return new ss(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Y.comparator(t.key,r.key):(t,r)=>Y.comparator(t.key,r.key),this.keyedMap=Xs(),this.sortedSet=new Ne(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ss)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new ss;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Rf{constructor(){this.ga=new Ne(Y.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):te(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class ys{constructor(e,t,r,s,i,a,c,l,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,s,i){const a=[];return t.forEach((c=>{a.push({type:0,doc:c})})),new ys(e,t,ss.emptySet(t),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ya(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class oA{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class aA{constructor(){this.queries=Cf(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=ie(t),i=s.queries;s.queries=Cf(),i.forEach(((a,c)=>{for(const l of c.Sa)l.onError(r)}))})(this,new G(N.ABORTED,"Firestore shutting down"))}}function Cf(){return new Dr((n=>tm(n)),ya)}async function cA(n,e){const t=ie(n);let r=3;const s=e.query;let i=t.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new oA,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await t.onListen(s,!0);break;case 1:i.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(a){const c=Hl(a,`Initialization of query '${Wr(e.query)}' failed`);return void e.onError(c)}t.queries.set(s,i),i.Sa.push(e),e.va(t.onlineState),i.wa&&e.Fa(i.wa)&&ql(t)}async function lA(n,e){const t=ie(n),r=e.query;let s=3;const i=t.queries.get(r);if(i){const a=i.Sa.indexOf(e);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function uA(n,e){const t=ie(n);let r=!1;for(const s of e){const i=s.query,a=t.queries.get(i);if(a){for(const c of a.Sa)c.Fa(s)&&(r=!0);a.wa=s}}r&&ql(t)}function hA(n,e,t){const r=ie(n),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(t);r.queries.delete(e)}function ql(n){n.Ca.forEach((e=>{e.next()}))}var Gc,Pf;(Pf=Gc||(Gc={})).Ma="default",Pf.Cache="cache";class fA{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ys(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ys.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Gc.Cache}}class xm{constructor(e){this.key=e}}class Lm{constructor(e){this.key=e}}class dA{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=pe(),this.mutatedKeys=pe(),this.eu=nm(e),this.tu=new ss(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new Rf,s=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,a=s,c=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((d,p)=>{const g=s.get(d),S=Ea(this.query,p)?p:null,k=!!g&&this.mutatedKeys.has(g.key),L=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let B=!1;g&&S?g.data.isEqual(S.data)?k!==L&&(r.track({type:3,doc:S}),B=!0):this.su(g,S)||(r.track({type:2,doc:S}),B=!0,(l&&this.eu(S,l)>0||h&&this.eu(S,h)<0)&&(c=!0)):!g&&S?(r.track({type:0,doc:S}),B=!0):g&&!S&&(r.track({type:1,doc:g}),B=!0,(l||h)&&(c=!0)),B&&(S?(a=a.add(S),i=L?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:a,iu:r,Cs:c,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((d,p)=>(function(S,k){const L=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te(20277,{Rt:B})}};return L(S)-L(k)})(d.type,p.type)||this.eu(d.doc,p.doc))),this.ou(r),s=s??!1;const c=t&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,h=l!==this.Za;return this.Za=l,a.length!==0||h?{snapshot:new ys(this.query,e.tu,i,a,e.mutatedKeys,l===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Rf,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=pe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new Lm(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new xm(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=pe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ys.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const zl="SyncEngine";class pA{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class mA{constructor(e){this.key=e,this.hu=!1}}class gA{constructor(e,t,r,s,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Dr((c=>tm(c)),ya),this.Iu=new Map,this.Eu=new Set,this.du=new Ne(Y.comparator),this.Au=new Map,this.Ru=new Ol,this.Vu={},this.mu=new Map,this.fu=_s.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _A(n,e,t=!0){const r=Hm(n);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await Fm(r,e,t,!0),s}async function yA(n,e){const t=Hm(n);await Fm(t,e,!0,!1)}async function Fm(n,e,t,r){const s=await Mw(n.localStore,Qt(e)),i=s.targetId,a=n.sharedClientState.addLocalQueryTarget(i,t);let c;return r&&(c=await EA(n,e,i,a==="current",s.resumeToken)),n.isPrimaryClient&&t&&km(n.remoteStore,s),c}async function EA(n,e,t,r,s){n.pu=(p,g,S)=>(async function(L,B,H,K){let Q=B.view.ru(H);Q.Cs&&(Q=await Tf(L.localStore,B.query,!1).then((({documents:A})=>B.view.ru(A,Q))));const W=K&&K.targetChanges.get(B.targetId),ae=K&&K.targetMismatches.get(B.targetId)!=null,ue=B.view.applyChanges(Q,L.isPrimaryClient,W,ae);return Vf(L,B.targetId,ue.au),ue.snapshot})(n,p,g,S);const i=await Tf(n.localStore,e,!0),a=new dA(e,i.Qs),c=a.ru(i.documents),l=Li.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),h=a.applyChanges(c,n.isPrimaryClient,l);Vf(n,t,h.au);const d=new pA(e,t,a);return n.Tu.set(e,d),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function vA(n,e,t){const r=ie(n),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((a=>!ya(a,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Wc(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Fl(r.remoteStore,s.targetId),Qc(r,s.targetId)})).catch(ws)):(Qc(r,s.targetId),await Wc(r.localStore,s.targetId,!0))}async function TA(n,e){const t=ie(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Fl(t.remoteStore,r.targetId))}async function IA(n,e,t){const r=PA(n);try{const s=await(function(a,c){const l=ie(a),h=De.now(),d=c.reduce(((S,k)=>S.add(k.key)),pe());let p,g;return l.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let k=vn(),L=pe();return l.Ns.getEntries(S,d).next((B=>{k=B,k.forEach(((H,K)=>{K.isValidDocument()||(L=L.add(H))}))})).next((()=>l.localDocuments.getOverlayedDocuments(S,k))).next((B=>{p=B;const H=[];for(const K of c){const Q=OI(K,p.get(K.key).overlayedDocument);Q!=null&&H.push(new Nr(K.key,Q,Kp(Q.value.mapValue),Jt.exists(!0)))}return l.mutationQueue.addMutationBatch(S,h,H,c)})).next((B=>{g=B;const H=B.applyToLocalDocumentSet(p,L);return l.documentOverlayCache.saveOverlays(S,B.batchId,H)}))})).then((()=>({batchId:g.batchId,changes:sm(p)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(a,c,l){let h=a.Vu[a.currentUser.toKey()];h||(h=new Ne(de)),h=h.insert(c,l),a.Vu[a.currentUser.toKey()]=h})(r,s.batchId,t),await Ui(r,s.changes),await Sa(r.remoteStore)}catch(s){const i=Hl(s,"Failed to persist write");t.reject(i)}}async function Um(n,e){const t=ie(n);try{const r=await Dw(t.localStore,e);e.targetChanges.forEach(((s,i)=>{const a=t.Au.get(i);a&&(Te(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?Te(a.hu,14607):s.removedDocuments.size>0&&(Te(a.hu,42227),a.hu=!1))})),await Ui(t,r,e)}catch(r){await ws(r)}}function kf(n,e,t){const r=ie(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((i,a)=>{const c=a.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(a,c){const l=ie(a);l.onlineState=c;let h=!1;l.queries.forEach(((d,p)=>{for(const g of p.Sa)g.va(c)&&(h=!0)})),h&&ql(l)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function wA(n,e,t){const r=ie(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new Ne(Y.comparator);a=a.insert(i,at.newNoDocument(i,se.min()));const c=pe().add(i),l=new Ia(se.min(),new Map,new Ne(de),a,c);await Um(r,l),r.du=r.du.remove(i),r.Au.delete(e),Wl(r)}else await Wc(r.localStore,e,!1).then((()=>Qc(r,e,t))).catch(ws)}async function AA(n,e){const t=ie(n),r=e.batch.batchId;try{const s=await Vw(t.localStore,e);$m(t,r,null),Bm(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ui(t,s)}catch(s){await ws(s)}}async function SA(n,e,t){const r=ie(n);try{const s=await(function(a,c){const l=ie(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let d;return l.mutationQueue.lookupMutationBatch(h,c).next((p=>(Te(p!==null,37113),d=p.keys(),l.mutationQueue.removeMutationBatch(h,p)))).next((()=>l.mutationQueue.performConsistencyCheck(h))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(h,d,c))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d))).next((()=>l.localDocuments.getDocuments(h,d)))}))})(r.localStore,e);$m(r,e,t),Bm(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ui(r,s)}catch(s){await ws(s)}}function Bm(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function $m(n,e,t){const r=ie(n);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(t?i.reject(t):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Qc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||jm(n,r)}))}function jm(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Fl(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Wl(n))}function Vf(n,e,t){for(const r of t)r instanceof xm?(n.Ru.addReference(r.key,e),bA(n,r)):r instanceof Lm?(z(zl,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||jm(n,r.key)):te(19791,{wu:r})}function bA(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(z(zl,"New document in limbo: "+t),n.Eu.add(r),Wl(n))}function Wl(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Y(Ve.fromString(e)),r=n.fu.next();n.Au.set(r,new mA(t)),n.du=n.du.insert(t,r),km(n.remoteStore,new Un(Qt(em(t.path)),r,"TargetPurposeLimboResolution",pa.ce))}}async function Ui(n,e,t){const r=ie(n),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,l)=>{a.push(r.pu(l,e,t).then((h=>{if((h||t)&&r.isPrimaryClient){const d=h?!h.fromCache:t?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(h){s.push(h);const d=xl.As(l.targetId,h);i.push(d)}})))})),await Promise.all(a),r.Pu.H_(s),await(async function(l,h){const d=ie(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>V.forEach(h,(g=>V.forEach(g.Es,(S=>d.persistence.referenceDelegate.addReference(p,g.targetId,S))).next((()=>V.forEach(g.ds,(S=>d.persistence.referenceDelegate.removeReference(p,g.targetId,S)))))))))}catch(p){if(!As(p))throw p;z(Ll,"Failed to update sequence numbers: "+p)}for(const p of h){const g=p.targetId;if(!p.fromCache){const S=d.Ms.get(g),k=S.snapshotVersion,L=S.withLastLimboFreeSnapshotVersion(k);d.Ms=d.Ms.insert(g,L)}}})(r.localStore,i))}async function RA(n,e){const t=ie(n);if(!t.currentUser.isEqual(e)){z(zl,"User change. New user:",e.toKey());const r=await bm(t.localStore,e);t.currentUser=e,(function(i,a){i.mu.forEach((c=>{c.forEach((l=>{l.reject(new G(N.CANCELLED,a))}))})),i.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ui(t,r.Ls)}}function CA(n,e){const t=ie(n),r=t.Au.get(e);if(r&&r.hu)return pe().add(r.key);{let s=pe();const i=t.Iu.get(e);if(!i)return s;for(const a of i){const c=t.Tu.get(a);s=s.unionWith(c.view.nu)}return s}}function Hm(n){const e=ie(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Um.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=CA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wA.bind(null,e),e.Pu.H_=uA.bind(null,e.eventManager),e.Pu.yu=hA.bind(null,e.eventManager),e}function PA(n){const e=ie(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=SA.bind(null,e),e}class Ko{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=wa(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return kw(this.persistence,new Rw,e.initialUser,this.serializer)}Cu(e){return new Sm(Ml.mi,this.serializer)}Du(e){return new Lw}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ko.provider={build:()=>new Ko};class kA extends Ko{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Te(this.persistence.referenceDelegate instanceof zo,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new fw(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?gt.withCacheSize(this.cacheSizeBytes):gt.DEFAULT;return new Sm((r=>zo.mi(r,t)),this.serializer)}}class Jc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>kf(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=RA.bind(null,this.syncEngine),await iA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new aA})()}createDatastore(e){const t=wa(e.databaseInfo.databaseId),r=(function(i){return new jw(i)})(e.databaseInfo);return(function(i,a,c,l){return new Ww(i,a,c,l)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,i,a,c){return new Gw(r,s,i,a,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>kf(this.syncEngine,t,0)),(function(){return Af.v()?new Af:new Fw})())}createSyncEngine(e,t){return(function(s,i,a,c,l,h,d){const p=new gA(s,i,a,c,l,h);return d&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=ie(t);z(br,"RemoteStore shutting down."),r.Ea.add(5),await Fi(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Jc.provider={build:()=>new Jc};class VA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):En("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const nr="FirestoreClient";class DA{constructor(e,t,r,s,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=it.UNAUTHENTICATED,this.clientId=wl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async a=>{z(nr,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(z(nr,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Hl(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function mc(n,e){n.asyncQueue.verifyOperationInProgress(),z(nr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await bm(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Df(n,e){n.asyncQueue.verifyOperationInProgress();const t=await NA(n);z(nr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>bf(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>bf(e.remoteStore,s))),n._onlineComponents=e}async function NA(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){z(nr,"Using user provided OfflineComponentProvider");try{await mc(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===N.FAILED_PRECONDITION||s.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;fs("Error using user provided cache. Falling back to memory cache: "+t),await mc(n,new Ko)}}else z(nr,"Using default OfflineComponentProvider"),await mc(n,new kA(void 0));return n._offlineComponents}async function qm(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(z(nr,"Using user provided OnlineComponentProvider"),await Df(n,n._uninitializedComponentsProvider._online)):(z(nr,"Using default OnlineComponentProvider"),await Df(n,new Jc))),n._onlineComponents}function OA(n){return qm(n).then((e=>e.syncEngine))}async function MA(n){const e=await qm(n),t=e.eventManager;return t.onListen=_A.bind(null,e.syncEngine),t.onUnlisten=vA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=yA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=TA.bind(null,e.syncEngine),t}function xA(n,e,t={}){const r=new zn;return n.asyncQueue.enqueueAndForget((async()=>(function(i,a,c,l,h){const d=new VA({next:g=>{d.Nu(),a.enqueueAndForget((()=>lA(i,p))),g.fromCache&&l.source==="server"?h.reject(new G(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(g)},error:g=>h.reject(g)}),p=new fA(c,d,{includeMetadataChanges:!0,qa:!0});return cA(i,p)})(await MA(n),n.asyncQueue,e,t,r))),r.promise}function zm(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const Nf=new Map;const Wm="firestore.googleapis.com",Of=!0;class Mf{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new G(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Wm,this.ssl=Of}else this.host=e.host,this.ssl=e.ssl??Of;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Am;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<uw)throw new G(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zm(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new G(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new G(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new G(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ba{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new LT;switch(r.type){case"firstParty":return new $T(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Nf.get(t);r&&(z("ComponentProvider","Removing Datastore"),Nf.delete(t),r.terminate())})(this),Promise.resolve()}}function LA(n,e,t,r={}){n=ps(n,ba);const s=vs(e),i=n._getSettings(),a={...i,emulatorOptions:n._getEmulatorOptions()},c=`${e}:${t}`;s&&(vp(`https://${c}`),Tp("Firestore",!0)),i.host!==Wm&&i.host!==c&&fs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:c,ssl:s,emulatorOptions:r};if(!wr(l,a)&&(n._setSettings(l),r.mockUserToken)){let h,d;if(typeof r.mockUserToken=="string")h=r.mockUserToken,d=it.MOCK_USER;else{h=cv(r.mockUserToken,n._app?.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new G(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new it(p)}n._authCredentials=new FT(new Mp(h,d))}}class Ra{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ra(this.firestore,e,this._query)}}class Ke{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ke(this.firestore,e,this._key)}toJSON(){return{type:Ke._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Mi(t,Ke._jsonSchema))return new Ke(e,r||null,new Y(Ve.fromString(t.referencePath)))}}Ke._jsonSchemaVersion="firestore/documentReference/1.0",Ke._jsonSchema={type:Be("string",Ke._jsonSchemaVersion),referencePath:Be("string")};class Wn extends Ra{constructor(e,t,r){super(e,t,em(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ke(this.firestore,null,new Y(e))}withConverter(e){return new Wn(this.firestore,e,this._path)}}function Ir(n,e,...t){if(n=Dt(n),xp("collection","path",e),n instanceof ba){const r=Ve.fromString(e,...t);return Gh(r),new Wn(n,null,r)}{if(!(n instanceof Ke||n instanceof Wn))throw new G(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ve.fromString(e,...t));return Gh(r),new Wn(n.firestore,null,r)}}function Km(n,e,...t){if(n=Dt(n),arguments.length===1&&(e=wl.newId()),xp("doc","path",e),n instanceof ba){const r=Ve.fromString(e,...t);return Kh(r),new Ke(n,null,new Y(r))}{if(!(n instanceof Ke||n instanceof Wn))throw new G(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ve.fromString(e,...t));return Kh(r),new Ke(n.firestore,n instanceof Wn?n.converter:null,new Y(r))}}const xf="AsyncQueue";class Lf{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Cm(this,"async_queue_retry"),this._c=()=>{const r=pc();r&&z(xf,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=pc();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=pc();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new zn;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!As(e))throw e;z(xf,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,En("INTERNAL UNHANDLED ERROR: ",Ff(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=jl.createAndSchedule(this,e,t,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&te(47125,{Pc:Ff(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Ff(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Ca extends ba{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new Lf,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Lf(e),this._firestoreClient=void 0,await e}}}function FA(n,e){const t=typeof n=="object"?n:Sp(),r=typeof n=="string"?n:Fo,s=Tl(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=ov("firestore");i&&LA(s,...i)}return s}function Gm(n){if(n._terminated)throw new G(N.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||UA(n),n._firestoreClient}function UA(n){const e=n._freezeSettings(),t=(function(s,i,a,c){return new sI(s,i,a,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,zm(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new DA(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(n._componentsProvider))}class Ct{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ct(tt.fromBase64String(e))}catch(t){throw new G(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ct(tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ct._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Mi(e,Ct._jsonSchema))return Ct.fromBase64String(e.bytes)}}Ct._jsonSchemaVersion="firestore/bytes/1.0",Ct._jsonSchema={type:Be("string",Ct._jsonSchemaVersion),bytes:Be("string")};class Kl{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new G(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ze(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Qm{constructor(e){this._methodName=e}}class Xt{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new G(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new G(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Xt._jsonSchemaVersion}}static fromJSON(e){if(Mi(e,Xt._jsonSchema))return new Xt(e.latitude,e.longitude)}}Xt._jsonSchemaVersion="firestore/geoPoint/1.0",Xt._jsonSchema={type:Be("string",Xt._jsonSchemaVersion),latitude:Be("number"),longitude:Be("number")};class Zt{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Zt._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Mi(e,Zt._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Zt(e.vectorValues);throw new G(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zt._jsonSchemaVersion="firestore/vectorValue/1.0",Zt._jsonSchema={type:Be("string",Zt._jsonSchemaVersion),vectorValues:Be("object")};const BA=/^__.*__$/;class $A{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Nr(e,this.data,this.fieldMask,t,this.fieldTransforms):new xi(e,this.data,t,this.fieldTransforms)}}function Jm(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te(40011,{Ac:n})}}class Gl{constructor(e,t,r,s,i,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Gl({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Go(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Jm(this.Ac)&&BA.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class jA{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||wa(e)}Cc(e,t,r,s=!1){return new Gl({Ac:e,methodName:t,Dc:r,path:Ze.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ym(n){const e=n._freezeSettings(),t=wa(n._databaseId);return new jA(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Xm(n,e,t,r,s,i={}){const a=n.Cc(i.merge||i.mergeFields?2:0,e,t,s);ng("Data must be an object, but it was:",a,r);const c=eg(r,a);let l,h;if(i.merge)l=new Ot(a.fieldMask),h=a.fieldTransforms;else if(i.mergeFields){const d=[];for(const p of i.mergeFields){const g=HA(e,p,t);if(!a.contains(g))throw new G(N.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);zA(d,g)||d.push(g)}l=new Ot(d),h=a.fieldTransforms.filter((p=>l.covers(p.field)))}else l=null,h=a.fieldTransforms;return new $A(new Rt(c),l,h)}function Zm(n,e){if(tg(n=Dt(n)))return ng("Unsupported field value:",e,n),eg(n,e);if(n instanceof Qm)return(function(r,s){if(!Jm(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const i=[];let a=0;for(const c of r){let l=Zm(c,s.wc(a));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),a++}return{arrayValue:{values:i}}})(n,e)}return(function(r,s){if((r=Dt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return CI(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=De.fromDate(r);return{timestampValue:qo(s.serializer,i)}}if(r instanceof De){const i=new De(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:qo(s.serializer,i)}}if(r instanceof Xt)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ct)return{bytesValue:_m(s.serializer,r._byteString)};if(r instanceof Ke){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Nl(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Zt)return(function(a,c){return{mapValue:{fields:{[zp]:{stringValue:Wp},[Uo]:{arrayValue:{values:a.toArray().map((h=>{if(typeof h!="number")throw c.Sc("VectorValues must only contain numeric values.");return kl(c.serializer,h)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${Al(r)}`)})(n,e)}function eg(n,e){const t={};return Up(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vr(n,((r,s)=>{const i=Zm(s,e.mc(r));i!=null&&(t[r]=i)})),{mapValue:{fields:t}}}function tg(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof De||n instanceof Xt||n instanceof Ct||n instanceof Ke||n instanceof Qm||n instanceof Zt)}function ng(n,e,t){if(!tg(t)||!Lp(t)){const r=Al(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function HA(n,e,t){if((e=Dt(e))instanceof Kl)return e._internalPath;if(typeof e=="string")return rg(n,e);throw Go("Field path arguments must be of type string or ",n,!1,void 0,t)}const qA=new RegExp("[~\\*/\\[\\]]");function rg(n,e,t){if(e.search(qA)>=0)throw Go(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Kl(...e.split("."))._internalPath}catch{throw Go(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Go(n,e,t,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=` in field ${r}`),a&&(l+=` in document ${s}`),l+=")"),new G(N.INVALID_ARGUMENT,c+n+l)}function zA(n,e){return n.some((t=>t.isEqual(e)))}class sg{constructor(e,t,r,s,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ke(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new WA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ig("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class WA extends sg{data(){return super.data()}}function ig(n,e){return typeof e=="string"?rg(n,e):e instanceof Kl?e._internalPath:e._delegate._internalPath}function KA(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new G(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class GA{convertValue(e,t="none"){switch(er(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Me(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Zn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Vr(e,((s,i)=>{r[s]=this.convertValue(i,t)})),r}convertVectorValue(e){const t=e.fields?.[Uo].arrayValue?.values?.map((r=>Me(r.doubleValue)));return new Zt(t)}convertGeoPoint(e){return new Xt(Me(e.latitude),Me(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ga(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ai(e));default:return null}}convertTimestamp(e){const t=Xn(e);return new De(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ve.fromString(e);Te(wm(r),9688,{name:e});const s=new Si(r.get(1),r.get(3)),i=new Y(r.popFirst(5));return s.isEqual(t)||En(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function og(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class lo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class is extends sg{constructor(e,t,r,s,i,a){super(e,t,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new To(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ig("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new G(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=is._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}is._jsonSchemaVersion="firestore/documentSnapshot/1.0",is._jsonSchema={type:Be("string",is._jsonSchemaVersion),bundleSource:Be("string","DocumentSnapshot"),bundleName:Be("string"),bundle:Be("string")};class To extends is{data(e={}){return super.data(e)}}class os{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new lo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new To(this._firestore,this._userDataWriter,r.key,r,new lo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new G(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map((c=>{const l=new To(s._firestore,s._userDataWriter,c.doc.key,c.doc,new lo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}}))}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>i||c.type!==3)).map((c=>{const l=new To(s._firestore,s._userDataWriter,c.doc.key,c.doc,new lo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,d=-1;return c.type!==0&&(h=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),d=a.indexOf(c.doc.key)),{type:QA(c.type),doc:l,oldIndex:h,newIndex:d}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new G(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=os._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=wl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(t.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function QA(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te(61501,{type:n})}}os._jsonSchemaVersion="firestore/querySnapshot/1.0",os._jsonSchema={type:Be("string",os._jsonSchemaVersion),bundleSource:Be("string","QuerySnapshot"),bundleName:Be("string"),bundle:Be("string")};class JA extends GA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ct(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ke(this.firestore,null,t)}}function as(n){n=ps(n,Ra);const e=ps(n.firestore,Ca),t=Gm(e),r=new JA(e);return KA(n._query),xA(t,n._query).then((s=>new os(e,r,n,s)))}function YA(n,e,t){n=ps(n,Ke);const r=ps(n.firestore,Ca),s=og(n.converter,e);return ag(r,[Xm(Ym(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Jt.none())])}function XA(n,e){const t=ps(n.firestore,Ca),r=Km(n),s=og(n.converter,e);return ag(t,[Xm(Ym(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,Jt.exists(!1))]).then((()=>r))}function ag(n,e){return(function(r,s){const i=new zn;return r.asyncQueue.enqueueAndForget((async()=>IA(await OA(r),s,i))),i.promise})(Gm(n),e)}(function(e,t=!0){(function(s){Is=s})(Ts),hs(new Ar("firestore",((r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),c=new Ca(new UT(r.getProvider("auth-internal")),new jT(a,r.getProvider("app-check-internal")),(function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new G(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Si(h.options.projectId,d)})(a,s),a);return i={useFetchStreams:t,...i},c._setSettings(i),c}),"PUBLIC").setMultipleInstances(!0)),Hn(Hh,qh,e),Hn(Hh,qh,"esm2020")})();function cg(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ZA=cg,lg=new Ni("auth","Firebase",cg());const Qo=new El("@firebase/auth");function eS(n,...e){Qo.logLevel<=fe.WARN&&Qo.warn(`Auth (${Ts}): ${n}`,...e)}function Io(n,...e){Qo.logLevel<=fe.ERROR&&Qo.error(`Auth (${Ts}): ${n}`,...e)}function Ft(n,...e){throw Ql(n,...e)}function en(n,...e){return Ql(n,...e)}function ug(n,e,t){const r={...ZA(),[e]:t};return new Ni("auth","Firebase",r).create(e,{appName:n.name})}function mn(n){return ug(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ql(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return lg.create(n,...e)}function ee(n,e,...t){if(!n)throw Ql(e,...t)}function dn(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Io(e),new Error(e)}function Tn(n,e){n||dn(e)}function Yc(){return typeof self<"u"&&self.location?.href||""}function tS(){return Uf()==="http:"||Uf()==="https:"}function Uf(){return typeof self<"u"&&self.location?.protocol||null}function nS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tS()||pv()||"connection"in navigator)?navigator.onLine:!0}function rS(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class Bi{constructor(e,t){this.shortDelay=e,this.longDelay=t,Tn(t>e,"Short delay should be less than long delay!"),this.isMobile=hv()||mv()}get(){return nS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Jl(n,e){Tn(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class hg{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;dn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;dn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;dn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const sS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const iS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oS=new Bi(3e4,6e4);function sr(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function ir(n,e,t,r,s={}){return fg(n,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const c=Oi({key:n.config.apiKey,...a}).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:l,...i};return dv()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&vs(n.emulatorConfig.host)&&(h.credentials="include"),hg.fetch()(await dg(n,n.config.apiHost,t,c),h)})}async function fg(n,e,t){n._canInitEmulator=!1;const r={...sS,...e};try{const s=new cS(n),i=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw uo(n,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const c=i.ok?a.errorMessage:a.error.message,[l,h]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw uo(n,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw uo(n,"email-already-in-use",a);if(l==="USER_DISABLED")throw uo(n,"user-disabled",a);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw ug(n,d,h);Ft(n,d)}}catch(s){if(s instanceof wn)throw s;Ft(n,"network-request-failed",{message:String(s)})}}async function $i(n,e,t,r,s={}){const i=await ir(n,e,t,r,s);return"mfaPendingCredential"in i&&Ft(n,"multi-factor-auth-required",{_serverResponse:i}),i}async function dg(n,e,t,r){const s=`${e}${t}?${r}`,i=n,a=i.config.emulator?Jl(n.config,s):`${n.config.apiScheme}://${s}`;return iS.includes(t)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function aS(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(en(this.auth,"network-request-failed")),oS.get())})}}function uo(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=en(n,e,r);return s.customData._tokenResponse=t,s}function Bf(n){return n!==void 0&&n.enterprise!==void 0}class lS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return aS(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function uS(n,e){return ir(n,"GET","/v2/recaptchaConfig",sr(n,e))}async function hS(n,e){return ir(n,"POST","/v1/accounts:delete",e)}async function Jo(n,e){return ir(n,"POST","/v1/accounts:lookup",e)}function di(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fS(n,e=!1){const t=Dt(n),r=await t.getIdToken(e),s=Yl(r);ee(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i?.sign_in_provider;return{claims:s,token:r,authTime:di(gc(s.auth_time)),issuedAtTime:di(gc(s.iat)),expirationTime:di(gc(s.exp)),signInProvider:a||null,signInSecondFactor:i?.sign_in_second_factor||null}}function gc(n){return Number(n)*1e3}function Yl(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Io("JWT malformed, contained fewer than 3 sections"),null;try{const s=gp(t);return s?JSON.parse(s):(Io("Failed to decode base64 JWT payload"),null)}catch(s){return Io("Caught error parsing JWT payload as JSON",s?.toString()),null}}function $f(n){const e=Yl(n);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Pi(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof wn&&dS(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function dS({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class pS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Xc{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=di(this.lastLoginAt),this.creationTime=di(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Yo(n){const e=n.auth,t=await n.getIdToken(),r=await Pi(n,Jo(e,{idToken:t}));ee(r?.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const i=s.providerUserInfo?.length?pg(s.providerUserInfo):[],a=gS(n.providerData,i),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,h=c?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Xc(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,d)}async function mS(n){const e=Dt(n);await Yo(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gS(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function pg(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function _S(n,e){const t=await fg(n,{},async()=>{const r=Oi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=n.config,a=await dg(n,s,"/v1/token",`key=${i}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:c,body:r};return n.emulatorConfig&&vs(n.emulatorConfig.host)&&(l.credentials="include"),hg.fetch()(a,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function yS(n,e){return ir(n,"POST","/v2/accounts:revokeToken",sr(n,e))}class cs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$f(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ee(e.length!==0,"internal-error");const t=$f(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:i}=await _S(e,t);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:i}=t,a=new cs;return r&&(ee(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(ee(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(ee(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new cs,this.toJSON())}_performRefresh(){return dn("not implemented")}}function Dn(n,e){ee(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Mt{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new pS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Xc(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Pi(this,this.stsTokenManager.getToken(this.auth,e));return ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return fS(this,e)}reload(){return mS(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Mt({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Yo(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bt(this.auth.app))return Promise.reject(mn(this.auth));const e=await this.getIdToken();return await Pi(this,hS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,i=t.phoneNumber??void 0,a=t.photoURL??void 0,c=t.tenantId??void 0,l=t._redirectEventId??void 0,h=t.createdAt??void 0,d=t.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:S,providerData:k,stsTokenManager:L}=t;ee(p&&L,e,"internal-error");const B=cs.fromJSON(this.name,L);ee(typeof p=="string",e,"internal-error"),Dn(r,e.name),Dn(s,e.name),ee(typeof g=="boolean",e,"internal-error"),ee(typeof S=="boolean",e,"internal-error"),Dn(i,e.name),Dn(a,e.name),Dn(c,e.name),Dn(l,e.name),Dn(h,e.name),Dn(d,e.name);const H=new Mt({uid:p,auth:e,email:s,emailVerified:g,displayName:r,isAnonymous:S,photoURL:a,phoneNumber:i,tenantId:c,stsTokenManager:B,createdAt:h,lastLoginAt:d});return k&&Array.isArray(k)&&(H.providerData=k.map(K=>({...K}))),l&&(H._redirectEventId=l),H}static async _fromIdTokenResponse(e,t,r=!1){const s=new cs;s.updateFromServerResponse(t);const i=new Mt({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Yo(i),i}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];ee(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?pg(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!i?.length,c=new cs;c.updateFromIdToken(r);const l=new Mt({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:a}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Xc(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(l,h),l}}const jf=new Map;function pn(n){Tn(n instanceof Function,"Expected a class definition");let e=jf.get(n);return e?(Tn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,jf.set(n,e),e)}class mg{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}mg.type="NONE";const Hf=mg;function wo(n,e,t){return`firebase:${n}:${e}:${t}`}class ls{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=wo(this.userKey,s.apiKey,i),this.fullPersistenceKey=wo("persistence",s.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Jo(this.auth,{idToken:e}).catch(()=>{});return t?Mt._fromGetAccountInfoResponse(this.auth,t,e):null}return Mt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ls(pn(Hf),e,r);const s=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||pn(Hf);const a=wo(r,e.config.apiKey,e.name);let c=null;for(const h of t)try{const d=await h._get(a);if(d){let p;if(typeof d=="string"){const g=await Jo(e,{idToken:d}).catch(()=>{});if(!g)break;p=await Mt._fromGetAccountInfoResponse(e,g,d)}else p=Mt._fromJSON(e,d);h!==i&&(c=p),i=h;break}}catch{}const l=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new ls(i,e,r):(i=l[0],c&&await i._set(a,c.toJSON()),await Promise.all(t.map(async h=>{if(h!==i)try{await h._remove(a)}catch{}})),new ls(i,e,r))}}function qf(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Eg(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gg(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Tg(e))return"Blackberry";if(Ig(e))return"Webos";if(_g(e))return"Safari";if((e.includes("chrome/")||yg(e))&&!e.includes("edge/"))return"Chrome";if(vg(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function gg(n=lt()){return/firefox\//i.test(n)}function _g(n=lt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yg(n=lt()){return/crios\//i.test(n)}function Eg(n=lt()){return/iemobile/i.test(n)}function vg(n=lt()){return/android/i.test(n)}function Tg(n=lt()){return/blackberry/i.test(n)}function Ig(n=lt()){return/webos/i.test(n)}function Xl(n=lt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function ES(n=lt()){return Xl(n)&&!!window.navigator?.standalone}function vS(){return gv()&&document.documentMode===10}function wg(n=lt()){return Xl(n)||vg(n)||Ig(n)||Tg(n)||/windows phone/i.test(n)||Eg(n)}function Ag(n,e=[]){let t;switch(n){case"Browser":t=qf(lt());break;case"Worker":t=`${qf(lt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ts}/${r}`}class TS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=i=>new Promise((a,c)=>{try{const l=e(i);a(l)}catch(l){c(l)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function IS(n,e={}){return ir(n,"GET","/v2/passwordPolicy",sr(n,e))}const wS=6;class AS{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??wS,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class SS{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zf(this),this.idTokenSubscription=new zf(this),this.beforeStateQueue=new TS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lg,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=pn(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ls.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Jo(this,{idToken:e}),r=await Mt._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(bt(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,a=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!i||i===a)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Yo(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(bt(this.app))return Promise.reject(mn(this));const t=e?Dt(e):null;return t&&ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return bt(this.app)?Promise.reject(mn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return bt(this.app)?Promise.reject(mn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await IS(this),t=new AS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ni("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await yS(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&pn(e)||this._popupRedirectResolver;ee(t,this,"argument-error"),this.redirectPersistenceManager=await ls.create(this,[pn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(c,this,"internal-error"),c.then(()=>{a||i(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,s);return()=>{a=!0,l()}}else{const l=e.addObserver(t);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ag(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(bt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&eS(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Mr(n){return Dt(n)}class zf{constructor(e){this.auth=e,this.observer=null,this.addObserver=Av(t=>this.observer=t)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Pa={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bS(n){Pa=n}function Sg(n){return Pa.loadJS(n)}function RS(){return Pa.recaptchaEnterpriseScript}function CS(){return Pa.gapiScript}function PS(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class kS{constructor(){this.enterprise=new VS}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class VS{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const DS="recaptcha-enterprise",bg="NO_RECAPTCHA";class NS{constructor(e){this.type=DS,this.auth=Mr(e)}async verify(e="verify",t=!1){async function r(i){if(!t){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,c)=>{uS(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new lS(l);return i.tenantId==null?i._agentRecaptchaConfig=h:i._tenantRecaptchaConfigs[i.tenantId]=h,a(h.siteKey)}}).catch(l=>{c(l)})})}function s(i,a,c){const l=window.grecaptcha;Bf(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(h=>{a(h)}).catch(()=>{a(bg)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new kS().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{r(this.auth).then(c=>{if(!t&&Bf(window.grecaptcha))s(c,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=RS();l.length!==0&&(l+=c),Sg(l).then(()=>{s(c,i,a)}).catch(h=>{a(h)})}}).catch(c=>{a(c)})})}}async function Wf(n,e,t,r=!1,s=!1){const i=new NS(n);let a;if(s)a=bg;else try{a=await i.verify(t)}catch{a=await i.verify(t,!0)}const c={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const l=c.phoneEnrollmentInfo.phoneNumber,h=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const l=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:a}):Object.assign(c,{captchaResponse:a}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Zc(n,e,t,r,s){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Wf(n,e,t,t==="getOobCode");return r(n,i)}else return r(n,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Wf(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(i)})}function OS(n,e){const t=Tl(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),i=t.getOptions();if(wr(i,e??{}))return s;Ft(s,"already-initialized")}return t.initialize({options:e})}function MS(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(pn);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function xS(n,e,t){const r=Mr(n);ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Rg(e),{host:a,port:c}=LS(e),l=c===null?"":`:${c}`,h={url:`${i}//${a}${l}/`},d=Object.freeze({host:a,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ee(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ee(wr(h,r.config.emulator)&&wr(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,vs(a)?(vp(`${i}//${a}${l}`),Tp("Auth",!0)):FS()}function Rg(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function LS(n){const e=Rg(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Kf(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:Kf(a)}}}function Kf(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function FS(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class Zl{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return dn("not implemented")}_getIdTokenResponse(e){return dn("not implemented")}_linkToIdToken(e,t){return dn("not implemented")}_getReauthenticationResolver(e){return dn("not implemented")}}async function US(n,e){return ir(n,"POST","/v1/accounts:signUp",e)}async function BS(n,e){return $i(n,"POST","/v1/accounts:signInWithPassword",sr(n,e))}async function $S(n,e){return $i(n,"POST","/v1/accounts:signInWithEmailLink",sr(n,e))}async function jS(n,e){return $i(n,"POST","/v1/accounts:signInWithEmailLink",sr(n,e))}class ki extends Zl{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new ki(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new ki(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zc(e,t,"signInWithPassword",BS);case"emailLink":return $S(e,{email:this._email,oobCode:this._password});default:Ft(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zc(e,r,"signUpPassword",US);case"emailLink":return jS(e,{idToken:t,email:this._email,oobCode:this._password});default:Ft(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function us(n,e){return $i(n,"POST","/v1/accounts:signInWithIdp",sr(n,e))}const HS="http://localhost";class Rr extends Zl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Rr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ft("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=t;if(!r||!s)return null;const a=new Rr(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return us(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,us(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,us(e,t)}buildRequest(){const e={requestUri:HS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Oi(t)}return e}}function qS(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function zS(n){const e=Qs(Js(n)).link,t=e?Qs(Js(e)).deep_link_id:null,r=Qs(Js(n)).deep_link_id;return(r?Qs(Js(r)).link:null)||r||t||e||n}class eu{constructor(e){const t=Qs(Js(e)),r=t.apiKey??null,s=t.oobCode??null,i=qS(t.mode??null);ee(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=zS(e);try{return new eu(t)}catch{return null}}}class bs{constructor(){this.providerId=bs.PROVIDER_ID}static credential(e,t){return ki._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=eu.parseLink(t);return ee(r,"argument-error"),ki._fromEmailAndCode(e,r.code,r.tenantId)}}bs.PROVIDER_ID="password";bs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";bs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Cg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ji extends Cg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Mn extends ji{constructor(){super("facebook.com")}static credential(e){return Rr._fromParams({providerId:Mn.PROVIDER_ID,signInMethod:Mn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mn.credentialFromTaggedObject(e)}static credentialFromError(e){return Mn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mn.credential(e.oauthAccessToken)}catch{return null}}}Mn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Mn.PROVIDER_ID="facebook.com";class xn extends ji{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Rr._fromParams({providerId:xn.PROVIDER_ID,signInMethod:xn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return xn.credentialFromTaggedObject(e)}static credentialFromError(e){return xn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return xn.credential(t,r)}catch{return null}}}xn.GOOGLE_SIGN_IN_METHOD="google.com";xn.PROVIDER_ID="google.com";class Ln extends ji{constructor(){super("github.com")}static credential(e){return Rr._fromParams({providerId:Ln.PROVIDER_ID,signInMethod:Ln.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ln.credentialFromTaggedObject(e)}static credentialFromError(e){return Ln.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ln.credential(e.oauthAccessToken)}catch{return null}}}Ln.GITHUB_SIGN_IN_METHOD="github.com";Ln.PROVIDER_ID="github.com";class Fn extends ji{constructor(){super("twitter.com")}static credential(e,t){return Rr._fromParams({providerId:Fn.PROVIDER_ID,signInMethod:Fn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Fn.credentialFromTaggedObject(e)}static credentialFromError(e){return Fn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Fn.credential(t,r)}catch{return null}}}Fn.TWITTER_SIGN_IN_METHOD="twitter.com";Fn.PROVIDER_ID="twitter.com";async function WS(n,e){return $i(n,"POST","/v1/accounts:signUp",sr(n,e))}class Cr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const i=await Mt._fromIdTokenResponse(e,r,s),a=Gf(r);return new Cr({user:i,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=Gf(r);return new Cr({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function Gf(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Xo extends wn{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Xo.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Xo(e,t,r,s)}}function Pg(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Xo._fromErrorAndOperation(n,i,e,r):i})}async function KS(n,e,t=!1){const r=await Pi(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Cr._forOperation(n,"link",r)}async function GS(n,e,t=!1){const{auth:r}=n;if(bt(r.app))return Promise.reject(mn(r));const s="reauthenticate";try{const i=await Pi(n,Pg(r,s,e,n),t);ee(i.idToken,r,"internal-error");const a=Yl(i.idToken);ee(a,r,"internal-error");const{sub:c}=a;return ee(n.uid===c,r,"user-mismatch"),Cr._forOperation(n,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&Ft(r,"user-mismatch"),i}}async function kg(n,e,t=!1){if(bt(n.app))return Promise.reject(mn(n));const r="signIn",s=await Pg(n,r,e),i=await Cr._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(i.user),i}async function QS(n,e){return kg(Mr(n),e)}async function Vg(n){const e=Mr(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function JS(n,e,t){if(bt(n.app))return Promise.reject(mn(n));const r=Mr(n),a=await Zc(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",WS).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Vg(n),l}),c=await Cr._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function YS(n,e,t){return bt(n.app)?Promise.reject(mn(n)):QS(Dt(n),bs.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Vg(n),r})}function XS(n,e,t,r){return Dt(n).onIdTokenChanged(e,t,r)}function ZS(n,e,t){return Dt(n).beforeAuthStateChanged(e,t)}const Zo="__sak";class Dg{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Zo,"1"),this.storage.removeItem(Zo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const eb=1e3,tb=10;class Ng extends Dg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wg(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);vS()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,tb):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},eb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ng.type="LOCAL";const nb=Ng;class Og extends Dg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Og.type="SESSION";const Mg=Og;function rb(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class ka{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new ka(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:i}=t.data,a=this.handlersMap[s];if(!a?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(a).map(async h=>h(t.origin,i)),l=await rb(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ka.receivers=[];function tu(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class sb{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((c,l)=>{const h=tu("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===h)switch(g.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function tn(){return window}function ib(n){tn().location.href=n}function xg(){return typeof tn().WorkerGlobalScope<"u"&&typeof tn().importScripts=="function"}async function ob(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ab(){return navigator?.serviceWorker?.controller||null}function cb(){return xg()?self:null}const Lg="firebaseLocalStorageDb",lb=1,ea="firebaseLocalStorage",Fg="fbase_key";class Hi{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Va(n,e){return n.transaction([ea],e?"readwrite":"readonly").objectStore(ea)}function ub(){const n=indexedDB.deleteDatabase(Lg);return new Hi(n).toPromise()}function el(){const n=indexedDB.open(Lg,lb);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(ea,{keyPath:Fg})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(ea)?e(r):(r.close(),await ub(),e(await el()))})})}async function Qf(n,e,t){const r=Va(n,!0).put({[Fg]:e,value:t});return new Hi(r).toPromise()}async function hb(n,e){const t=Va(n,!1).get(e),r=await new Hi(t).toPromise();return r===void 0?null:r.value}function Jf(n,e){const t=Va(n,!0).delete(e);return new Hi(t).toPromise()}const fb=800,db=3;class Ug{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await el(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>db)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ka._getInstance(cb()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await ob(),!this.activeServiceWorker)return;this.sender=new sb(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ab()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await el();return await Qf(e,Zo,"1"),await Jf(e,Zo),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Qf(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>hb(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Jf(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Va(s,!1).getAll();return new Hi(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),fb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ug.type="LOCAL";const pb=Ug;new Bi(3e4,6e4);function mb(n,e){return e?pn(e):(ee(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class nu extends Zl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return us(e,this._buildIdpRequest())}_linkToIdToken(e,t){return us(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return us(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function gb(n){return kg(n.auth,new nu(n),n.bypassAuthState)}function _b(n){const{auth:e,user:t}=n;return ee(t,e,"internal-error"),GS(t,new nu(n),n.bypassAuthState)}async function yb(n){const{auth:e,user:t}=n;return ee(t,e,"internal-error"),KS(t,new nu(n),n.bypassAuthState)}class Bg{constructor(e,t,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:i,error:a,type:c}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(l))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gb;case"linkViaPopup":case"linkViaRedirect":return yb;case"reauthViaPopup":case"reauthViaRedirect":return _b;default:Ft(this.auth,"internal-error")}}resolve(e){Tn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Tn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Eb=new Bi(2e3,1e4);class Jr extends Bg{constructor(e,t,r,s,i){super(e,t,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Jr.currentPopupAction&&Jr.currentPopupAction.cancel(),Jr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ee(e,this.auth,"internal-error"),e}async onExecution(){Tn(this.filter.length===1,"Popup operations only handle one event");const e=tu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(en(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(en(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Jr.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(en(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Eb.get())};e()}}Jr.currentPopupAction=null;const vb="pendingRedirect",Ao=new Map;class Tb extends Bg{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Ao.get(this.auth._key());if(!e){try{const r=await Ib(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Ao.set(this.auth._key(),e)}return this.bypassAuthState||Ao.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ib(n,e){const t=Sb(e),r=Ab(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function wb(n,e){Ao.set(n._key(),e)}function Ab(n){return pn(n._redirectPersistence)}function Sb(n){return wo(vb,n.config.apiKey,n.name)}async function bb(n,e,t=!1){if(bt(n.app))return Promise.reject(mn(n));const r=Mr(n),s=mb(r,e),a=await new Tb(r,s,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}const Rb=600*1e3;class Cb{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Pb(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!$g(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(en(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Rb&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yf(e))}saveEventToCache(e){this.cachedEventUids.add(Yf(e)),this.lastProcessedEventTime=Date.now()}}function Yf(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function $g({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Pb(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $g(n);default:return!1}}async function kb(n,e={}){return ir(n,"GET","/v1/projects",e)}const Vb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Db=/^https?/;async function Nb(n){if(n.config.emulator)return;const{authorizedDomains:e}=await kb(n);for(const t of e)try{if(Ob(t))return}catch{}Ft(n,"unauthorized-domain")}function Ob(n){const e=Yc(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!Db.test(t))return!1;if(Vb.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const Mb=new Bi(3e4,6e4);function Xf(){const n=tn().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function xb(n){return new Promise((e,t)=>{function r(){Xf(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Xf(),t(en(n,"network-request-failed"))},timeout:Mb.get()})}if(tn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(tn().gapi?.load)r();else{const s=PS("iframefcb");return tn()[s]=()=>{gapi.load?r():t(en(n,"network-request-failed"))},Sg(`${CS()}?onload=${s}`).catch(i=>t(i))}}).catch(e=>{throw So=null,e})}let So=null;function Lb(n){return So=So||xb(n),So}const Fb=new Bi(5e3,15e3),Ub="__/auth/iframe",Bb="emulator/auth/iframe",$b={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Hb(n){const e=n.config;ee(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Jl(e,Bb):`https://${n.config.authDomain}/${Ub}`,r={apiKey:e.apiKey,appName:n.name,v:Ts},s=jb.get(n.config.apiHost);s&&(r.eid=s);const i=n._getFrameworks();return i.length&&(r.fw=i.join(",")),`${t}?${Oi(r).slice(1)}`}async function qb(n){const e=await Lb(n),t=tn().gapi;return ee(t,n,"internal-error"),e.open({where:document.body,url:Hb(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$b,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=en(n,"network-request-failed"),c=tn().setTimeout(()=>{i(a)},Fb.get());function l(){tn().clearTimeout(c),s(r)}r.ping(l).then(l,()=>{i(a)})}))}const zb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Wb=500,Kb=600,Gb="_blank",Qb="http://localhost";class Zf{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Jb(n,e,t,r=Wb,s=Kb){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const l={...zb,width:r.toString(),height:s.toString(),top:i,left:a},h=lt().toLowerCase();t&&(c=yg(h)?Gb:t),gg(h)&&(e=e||Qb,l.scrollbars="yes");const d=Object.entries(l).reduce((g,[S,k])=>`${g}${S}=${k},`,"");if(ES(h)&&c!=="_self")return Yb(e||"",c),new Zf(null);const p=window.open(e||"",c,d);ee(p,n,"popup-blocked");try{p.focus()}catch{}return new Zf(p)}function Yb(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const Xb="__/auth/handler",Zb="emulator/auth/handler",eR=encodeURIComponent("fac");async function ed(n,e,t,r,s,i){ee(n.config.authDomain,n,"auth-domain-config-required"),ee(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ts,eventId:s};if(e instanceof Cg){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",wv(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))a[d]=p}if(e instanceof ji){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(a.scopes=d.join(","))}n.tenantId&&(a.tid=n.tenantId);const c=a;for(const d of Object.keys(c))c[d]===void 0&&delete c[d];const l=await n._getAppCheckToken(),h=l?`#${eR}=${encodeURIComponent(l)}`:"";return`${tR(n)}?${Oi(c).slice(1)}${h}`}function tR({config:n}){return n.emulator?Jl(n,Zb):`https://${n.authDomain}/${Xb}`}const _c="webStorageSupport";class nR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Mg,this._completeRedirectFn=bb,this._overrideRedirectResult=wb}async _openPopup(e,t,r,s){Tn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await ed(e,t,r,Yc(),s);return Jb(e,i,tu())}async _openRedirect(e,t,r,s){await this._originValidation(e);const i=await ed(e,t,r,Yc(),s);return ib(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:i}=this.eventManagers[t];return s?Promise.resolve(s):(Tn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await qb(e),r=new Cb(e);return t.register("authEvent",s=>(ee(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(_c,{type:_c},s=>{const i=s?.[0]?.[_c];i!==void 0&&t(!!i),Ft(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Nb(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return wg()||_g()||Xl()}}const rR=nR;var td="@firebase/auth",nd="1.11.1";class sR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function iR(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oR(n){hs(new Ar("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;ee(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ag(n)},h=new SS(r,s,i,l);return MS(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),hs(new Ar("auth-internal",e=>{const t=Mr(e.getProvider("auth").getImmediate());return(r=>new sR(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hn(td,nd,iR(n)),Hn(td,nd,"esm2020")}const aR=300,cR=Ep("authIdTokenMaxAge")||aR;let rd=null;const lR=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>cR)return;const s=t?.token;rd!==s&&(rd=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function uR(n=Sp()){const e=Tl(n,"auth");if(e.isInitialized())return e.getImmediate();const t=OS(n,{popupRedirectResolver:rR,persistence:[pb,nb,Mg]}),r=Ep("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=lR(i.toString());ZS(t,a,()=>a(t.currentUser)),XS(t,c=>a(c))}}const s=_p("auth");return s&&xS(t,`http://${s}`),t}function hR(){return document.getElementsByTagName("head")?.[0]??document}bS({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const i=en("internal-error");i.customData=s,t(i)},r.type="text/javascript",r.charset="UTF-8",hR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oR("Browser");const fR={apiKey:"AIzaSyANsIQRHs8sk6RIUSCItPC9ydTMRsb41OU",authDomain:"fu-press-start.firebaseapp.com",projectId:"fu-press-start",storageBucket:"fu-press-start.firebasestorage.app",messagingSenderId:"1092765461602",appId:"1:1092765461602:web:3d3842d05bf92a1108753b",measurementId:"G-DV6NTCLN4Q"},jg=Ap(fR),Kn=FA(jg),Hg=uR(jg),dR=Ir(Kn,"users");async function pR(n,e,t={}){const s=(await JS(Hg,n,e)).user;return await YA(Km(Kn,"users",s.uid),{email:s.email,uid:s.uid,...t}),s}async function mR(n,e){return(await YS(Hg,n,e)).user}async function ru(){return(await as(dR)).docs.map(e=>({id:e.id,...e.data()}))}const gR=["onClick"],_R={key:0,class:"divider"},yR={__name:"optionsModal",props:{show:{type:Boolean,default:!1},options:{type:Array,default:()=>[]}},emits:["close","select","login"],setup(n,{emit:e}){const t=e;function r(s){t("select",s)}return(s,i)=>(le(),Gt(Es,{name:"fade"},{default:kr(()=>[n.show?(le(),we("div",{key:0,class:"modal-overlay",onClick:i[1]||(i[1]=a=>s.$emit("close"))},[re("div",{class:"scenario-window",onClick:i[0]||(i[0]=fa(()=>{},["stop"]))},[(le(!0),we(Xe,null,Qr(n.options,(a,c)=>(le(),we("div",{key:c,class:"option-wrapper"},[re("button",{class:"primary primary-hover",onClick:l=>r(a)},It(a),9,gR),c<n.options.length-1?(le(),we("div",_R)):Vt("",!0)]))),128))])])):Vt("",!0)]),_:1}))}},ER=Ut(yR,[["__scopeId","data-v-b369510b"]]),vR={class:"scenario-title"},TR={__name:"loginModal",props:{show:{type:Boolean,default:!1},select:{type:String,default:""}},emits:["login","close","register"],setup(n,{emit:e}){const t=e,r=be([]),s=be(""),i=be(""),a=be("");async function c(){r.value=await ru()}sn(c);async function l(d,p){if(!d||!p){alert("Preencha todos os campos");return}t("login",{email:d,password:p}),t("close")}function h(d,p,g){if(!p||!g||!d){alert("Preencha todos os campos");return}r.value.forEach(S=>{if(S.email!==p)if(S.name!==d)t("register",{username:d,email:p,password:g}),t("close");else{alert("Nome de usurio j cadastrado!");return}else{alert("Email j cadastrado!");return}})}return(d,p)=>(le(),Gt(Es,{name:"fade"},{default:kr(()=>[n.show?(le(),we("div",{key:0,class:"modal-overlay",onClick:p[5]||(p[5]=g=>d.$emit("close"))},[re("div",{class:"scenario-window",onClick:p[4]||(p[4]=fa(()=>{},["stop"]))},[re("h1",vR,It(n.select),1),p[6]||(p[6]=re("div",{class:"divider"},null,-1)),n.select=="Cadastrar"?ts((le(),we("input",{key:0,type:"text",placeholder:"Nome de usurio","onUpdate:modelValue":p[0]||(p[0]=g=>s.value=g)},null,512)),[[rs,s.value]]):Vt("",!0),ts(re("input",{type:"email",placeholder:"Email","onUpdate:modelValue":p[1]||(p[1]=g=>i.value=g)},null,512),[[rs,i.value]]),ts(re("input",{type:"password",placeholder:"Senha","onUpdate:modelValue":p[2]||(p[2]=g=>a.value=g)},null,512),[[rs,a.value]]),p[7]||(p[7]=re("div",{class:"divider"},null,-1)),re("button",{class:"primary primary-hover",onClick:p[3]||(p[3]=()=>{switch(n.select){case"Entrar":l(i.value,a.value);break;case"Cadastrar":h(s.value,i.value,a.value);break}})},It(n.select),1)])])):Vt("",!0)]),_:1}))}},IR=Ut(TR,[["__scopeId","data-v-2c20ef19"]]),wR={__name:"loginOptions",emits:["login","close","register"],setup(n,{emit:e}){const t=be(!0),r=be(""),s=e,i=be([]);async function a(){i.value=await ru()}sn(a);function c(d){r.value=d}function l(d){s("login",d),s("close")}function h(d){s("register",d),s("close")}return oi(t,d=>{d||s("close")}),(d,p)=>(le(),we(Xe,null,[Ue(ER,{show:t.value,options:["Cadastrar","Entrar"],onClose:p[0]||(p[0]=g=>t.value=!1),onSelect:c},null,8,["show"]),Ue(IR,{show:r.value!="",select:r.value,onClose:p[1]||(p[1]=g=>r.value=""),onLogin:l,onRegister:h},null,8,["show","select"])],64))}},AR=Ut(wR,[["__scopeId","data-v-ffb9ec74"]]),SR=Ir(Kn,"scenes");async function bR(){return(await as(SR)).docs.map(e=>({id:e.id,...e.data()}))}const qg=Ir(Kn,"class");async function RR(n,e,t){return await XA(qg,{name:n,dmId:e,actualScene:1,password:t})}async function Da(){return(await as(qg)).docs.map(e=>({id:e.id,...e.data()}))}Ir(Kn,"characters");async function zg(){const n=Ir(Kn,"characters"),e=await as(n),t=[];for(const r of e.docs){const s={id:r.id,...r.data(),habilities:[]},i=Ir(Kn,`characters/${r.id}/habilities`),a=await as(i);for(const c of a.docs){const l={id:c.id,...c.data(),scenes:{}},h=["scene1","scene2","scene3","scene4"];for(const d of h){const p=Ir(Kn,`characters/${r.id}/habilities/${c.id}/${d}`),g=await as(p);l.scenes[d]=g.docs.map(S=>({id:S.id,...S.data()}))}s.habilities.push(l)}t.push(s)}return t}const CR={class:"scenario-title"},PR={__name:"acessClassModal",props:{show:{type:Boolean,default:!1},select:{type:Object,default:null}},emits:["login","close","access"],setup(n,{emit:e}){const t=n,r=e,s=be([]),i=be("");function a(){const l=s.value.find(h=>h.name===t.select.name);l.password==i.value?(alert(`Acesso concedido  sala: ${l.name}`),r("access",l),r("close")):alert("Senha incorreta. Tente novamente.")}async function c(){s.value=await Da()}return sn(c),(l,h)=>(le(),Gt(Es,{name:"fade"},{default:kr(()=>[n.show?(le(),we("div",{key:0,class:"modal-overlay",onClick:h[2]||(h[2]=d=>l.$emit("close"))},[re("div",{class:"scenario-window",onClick:h[1]||(h[1]=fa(()=>{},["stop"]))},[re("h1",CR,It(n.select.name),1),h[3]||(h[3]=re("div",{class:"divider"},null,-1)),ts(re("input",{type:"password",placeholder:"Senha","onUpdate:modelValue":h[0]||(h[0]=d=>i.value=d)},null,512),[[rs,i.value]]),h[4]||(h[4]=re("div",{class:"divider"},null,-1)),re("button",{class:"primary primary-hover",onClick:a}," Acessar ")])])):Vt("",!0)]),_:1}))}},kR=Ut(PR,[["__scopeId","data-v-e2e47405"]]),VR={__name:"createClassModal",props:{show:{type:Boolean,default:!1},select:{type:String,default:""}},emits:["login","close"],setup(n,{emit:e}){const t=e,r=be([]),s=be(""),i=be("");function a(){t("create",{name:i.value,password:s.value}),t("close")}async function c(){r.value=await Da()}return sn(c),(l,h)=>(le(),Gt(Es,{name:"fade"},{default:kr(()=>[n.show?(le(),we("div",{key:0,class:"modal-overlay",onClick:h[3]||(h[3]=d=>l.$emit("close"))},[re("div",{class:"scenario-window",onClick:h[2]||(h[2]=fa(()=>{},["stop"]))},[h[4]||(h[4]=re("h1",{class:"scenario-title"},"Criar Sala",-1)),h[5]||(h[5]=re("div",{class:"divider"},null,-1)),ts(re("input",{type:"text",placeholder:"Nome da Sala","onUpdate:modelValue":h[0]||(h[0]=d=>i.value=d)},null,512),[[rs,i.value]]),ts(re("input",{type:"password",placeholder:"Senha","onUpdate:modelValue":h[1]||(h[1]=d=>s.value=d)},null,512),[[rs,s.value]]),h[6]||(h[6]=re("div",{class:"divider"},null,-1)),re("button",{class:"primary primary-hover",onClick:a}," Salvar ")])])):Vt("",!0)]),_:1}))}},DR=Ut(VR,[["__scopeId","data-v-6a459061"]]),NR={class:"container-hover"},OR={class:"objeto-principal"},MR=["src","alt"],xR={class:"objeto-revelado"},LR=["src","alt"],FR={__name:"portrait",props:{charactersName:{type:String,default:""}},setup(n){const e=n,t=e.charactersName.replaceAll(" ","_"),r=e.charactersName;return(s,i)=>(le(),we("div",NR,[re("div",OR,[re("img",{src:`../portraits/${Ks(t)}_portrait.png`,alt:Ks(r)},null,8,MR)]),re("div",xR,[re("img",{src:`../characters/${Ks(t)}.png`,alt:Ks(r)},null,8,LR)])]))}},UR=Ut(FR,[["__scopeId","data-v-eaa429b8"]]),BR={class:"window"},$R={key:0,class:"loading"},jR={key:1,class:"char-list"},HR=["onClick"],qR={class:"small"},zR={class:"details"},WR={class:"scene-title"},KR={__name:"characterList",props:{show:{type:Boolean,default:!1},roomId:{type:String,required:!0}},emits:["close","select"],setup(n,{emit:e}){const t=n,r=e,s=be([]),i=be(!0);async function a(){i.value=!0;try{const l=await zg();s.value=l.filter(h=>h.roomId===t.roomId)}catch{}i.value=!1}function c(l){r("select",l)}return sn(a),(l,h)=>(le(),Gt(Es,{name:"fade"},{default:kr(()=>[n.show?(le(),we("div",{key:0,class:"modal-overlay",onClick:h[1]||(h[1]=d=>l.$emit("close"))},[re("div",BR,[h[3]||(h[3]=re("h2",{class:"title"},"Personagens da Sala",-1)),i.value?(le(),we("div",$R,"Carregando...")):(le(),we("div",jR,[(le(!0),we(Xe,null,Qr(s.value,d=>(le(),we("div",{key:d.id,class:"char-card",onClick:p=>c(d)},[Ue(UR,{charactersName:d.name},null,8,["charactersName"]),re("h3",null,It(d.name),1),re("p",qR,"Nvel: "+It(d.level),1),re("details",zR,[h[2]||(h[2]=re("summary",null,"Habilidades",-1)),(le(!0),we(Xe,null,Qr(d.habilities,p=>(le(),we("div",{key:p.id,class:"hab-block"},[re("p",null,[re("b",null,It(p.name),1)]),(le(!0),we(Xe,null,Qr(p.scenes,(g,S)=>(le(),we("div",{key:S,class:"scene"},[re("p",WR,It(S),1),re("ul",null,[(le(!0),we(Xe,null,Qr(g,k=>(le(),we("li",{key:k.id},It(k.name||"Item"),1))),128))])]))),128))]))),128))])],8,HR))),128))])),re("button",{class:"close-btn",onClick:h[0]||(h[0]=d=>r("close"))},"Fechar")])])):Vt("",!0)]),_:1}))}},GR=Ut(KR,[["__scopeId","data-v-4498f7e3"]]),QR={class:"modal-overlay"},JR={class:"scenario-window"},YR=["onClick"],XR={__name:"classList",emits:["login","close","create"],setup(n,{emit:e}){const t=be(!1),r=be(null),s=be(null),i=e,a=be([]);async function c(){a.value=await Da()}sn(c);function l(g){s.value=g}function h(g){r.value=g}function d(){t.value=!0}function p(g){i("create",g),c()}return oi(t,g=>{g||i("close")}),(g,S)=>(le(),Gt(Es,{name:"fade"},{default:kr(()=>[re("div",QR,[re("button",{class:"secundary",onClick:S[0]||(S[0]=k=>d())},"+ Criar sala"),(le(!0),we(Xe,null,Qr(a.value,k=>(le(),we("div",JR,[re("button",{class:"primary primary-hover",onClick:L=>h(k)},It(k.name),9,YR)]))),256)),Ue(kR,{show:r.value,onClose:S[1]||(S[1]=k=>r.value=null),select:r.value,onAccess:l},null,8,["show","select"]),Ue(DR,{show:t.value,onClose:S[2]||(S[2]=k=>t.value=!1),onCreate:p},null,8,["show"]),Ue(GR,{show:s.value,roomId:s.value?.id,onClose:S[3]||(S[3]=k=>s.value=null)},null,8,["show","roomId"])])]),_:1}))}},ZR=Ut(XR,[["__scopeId","data-v-9038c1ee"]]),eC={class:"app bg-fabula"},tC={__name:"index",setup(n){const e=be([]),t=be("start"),r=be([]),s=be([]),i=be([]),a=be(null);function c(){t.value="login"}function l(g){}async function h(g){try{const S=await mR(g.email,g.password);a.value=S}catch{alert("Email ou senha invlidos")}}async function d(g){try{await pR(g.email,g.password,{name:g.username}),a.value=user}catch{}}async function p(g){await RR(g.name,a.value.uid,g.password)}return sn(async()=>{e.value=await bR(),r.value=await Da(),s.value=await ru(),i.value=await zg(),e.value[0].history1}),(g,S)=>(le(),we("div",eC,[t.value=="start"&&!a.value?(le(),Gt(YE,{key:0,onStart:c})):Vt("",!0),t.value=="login"&&!a.value?(le(),Gt(AR,{key:1,onClose:S[0]||(S[0]=k=>t.value="start"),onLogin:h,onRegister:d})):Vt("",!0),a.value?(le(),Gt(ZR,{key:2,onCreate:p,onAccess:l})):Vt("",!0)]))}},nC=Ut(tC,[["__scopeId","data-v-e4fd9afc"]]);BE(nC).mount("#app");
